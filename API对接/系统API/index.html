<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-API对接/系统API">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">系统API | 爱速搭</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://baidu.gitee.io/aisuda-docs/API对接/系统API"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="系统API | 爱速搭"><meta data-rh="true" name="description" content="普通页面除了能使用业务接口外，还有一些内置的系统 API 可以用使用。"><meta data-rh="true" property="og:description" content="普通页面除了能使用业务接口外，还有一些内置的系统 API 可以用使用。"><link data-rh="true" rel="icon" href="/aisuda-docs/img/favicon.png"><link data-rh="true" rel="canonical" href="https://baidu.gitee.io/aisuda-docs/API对接/系统API"><link data-rh="true" rel="alternate" href="https://baidu.gitee.io/aisuda-docs/API对接/系统API" hreflang="en"><link data-rh="true" rel="alternate" href="https://baidu.gitee.io/aisuda-docs/API对接/系统API" hreflang="x-default"><link rel="stylesheet" href="/aisuda-docs/assets/css/styles.d93590dc.css">
<link rel="preload" href="/aisuda-docs/assets/js/runtime~main.f3b64305.js" as="script">
<link rel="preload" href="/aisuda-docs/assets/js/main.323de0df.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aisuda-docs/"><div class="navbar__logo"><img src="/aisuda-docs/img/logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aisuda-docs/img/logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">爱速搭</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aisuda-docs/">使用手册</a><a class="navbar__item navbar__link" href="/aisuda-docs/快速入门/使用流程">快速入门</a><a class="navbar__item navbar__link" href="/aisuda-docs/私有部署/私有部署安装">私有部署</a><a class="navbar__item navbar__link" href="/aisuda-docs/OpenAPI/介绍">API</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/aisuda-docs/">返回首页</a><a href="https://aisuda.bce.baidu.com/amis/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">amis 文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/">产品描述</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/组织管理/工作台管理">组织管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/数据模型/外部数据源接入/数据源编辑">数据模型</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/页面设计/简介">页面设计</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/aisuda-docs/API对接/基础">API对接</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aisuda-docs/API对接/基础">基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aisuda-docs/API对接/系统API">系统API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aisuda-docs/API对接/本地开发调试">本地开发调试</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aisuda-docs/API对接/API中心">API中心</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/服务编排/服务编排概述">服务编排</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/数据报表/概述">数据报表</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/BPM引擎/BPM概述">BPM引擎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/移动应用/编辑器/编辑器概述">移动应用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/应用管理/应用设置">应用管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/门户管理/功能介绍">门户管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/对象存储/对象存储管理">对象存储</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/静态资源/图片管理">静态资源</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/主题与图标/主题管理">主题与图标</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/组件模板/功能介绍">组件模板</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/NPM组件扩展包/功能介绍">组件扩展包</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/管理后台/站点设置">管理后台</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aisuda-docs/应用发布">应用发布</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aisuda-docs/国际化/应用国际化/多语言设置">国际化</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aisuda-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">API对接</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">系统API</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>系统API</h1></header><p>普通页面除了能使用业务接口外，还有一些内置的系统 API 可以用使用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="模型数据接口">模型数据接口<a href="#模型数据接口" class="hash-link" aria-label="Direct link to 模型数据接口" title="Direct link to 模型数据接口">​</a></h2><p>在爱速搭平台完成数据建模后，对应的数据模型自动就会有一套增删改查的 restful 接口供普通页面设计使用。</p><p><img loading="lazy" alt="er" src="/aisuda-docs/assets/images/er@2x-91f44bc697467303d2acb6cd110f1cc5.png" width="1582" height="1042" class="img_ev3q"></p><p>以下的例子都将以这个模型作为参考说明。需要特别注意的是 tablea 和 tableb 有个一对多的关系，关系字段叫 bList，tableb 和 tablea 有个多对一的关系，关系字段叫 a，外键是 aId。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="列表接口">列表接口<a href="#列表接口" class="hash-link" aria-label="Direct link to 列表接口" title="Direct link to 列表接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>model://数据源key.模型key</code><br>
<!-- -->说明：用来获取模型数据列表<br>
<!-- -->参数：</p><ul><li><code>page</code> 分页信息，从 1 开始，数字 1 表示第一页，数字 2 表示第二页，以此类推</li><li><code>perPage</code> 每页返回多少条数据，默认是 10 条</li><li><code>orderBy</code> 可以指定表中的字段名</li><li><code>orderDir</code> 发送 asc 或者 desc</li><li><code>其他过滤字段</code> 请往下看</li><li><code>__keywords</code> 请看下面的关键字检索</li><li><code>__relations</code> 级联查询关系数据。一对一，多对一的关系表字段是默认加载，但是多对多，一对多则不会，如果想级联查询这些表，则需要通过这个参数指定。格式是数组，例如: <code>model://xxx.xxx?__relations[]=a&amp;__relations[]=b</code></li></ul><p>返回参考：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    items: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="简单字段过滤">简单字段过滤<a href="#简单字段过滤" class="hash-link" aria-label="Direct link to 简单字段过滤" title="Direct link to 简单字段过滤">​</a></h4><p>模型中字段可以直接拿来过滤比如 tableB 里面的 txt 字段。</p><p><code>model://datasource.tableb?txt=B1</code></p><p>这样请求的列表只会返回 txt 字段等于 B1 的项。</p><p>多对一关系表中字段也同样可以用来检索。</p><p><code>model://datasource.tableb?a[txt]=A1</code></p><p>注意看模型设计，tableB 有个多对一关系关联 tableA，且关系字段的字段名是 a</p><p>注意：多个字段查询是并且的关系</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="过滤模式设定">过滤模式设定<a href="#过滤模式设定" class="hash-link" aria-label="Direct link to 过滤模式设定" title="Direct link to 过滤模式设定">​</a></h4><p>如果不指定过滤模式，默认就是等于，如果想要指定过滤模式，则可以像这样查询。</p><p><code>model://datasource.tableb?txt[like]=B1</code></p><p>也就是说字段里面可以跟个 op 来指定匹配类型。目前支持 op 指令有：</p><ul><li><code>eq</code> 等于，不设置也是这个模式</li><li><code>ne</code> 不等于</li><li><code>gt</code> 大于</li><li><code>ge</code> 大于或等于</li><li><code>lt</code> 小于</li><li><code>le</code> 小于或等于</li><li><code>like</code> 模糊匹配</li><li><code>sw</code> 匹配开头，startWith</li><li><code>ew</code> 匹配结尾，endWith</li><li><code>bt</code> 范围匹配，这里因为需要两个值，所以是这样查询 <code>model://datasource.tableb?txt[bt][from]=xxx&amp;txt[bt][to]=xxx</code></li><li><code>in</code> 包含，这个要求传入是个数组，所以是这样查询 <code>model://datasource.tableb?txt[in][]=x1&amp;txt[in][]=x2</code></li></ul><p>多对一关系模型中的字段也同样支持这个语法如：<code>model://datasource.tableb?a[txt][like]=A1</code></p><p>注意：多个字段查询是并且的关系</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="关键字检索">关键字检索<a href="#关键字检索" class="hash-link" aria-label="Direct link to 关键字检索" title="Direct link to 关键字检索">​</a></h4><p>如果想通过关键字查询多个字段，可以通过 <code>__keywords</code> 来查询，查询格式如：</p><p><code>model://datasource.tableb?__keywords[txt,num]=a</code></p><p>意思是关键字 a 同时搜索表中的 txt 和 num 字段，将匹配结果查询出来。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="高级过滤模式">高级过滤模式<a href="#高级过滤模式" class="hash-link" aria-label="Direct link to 高级过滤模式" title="Direct link to 高级过滤模式">​</a></h4><p>前面用到的字段查询规则，其实是没办法设置「或者」组合的，如果要实现这种复杂组合，则需要通过 <code>__filter</code> 参数来指定规则。</p><p>值格式配置如下：</p><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ValueGroup</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  conjunction</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;and&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;or&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ValueGroup </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ValueItem</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ValueItem</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 左侧字段，这块有预留类型，不过目前基本上只是字段。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  left</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;field&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    field</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 还有更多类型，暂不细说</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  op</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;equals&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;not_equal&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;less&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;less_or_equal&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 根据字段类型和 op 的不同，值格式会不一样。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 如果 op 是范围，right 就是个数组 [开始值，结束值]，否则就是值。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  right</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ValueGroup</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>具体请<a href="http://aisuda.bce.baidu.com/amis/zh-CN/components/form/condition-builder" target="_blank" rel="noopener noreferrer">前往 amis 文档查看</a></p><p>示例： <code>model://datasource.tableb?__filter[conjunction]=or&amp;__filter[children][0][op]=equal&amp;__filter[children][0][left][type]=field&amp;__filter[children][0][left][field]=txt&amp;__filter[children][0][right]=B1&amp;__filter[children][1][op]=equal&amp;__filter[children][1][left][type]=field&amp;__filter[children][1][left][field]=txt&amp;__filter[children][1][right]=B2</code></p><p>查询条件相当于：txt 字段可以是 B1 或者 txt 字段可以是 B2。</p><p>left.field 里面的值除了可以是当前模型中的字段也可以是多对一关联表中的字段如：</p><p><code>model://datasource.tableb?__filter[conjunction]=or&amp;__filter[children][0][op]=equal&amp;__filter[children][0][left][type]=field&amp;__filter[children][0][left][field]=txt&amp;__filter[children][0][right]=B3&amp;__filter[children][1][op]=equal&amp;__filter[children][1][left][type]=field&amp;__filter[children][1][left][field]=a.txt&amp;__filter[children][1][right]=A1</code></p><p>查询条件相当于：txt 字段可以是 B3 或者 多对一关联表 a 中的 txt 字段可以是 A1</p><p>如果觉得在 query 中拼接 <code>__filter</code> 字段比较麻烦，可以通过 body 传递，可以以 json 的格式发送过来如</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;__filter&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;conjunction&quot;: &quot;or&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;children&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;op&quot;: &quot;equal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;left&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;type&quot;: &quot;field&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;field&quot;: &quot;txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;right&quot;: &quot;B1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;op&quot;: &quot;equal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;left&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;type&quot;: &quot;field&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;field&quot;: &quot;txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;right&quot;: &quot;B2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>GET 接口也能发送 body？当然不能！至少 chrome 浏览器是不允许的！所以只能用 method-override 方式，也就是说 header 里面加个 <code>X-HTTP-Method-Override</code> 为 GET。这样实际发送是 POST，但是后端会认为是 GET 请求，所以依然是列表查询接口。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新增接口">新增接口<a href="#新增接口" class="hash-link" aria-label="Direct link to 新增接口" title="Direct link to 新增接口">​</a></h3><p>方式: <code>POST</code><br>
<!-- -->地址：<code>model://数据源key.模型key</code><br>
<!-- -->说明：用来添加一条记录，接口地址和列表接口是一样的，只是请求方式变成了 <code>POST</code><br>
<!-- -->参数： 请求体需要将这个表对应的必填字段带上（除了自增 id），格式可以是 json 也可以是 form 或者 form-data<br>
<!-- -->示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txt&quot;:&quot;1111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;num&quot;:1111,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;date&quot;:&quot;2022-08-24 00:00:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;a&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txt&quot;:&quot;1111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;num&quot;:1111,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;date&quot;:&quot;2022-08-24 00:00:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;aId&quot;:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对于对一关系字段，添加时指定外键或者直接通过关系字段绑定都可以。那如果是对多关系，则只能通过关系字段指定比如：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txt&quot;:&quot;1111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;num&quot;:1111,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;date&quot;:&quot;2022-08-24 00:00:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;bList&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;txt&quot;:&quot;1111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;num&quot;:1111,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;date&quot;:&quot;2022-08-24 00:00:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以上是一个主表顺带添加子表的例子，如果成员里面有主键，则是直接关联（比如第一个成员），如果没有则会创建一个新子表数据与之关联（比如第二个成员）。</p><p>返回参考：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="详情接口">详情接口<a href="#详情接口" class="hash-link" aria-label="Direct link to 详情接口" title="Direct link to 详情接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>model://数据源key.模型key/:id</code><br>
<!-- -->说明：用来查询表的单条数据详情<br>
<!-- -->参数： 除了请求路径中带上 id 外，额外还有一些参数可以使用</p><ul><li><code>其他过滤字段</code> 请看列表接口中字段过滤规则，详情接口与之一致。</li><li><code>__relations</code> 级联查询关系数据。如果想级联查询这些表，则需要通过这个参数指定。格式是数组，例如: <code>model://xxx.xxx?__relations[]=a&amp;__relations[]=b</code></li></ul><p>通常路径中通过 id 基本上能定位到是哪一条数据了，查询条件已经没有意义了，如果不确定是哪一条数据，想通过字段过滤，则请将 id 指定为 0 如：</p><p><code>model://datasource.tableb/0?txt=B1</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改接口">修改接口<a href="#修改接口" class="hash-link" aria-label="Direct link to 修改接口" title="Direct link to 修改接口">​</a></h3><p>方式: <code>POST</code><br>
<!-- -->地址：<code>model://数据源key.模型key/:id</code><br>
<!-- -->说明：可以参考新增接口，格式要求要求，但是请求路径要求指定数据 id</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="删除接口">删除接口<a href="#删除接口" class="hash-link" aria-label="Direct link to 删除接口" title="Direct link to 删除接口">​</a></h3><p>方式: <code>DELETE</code><br>
<!-- -->地址：<code>model://数据源key.模型key/:id</code><br>
<!-- -->说明：用来删除数据，支持删除多个，多个 id 用英文逗号隔开如： <code>delete:model://datasource.tableb/1,2</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="选项接口">选项接口<a href="#选项接口" class="hash-link" aria-label="Direct link to 选项接口" title="Direct link to 选项接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>model://数据源key.模型key/options</code><br>
<!-- -->说明： 用来实现选项类关联模型数据录入，默认只会返回主键 id 和标题字段，如果觉得返回的字段不够可以通过 <code>__fields</code> 参数扩充。如：<code>model://datasource.tableb/options?__fields[]=date&amp;__fields[]=num</code><br>
<!-- -->参数：</p><ul><li><code>__fields</code> 扩充查询字段，目前仅支持当前表的字段。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="批量修改接口">批量修改接口<a href="#批量修改接口" class="hash-link" aria-label="Direct link to 批量修改接口" title="Direct link to 批量修改接口">​</a></h3><p>方式：<code>POST</code><br>
<!-- -->地址： <code>model://数据源key.模型key/bulkUpdate</code><br>
<!-- -->说明：请求体 json 格式，需要更新的数据放在 items 数组中，每个成员必须主键 id 字段，以及其他要更新的字段。<br>
<!-- -->参数：无<br>
<!-- -->内容：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  items: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...其他字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初始值接口">初始值接口<a href="#初始值接口" class="hash-link" aria-label="Direct link to 初始值接口" title="Direct link to 初始值接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>model://数据源key.模型key/scaffold</code><br>
<!-- -->说明：用来辅助新增，给新增表单提供初始化数据。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="excel-模板导出">excel 模板导出<a href="#excel-模板导出" class="hash-link" aria-label="Direct link to excel 模板导出" title="Direct link to excel 模板导出">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>model://数据源key.模型key/downloadExcelTemplate</code><br>
<!-- -->说明：用来导出 excel 模板，用来给 excel 导入功能提供参考。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="导出-excel-接口">导出 excel 接口<a href="#导出-excel-接口" class="hash-link" aria-label="Direct link to 导出 excel 接口" title="Direct link to 导出 excel 接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>model://数据源key.模型key/exportExcelData</code><br>
<!-- -->说明：导出当前表的数据成 excel 文件。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="excel-导入接口">excel 导入接口<a href="#excel-导入接口" class="hash-link" aria-label="Direct link to excel 导入接口" title="Direct link to excel 导入接口">​</a></h3><p>方式: <code>POST</code><br>
<!-- -->地址：<code>model://数据源key.模型key/UploadExcelData</code><br>
<!-- -->说明：通过 excel 文件导入数据，文件格式请参考 excel 模板导出的文件。请求体为 form-data 格式，文件放在 file 字段中， 可以通过 <code>labelNameMap</code> 做列名到字段名之间的映射。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="部门选择接口">部门选择接口<a href="#部门选择接口" class="hash-link" aria-label="Direct link to 部门选择接口" title="Direct link to 部门选择接口">​</a></h2><p>地址：<code>company://department</code><br>
<!-- -->说明：用来获取部门信息，主要给部门选择组件使用。<br>
<!-- -->参数：</p><ul><li><code>parent</code> 用来指定父级部门，如果不传返回的是顶级部门，如果传了就是返回该部门下面子部门</li></ul><p>返回参考：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        label: &#x27;部门名称&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value: &#x27;xxxxx&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        children: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            label: &#x27;子部门&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;xxxx&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="人员选择接口">人员选择接口<a href="#人员选择接口" class="hash-link" aria-label="Direct link to 人员选择接口" title="Direct link to 人员选择接口">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="人员穿梭框接口">人员穿梭框接口<a href="#人员穿梭框接口" class="hash-link" aria-label="Direct link to 人员穿梭框接口" title="Direct link to 人员穿梭框接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>company://user/transfer-options</code><br>
<!-- -->说明：用来获取用户信息，主要给用户选择组件使用
参数：无<br>
<!-- -->返回参考：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      leftDefaultValue: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      leftOptions: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          label: &#x27;部门名称&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          value: &#x27;xxxxx&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          children: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              label: &#x27;子部门&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              value: &#x27;xxxx&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      children: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ref: &#x27;xxxxx&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          children: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              label: &#x27;xxxxUser&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              value: &#x27;xxxUser@aisuda.com&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以参考前端 Transfer 关联选择模式的说明：/amis/zh-CN/components/form/transfer#%E5%85%B3%E8%81%94%E9%80%89%E6%8B%A9%E6%A8%A1%E5%BC%8F</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="人员懒加载接口">人员懒加载接口<a href="#人员懒加载接口" class="hash-link" aria-label="Direct link to 人员懒加载接口" title="Direct link to 人员懒加载接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>company://user/options</code><br>
<!-- -->说明：用来懒加载子部门信息以及部门下的人员信息，两个模式根据传入的参数是 parentId 还是 departmentId，如果是部门 id 则是获取人员信息，如果是 parentId 则返回子部门信息
参数：</p><ul><li><code>parentId</code> 部门选项的值</li><li><code>departmentId</code> 部门选项的值</li></ul><p>返回参考：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        label: &#x27;xxx&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value: &#x27;xxxxx&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="人员搜索接口">人员搜索接口<a href="#人员搜索接口" class="hash-link" aria-label="Direct link to 人员搜索接口" title="Direct link to 人员搜索接口">​</a></h3><p>方式: <code>GET</code><br>
<!-- -->地址：<code>company://user/autoComplete</code><br>
<!-- -->说明：用来检索用户，基于关键字返回匹配的用户列表，这个接口主要也是给人员选择组件使用
参数：</p><ul><li><code>term</code> 关键字</li></ul><p>返回参考：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        label: &#x27;xxx&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value: &#x27;xxxxx&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aisuda/aisuda-docs/edit/main/docs/API对接/系统API.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/aisuda-docs/API对接/基础"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">基础</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aisuda-docs/API对接/本地开发调试"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">本地开发调试</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#模型数据接口" class="table-of-contents__link toc-highlight">模型数据接口</a><ul><li><a href="#列表接口" class="table-of-contents__link toc-highlight">列表接口</a></li><li><a href="#新增接口" class="table-of-contents__link toc-highlight">新增接口</a></li><li><a href="#详情接口" class="table-of-contents__link toc-highlight">详情接口</a></li><li><a href="#修改接口" class="table-of-contents__link toc-highlight">修改接口</a></li><li><a href="#删除接口" class="table-of-contents__link toc-highlight">删除接口</a></li><li><a href="#选项接口" class="table-of-contents__link toc-highlight">选项接口</a></li><li><a href="#批量修改接口" class="table-of-contents__link toc-highlight">批量修改接口</a></li><li><a href="#初始值接口" class="table-of-contents__link toc-highlight">初始值接口</a></li><li><a href="#excel-模板导出" class="table-of-contents__link toc-highlight">excel 模板导出</a></li><li><a href="#导出-excel-接口" class="table-of-contents__link toc-highlight">导出 excel 接口</a></li><li><a href="#excel-导入接口" class="table-of-contents__link toc-highlight">excel 导入接口</a></li></ul></li><li><a href="#部门选择接口" class="table-of-contents__link toc-highlight">部门选择接口</a></li><li><a href="#人员选择接口" class="table-of-contents__link toc-highlight">人员选择接口</a><ul><li><a href="#人员穿梭框接口" class="table-of-contents__link toc-highlight">人员穿梭框接口</a></li><li><a href="#人员懒加载接口" class="table-of-contents__link toc-highlight">人员懒加载接口</a></li><li><a href="#人员搜索接口" class="table-of-contents__link toc-highlight">人员搜索接口</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/aisuda-docs/assets/js/runtime~main.f3b64305.js"></script>
<script src="/aisuda-docs/assets/js/main.323de0df.js"></script>
</body>
</html>