## 概述
查询记录是指通过可视化的方式向应用实体模型查询数据记录，在服务编排中主要通过“查询记录”节点来实现。

## 配置面板
![image.png](/img/服务编排/entity-query-01.png)
配置面板包含基本信息、查询字段、筛选条件、排序设置和分页设置。
### 1 基本信息
#### 1.1 节点标题
可以配置节点的标题，修改节点标题后，左侧画布中节点的展示也会进行修改，便于对节点进行说明。
#### 1.2 数据源
选择数据源需要在”实体模块“中建立数据源，然后选择需要操作的实体模型，当选择实体模型后会显示”筛选条件“模块，用于选择要删除的记录。

#### 1.3 查询记录
支持查询单条记录和多条记录两种
- 查询单条记录时返回的出参是一个对象，当经过筛选条件过滤出多条数据时，也只会返回第一条。
- 查询多条记录时返回的出参是一个数组，同时会在配置面板下放展示排序设置和分页设置模块，便于对多条数据的处理。
#### 1.4 节点出参
查询记录得到的结果要保存的变量。可以输入新的变量或者通过后侧的按钮在“选择变量”弹窗中选择上下文中已存在的变量。

### 2 查询字段
可以通过添加字段按钮在“选择字段”弹窗中选择期望查询的字段。选择后会展示查询字段列表，可以通过左侧拖拽按钮进行排序，通过右侧删除按钮进行删除。
### 3 筛选条件
筛选条件支持”简单模式“和”复杂模式“两种类型选择

#### 3.1 简单模式
![image.png](/img/服务编排/entity-delete-02.png)
简单模式可以添加多个条件，每个分支包含左侧的下拉框选择字段、中间的操作条件，右侧的条件值以及最后的删除按钮构成，多个条件间为且的关系。

#### 3.2 复杂模式
![image.png](/img/服务编排/entity-delete-03.png)
复杂模式可以点击输入框右侧的编辑按钮，在弹出框中设置筛选条件，弹窗如下：
![image.png](/img/服务编排/entity-delete-04.png)
弹窗中的设置条件支持”并且“和”或者“两种逻辑，且能通过添加条件和条件组的方式进行并行和嵌套配置。可以处理较复杂的筛选条件
### 4 排序设置
可以通过添加字段按钮在“选择字段”弹窗中选择期望排序的字段。选择后会展示排序字段列表，可以通过右侧的排序按钮选择当前字段是升序还是降序排列，通过右侧删除按钮可以删除当前的排序字段。
![image.png](/img/服务编排/entity-query-02.png)

### 5 分页设置
分页设置用于需要通过分页查询的情况，配置项如下：
![image.png](/img/服务编排/entity-query-03.png)
配置项均支持通过公式编辑器选择上下文中的变量。
#### 5.1 起始偏移量
分页开始时的偏移量，如设置100，则会先从查询出的结果中，第100条记录开始进行分页处理。
#### 5.2 每页数量
分页查询每页的数量。
#### 5.3 查询页
分页查询的页码。
#### 5.4记录行总数
每次查询的最大数量，如设置1000时，会先通过过滤条件筛选出1000条数据，然后再根据起始偏移量、每页数量和查询页进行分页处理。