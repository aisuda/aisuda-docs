## 概述
分支节点由起始节点和终止节点组成，中间可以添加任意条分支连线，可以看成多个if条件的集合。

## 操作步骤
###  1 添加/删除分支
添加/删除分支有两种方式：

**方式一：**通过hover或者点击起始分支节点，会在右上角出现快速操作栏，包含添加分支节点、展开/收起分支、删除分支3个按钮，点击添加分支按钮后会在右边出现“选择分支节点”面板，选择节点后可以看到分支节点下出现一条包含该节点的分支。
![image.png](/img/服务编排/branch-01.png)

**方式二：**右击起始分支节点，在右键菜单中包含添加分支、删除分支按钮，选择添加分支后同样可以在右侧弹出“选择分支节点”面板，可以选择要在分支中使用的节点。
![image.png](/img/服务编排/branch-02.png)

### 2 设置分支条件
点击分支条件的连线即可在右侧展开连线属性配置面板，可以设置当前分支的名称、条件类型以及条件设置。
#### 2.1 分支名称
修改分支名称后，分支连线上对应的名称也会进行修改，便于对分支条件进行说明。
#### 2.2 条件类型
支持通过**条件规则**和**公式**两种方式来设置分支执行条件。
##### 2.2.1 条件规则
可以设置多个分支条件，各个分支条件间为 “且” 的关系。分支条件分为三部分：左侧为选择当前上下文中的变量，然后选择操作条件，右侧为输入的对应的值。

**注意：**中间的操作符受左侧变量类型的影响，左侧变量来自于服务入参及当前分支节点之前的节点产生的变量。
![image.png](/img/服务编排/branch-03.png)

##### 2.2.1 公式
可以通过公式编辑器进行编辑，可以使用当前上下文中的变量，以及公式编辑器中的函数。
![image.png](/img/服务编排/branch-04.png)

### 3 上下文变量说明
分支内产生的变量不能在分支外部使用，因为不能确定哪些分支条件会执行。同一条分支下存在多个分支节点时，前面节点产生的变量可以在后面的节点中使用，相当于这些分支变量是在同一个if条件下，在相同的作用域中。