  
## 音频管理

爱速搭平台支持统一资源管理，其中就包含音频资源管理。目前在平台级别、组织级别、以及应用级别都可以独立维护音频，并且音频资源会通过继承机制，实现公共资源的下发和使用。

>  资源的管理最终是为资源的使用而服务，资源的使用始终是在开发环境下，因此组织级和应用级音频管理只在平台开发环境下才支持。

> 音频管理模块目前默认关闭，私有部署版本可以通过配置环境变量 ISUDA_ENABLE_AUDIO_MANAGE: on 开启


### 层级管理

爱速搭目前在平台级别、组织级别、以及应用级别分别有不同的入口，来进行音频文件管理。不同层级只会展示当前层级创建的分类和上传的文件。

1. 应用级
    
    对于与应用或业务强相关，且不需要共享给其他项目使用的音频资源，建议在应用级进行维护，应用级音频管理的入口为：应用开发>应用设置>资源管理>音频管理。
    
    ![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_d866621.png)
    
>    不同类型的应用支持的应用设置的配置项不完全相同，示例为web应用的应用设置支持的配置项。对于其他类型的应用，入口的路径是一样的。
    
2. 组织级
    
    对于需要在一个组织内共享、组织标准资源或者统一规范类的音频文件，建议在组织级进行维护。组织级音频管理功能的入口为：平台管理>资源管理>音频管理。
    
    
3. 平台级

    平台级别的音频管理更多的是公开资源，适用面会比组织级更广，平台的所有组织都可以使用。适用于集团类的公司，或其他涉及多个组织的场景。平台级资源管理的入口为：超管后台>资源管理>音频管理。

> 对于爱速搭私有化的客户来说，只有购买了多租户授权才能在平台上创建多个组织。
 

### 操作说明

不同层级的音频管理能力都是一样的，主要包括如下几点：

- 分类管理：分类的创建、编辑、删除

- 文件管理：音频的上传、下载、播放、编辑、复制地址等

- 批量处理：批量删除、批量下载

- 筛选及查询：对文件列表进行筛选和检索

下面一应用级音频管理为例，详细介绍音频管理的具体功能和操作说明。


#### 分类管理


1. 新增分类

目前爱速搭支持分类的最大层级为3级，其中系统自带的「全部」为第一级，自定义创建的分类均为全部分类下的子集，在创建分类的时候，可以选择父级分类，从而实现在父级分类下创建子分类。如不选择父级分类，则默认父级分类为「全部」。

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_a2a9abf.png)

> 目前分类名称的长度限制为8个字符，且不支持特殊字符。

2. 编辑分类

如果需要对分类信息进行修改，可以通过分类的更多进入信息编辑页面。

<!-- ![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_df65c58.png)
-->

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_cd93142.png)

3. 删除分类

如果需要对分类进行删除，默认的机制是会将被删除的分类下的音频全部移入全部这个默认分类。操作入口同编辑分类。

#### 音频上传

爱速搭支持WAV，FLAC，APE，MP3，AAC，OGG，Opus等格式的音频文件上传，可批量上传多个文件。

上传表单中，默认会填充当前所处的分类信息，存储位置优先为对象存储。

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_a8be27e.png)

> 因为音频文件可能体积较大，因此推荐将上传的文件存储在对象存储（单个文件大小为20M）。当平台没有配置对象存储时，音频文件会存入db中（单个文件大小为5M），建议在上传前先完成对象存储配置，详细操作请参照[对象存储管理](../对象存储/对象存储管理.md)。
> 

#### 音频操作

音频支持在线播放和编辑、下载等操作，点击更多可以展示更多操作项。

- 复制链接：一键复制文件的地址
- 编辑：可以修改分类信息，以及在不改变文件地址的情况下更新文件内容
> 如果配置了cdn编辑替换音频不会立刻看到效果，具体更改时间看cdn缓存策略 
- 下载：单个文件是直接下载（多个文件批量下载会下载成一个zip包）
- 删除：对单个文件进行删除

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_6e3f7de.png)


#### 批量处理

默认批量操作的按钮是置灰的，当选中某个文件后，激活批量操作的按钮。单个卡片的选中热区为卡片操作入口icon下方。

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_7327d5a.png)

#### 筛选及排序

平台支持按文件格式筛选，按文件名称、上传时间、音频大小进行排序，以及支持输入文件名称模糊搜索。

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_4b59be3.png)

### 音频使用


1.在页面编辑器中，往画布中拖入一个音频组件，并打开该组件的配置面板

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_1e76d8d.png)

2. 点击音频组件配置面板的「从音频库选择」，打开选择面板，选择中需要的音频文件并确认提交。

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_240ed9a.png)

3. 确认提交后可以看到看到所选音频文件的地址，到这里就完成了音频文件的使用。

![image.png](https://bce.bdstatic.com/doc/bce-doc/ISUDA/image_d21e468.png)

> 在编辑器中选择文件的时候，会将平台上有权限使用的音频文件都展示出来，且分为应用级和平台级。应用级为当前应用维护的音频文件，平台级为组织级和平台超管维护的音频文件的合集，但是分类相互独立，维护各自原有的分类结构。