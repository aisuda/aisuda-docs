## 功能概述

即人工审批节点，主要用于流程审批，流程流转到该节点，会触发审批任务，任务处理人可以从待办中心查看并处理改审批任务

## 典型场景

主要用于表单审批场景，如请假单、采购单等审批场景

## 分项说明

### 任务标题

自定义该节点的任务节点的标题，即在待办中心显示的任务标题

![image.png](/img/BPM引擎/流程设计/节点描述/活动节点/人工节点/审批节点/image_55d229e.png)

支持通过表达式设定标题，支持以下常用变量定任务标题

| 支持变量 | 说明                                                                                        |
| -------- | ------------------------------------------------------------------------------------------- |
| 表单变量 | 基于表单中的变量定义任务标题，如任务标题为“审批采购单-[采购人]”，其中[采购人]为一个表单变量 |
| 流程变量 | 基于流程变量定义任务标题，如任务标题为“填写采购单-[流程发起人]”，其中[流程发起人]为流程变量 |

![image.png](/img/BPM引擎/流程设计/节点描述/活动节点/人工节点/审批节点/image_a235ca9.png)

### 渲染类型

指定审批视图的类型，可以是`标准表单`或者`自定义页面`。
- 标准表单：默认审批框架、用户可以通过`表单视图`自定义审批表单的视图，其他如审批历史等框架为系统定义。
- 自定义页面：完全用户自定义审批页面，包括审批表单、流程动作、审批历史等。

### 标准表单

#### 标准表单-处理对象

即需要审批的对象，可以选择当前流程节点之前的其他节点出参作为审批对象。

![image.png](/img/BPM引擎/流程设计/节点描述/活动节点/人工节点/审批节点/image_e2e949b.png)

#### 标准表单-表单视图

绑定填写对象对应的表单视图，主要用于任务视图的展现，以便于设计前端填写、审批任务中擦使用的表单视图。

#### 标准表单-字段操作权限

因为审批节点不同、审批角色不同，常常需要根据设定表单的中字段的操作权限，如针对不同审批节点

- 设定字段的编辑、禁用、只读
- 设定字段的显示、隐藏

详细见[人工任务概述](BPM引擎/流程设计/节点描述/活动节点/人工节点/人工任务概述.md)

#### 标准表单-摘要字段

在流程运行时，为了更好提升待办中心的流程待办的可读性，增加流程任务摘要字段的功能，以便于在待办列表中直观查看流程的摘要字段。

设置路径： 字段操作权限/ 字段操作明细 / 摘要字段

![image.png](/img/BPM引擎/流程设计/节点描述/活动节点/人工节点/审批节点/image_d60278c.png)

如上图所示，支持任意勾选摘要字段，最多支持 5 个字段作为待办摘要字段

详细见 [人工任务概述](BPM引擎/流程设计/节点描述/活动节点/人工节点/人工任务概述.md)

#### 标准表单-流程操作权限

即设定处理人处理当前节点任务时，可以进行哪些流程操作

| 动作 | 说明 |
| --- | --- |
| 提交 | 提交表单数据，进入后续节点流转 |
| 暂存 | 暂存当前填写数据，后续补充完成再提交任务 |
| 回退 | 回退流程到指定节点 |
| 终止 | 终止当前流程 |
| 移交 | 移交当前任务，由他人处理 |
| 加签 | 支持当前会签、后加签等操作 |

详细见 [人工任务概述](BPM引擎/流程设计/节点描述/活动节点/人工节点/人工任务概述.md)

### 自定义页面

![image.png](/img/BPM引擎/流程设计/节点描述/活动节点/人工节点/审批节点/image_viewType.png)

#### 自定义页面-任务页面

在页面管理中配置一个页面，用于替代标准表单，自定义审批视图。

#### 自定义页面-数据映射

配置流程审批页数据与自定义页面数据的数据通道，可以将流程中的数据传递给普通页面的`页面参数`。

> 注意：自定义渲染页面没有处理对象，相应的，流程动作处理权限以及流程操作权限也不存在，所有的字段权限和页面中可以使用的流程动作需要用户自己设计。我们提供了流程状态、任务节点信息、流程信息等流程相关数据，用户可以将这些数据通过数据映射下发到页面，从而可以实现对应的权限控制。同时，我们在事件动作的配置面板中增加了流程的操作动作，用户可以通过对相关的任务进行操作让流程继续流转。

### 处理人

即填写任务的处理人，详细见[人工任务概述](BPM引擎/流程设计/节点描述/活动节点/人工节点/人工任务概述.md)

### 多人处理策略

可根据场景选择不同的多人处理策略，即
-  串行（串签）
-  并签（会签）

详细见[人工任务概述](BPM引擎/流程设计/节点描述/活动节点/人工节点/人工任务概述.md)


### 提交规则

即填写内容的提交规则，包含

| 规则   | 说明                                                                                                                  |
| ------ | --------------------------------------------------------------------------------------------------------------------- |
| 提交   | 即直接提交实体表中（入库），提交后，后续节点会返回可以对当前数据进行使用，并且会返回填写记录的 ID，以便于后续节点定位 |
| 不提交 | 即填写的数据不提交，作为流程变量存储与流程中，后续节点可以使用当前填写的数据进行相关的操作                            |

### 输出参数

即改节点的输出参数，以便于后续节点使用，解决节点之间协作问题。

## 配置过程

如图所示，按图所示进行配置即可

![image.png](/img/BPM引擎/流程设计/节点描述/活动节点/人工节点/审批节点/image_740e40b.png)
