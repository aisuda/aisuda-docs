<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<meta name="author" content="aisuda@baidu.com">
<title>爱速搭使用手册</title>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>爱速搭使用手册</h1>
<div class="details">
<span id="author" class="author">aisuda@baidu.com</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_简介">简介</a></li>
<li><a href="#_技术白皮书">技术白皮书</a>
<ul class="sectlevel2">
<li><a href="#_设计理念">设计理念</a></li>
<li><a href="#_核心功能">核心功能</a></li>
<li><a href="#_爱速搭在百度">爱速搭在百度</a></li>
</ul>
</li>
<li><a href="#_级别概念">级别概念</a></li>
<li><a href="#_应用场景">应用场景</a></li>
<li><a href="#_产品定价">产品定价</a></li>
<li><a href="#_安装及使用">安装及使用</a></li>
<li><a href="#_私有部署安装">私有部署安装</a>
<ul class="sectlevel2">
<li><a href="#_环境需求">环境需求</a></li>
<li><a href="#_单机版本">单机版本</a></li>
<li><a href="#_试用_license">试用 license</a></li>
<li><a href="#_如何在无网环境安装">如何在无网环境安装？</a></li>
<li><a href="#_分布式版本">分布式版本</a></li>
<li><a href="#_无_docker_环境下的安装">无 Docker 环境下的安装</a></li>
</ul>
</li>
<li><a href="#_快速入门">快速入门</a>
<ul class="sectlevel2">
<li><a href="#_使用流程">使用流程</a></li>
<li><a href="#_创建应用">创建应用</a></li>
<li><a href="#_连接数据源">连接数据源</a></li>
<li><a href="#_创建数据模型">创建数据模型</a></li>
<li><a href="#_首页设计">首页设计</a></li>
<li><a href="#_发布应用">发布应用</a></li>
<li><a href="#_权限管理">权限管理</a></li>
</ul>
</li>
<li><a href="#_组织管理">组织管理</a>
<ul class="sectlevel2">
<li><a href="#_应用管理">应用管理</a></li>
<li><a href="#_角色管理">角色管理</a></li>
<li><a href="#_基本信息管理">基本信息管理</a></li>
<li><a href="#_组织架构及成员管理">组织架构及成员管理</a></li>
</ul>
</li>
<li><a href="#_数据模型">数据模型</a>
<ul class="sectlevel2">
<li><a href="#_数据信息设置">数据信息设置</a></li>
<li><a href="#_模型字段">模型字段</a></li>
<li><a href="#_验证器设置">验证器设置</a></li>
<li><a href="#_索引设置">索引设置</a></li>
<li><a href="#_权限设置">权限设置</a></li>
<li><a href="#_数据管理">数据管理</a></li>
</ul>
</li>
<li><a href="#_页面管理">页面管理</a>
<ul class="sectlevel2">
<li><a href="#_页面类型说明">页面类型说明</a></li>
<li><a href="#_富文本页面">富文本页面</a></li>
<li><a href="#_文件夹页面">文件夹页面</a></li>
<li><a href="#_移动端样式">移动端样式</a></li>
<li><a href="#_创建页面">创建页面</a></li>
<li><a href="#_编辑区">编辑区</a></li>
<li><a href="#_全局工具">全局工具</a></li>
<li><a href="#_组件面板">组件面板</a></li>
<li><a href="#_配置面板">配置面板</a></li>
<li><a href="#_组件搭建流程">组件搭建流程</a></li>
<li><a href="#_编辑器说明">编辑器说明</a></li>
<li><a href="#_组件说明">组件说明</a></li>
<li><a href="#_前提条件">前提条件</a></li>
<li><a href="#_基本流程">基本流程</a></li>
<li><a href="#_添加_npm_依赖">添加 npm 依赖</a></li>
<li><a href="#_开发框架">开发框架</a></li>
<li><a href="#_获取_schema_配置的属性">获取 schema 配置的属性</a></li>
<li><a href="#_暴露的变量和方法">暴露的变量和方法</a></li>
<li><a href="#_api基础">API基础</a></li>
<li><a href="#_代理">代理</a></li>
<li><a href="#_如果不想经过内置代理">如果不想经过内置代理</a></li>
<li><a href="#_在各种语言下获取参数的方法">在各种语言下获取参数的方法</a></li>
</ul>
</li>
<li><a href="#_api中心">API中心</a>
<ul class="sectlevel2">
<li><a href="#_使用方法_7">使用方法</a></li>
<li><a href="#_签名方式">签名方式</a></li>
<li><a href="#_url_地址替换">URL 地址替换</a></li>
<li><a href="#_提交参数映射">提交参数映射</a></li>
<li><a href="#_返回结果转换">返回结果转换</a></li>
<li><a href="#_文件上传">文件上传</a></li>
<li><a href="#_文件下载">文件下载</a></li>
</ul>
</li>
<li><a href="#_api编排">API编排</a>
<ul class="sectlevel2">
<li><a href="#_基础">基础</a></li>
<li><a href="#_节点分类介绍">节点分类介绍</a></li>
</ul>
</li>
<li><a href="#_本地开发调试">本地开发调试</a>
<ul class="sectlevel2">
<li><a href="#_应用发布管理">应用发布管理</a></li>
<li><a href="#_应用权限设置_2">应用权限设置</a></li>
<li><a href="#_应用设置">应用设置</a></li>
<li><a href="#_添加_form_组件">添加 Form 组件</a></li>
<li><a href="#_编辑表单项">编辑表单项</a></li>
<li><a href="#_绑定提交接口">绑定提交接口</a></li>
<li><a href="#_添加增删改查组件">添加「增删改查」组件</a></li>
<li><a href="#_准备数据接口">准备数据接口</a></li>
<li><a href="#_绑定数据接口">绑定数据接口</a></li>
</ul>
</li>
<li><a href="#_openapi">OpenAPI</a>
<ul class="sectlevel2">
<li><a href="#_介绍">介绍</a></li>
<li><a href="#_组织api">组织API</a></li>
<li><a href="#_应用api">应用API</a></li>
<li><a href="#_私有部署高级功能">私有部署高级功能</a></li>
</ul>
</li>
<li><a href="#_更新记录">更新记录</a>
<ul class="sectlevel2">
<li><a href="#_版本记录">版本记录</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_简介">简介</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://aisuda.bce.baidu.com/">爱速搭</a>是百度智能云推出的低代码开发平台，它灵活性强，对开发者友好，在百度内部大规模使用，有超过
4w 内部页面是基于它制作的，是百度内部中台系统的核心基础设施。</p>
</div>
<div class="paragraph">
<p>它具备以下功能：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>页面制作</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>基于 <a href="https://baidu.gitee.io/amis">amis</a> 页面可视化编辑，具备超过 120
种内置组件，对于大部分中后台页面可以做到无需了解前端就能制作。</p>
</li>
<li>
<p>支持自定义前端组件，可以通过代码扩充定制组件。</p>
</li>
<li>
<p>支持导出前端项目，可以运行在任意前端框架中。</p>
</li>
<li>
<p>支持页面模板，可以自定义模板，快速搭建公司内常见页面。</p>
</li>
<li>
<p>支持自定义主题，具备 1000+ 细粒度展现控制，可自定义 CSS。</p>
</li>
<li>
<p>自适应移动端布局。</p>
</li>
</ol>
</div>
</li>
<li>
<p>数据模型</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>具备数据模型能力，可以直连外部数据库，做到对于简单增删改查需求无需后端。</p>
</li>
<li>
<p>支持所有数据库基础字段，并扩展了十几种高级字段类型，并支持对字段的校验和索引设置。</p>
</li>
<li>
<p>支持软删除、记录操作时间。</p>
</li>
<li>
<p>支持设置数据字段验证。</p>
</li>
<li>
<p>支持设置索引规则。</p>
</li>
<li>
<p>支持批量导入导出数据。</p>
</li>
<li>
<p>支持自动生成基于模型的增删改查页面。</p>
</li>
<li>
<p>支持一对一、多对一、一对多、多对多关联关系。</p>
</li>
<li>
<p>支持通过 SQL 的方式对数据进行处理，灵活实现各种数据操作功能。</p>
</li>
</ol>
</div>
</li>
<li>
<p>API 对接</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>具备 API 对接能力，可以直连外部接口。</p>
</li>
<li>
<p>支持百度云 BOS、S3、阿里云 OSS 协议的对象存储对接。</p>
</li>
</ol>
</div>
</li>
<li>
<p>业务编排</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>支持可视化编辑后端逻辑，可以对多个接口进行组合。</p>
</li>
<li>
<p>支持 HTTP、SQL 方式获取数据。</p>
</li>
<li>
<p>支持并行和串行调用。</p>
</li>
<li>
<p>支持循环、分支进行流程控制。</p>
</li>
<li>
<p>支持脚本进行自定义扩展。</p>
</li>
</ol>
</div>
</li>
<li>
<p>业务流程</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>权限控制，可以控制每个节点能查看和编辑哪些数据。</p>
</li>
<li>
<p>支持动态查找处理人，比如上级。</p>
</li>
<li>
<p>流程流转判断、加签、会签。</p>
</li>
<li>
<p>支持打回到上个节点或前面某个节点。</p>
</li>
<li>
<p>流程通知。</p>
</li>
</ol>
</div>
</li>
<li>
<p>权限控制</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>具备基于角色的细粒度资源控制。</p>
</li>
<li>
<p>可以针对页面内组件粒度进行控制，比如某个按钮对某些用户不显示。</p>
</li>
<li>
<p>可以对某个页面创建分享链接。</p>
</li>
<li>
<p>所有操作日志，所有操作都会记录，便于后续审计。</p>
</li>
</ol>
</div>
</li>
<li>
<p>多环境</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>支持多套环境，相互之间数据隔离，开发时不影响正式版本的使用。</p>
</li>
<li>
<p>支持版本管理，可以通过回滚快速还原。</p>
</li>
<li>
<p>平台升级不会影响应用已发布版本。</p>
</li>
</ol>
</div>
</li>
<li>
<p>私有部署</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>支持私有部署，不限制实例数，环境只依赖
Docker、MySQL、Redis，安装简单、运维成本低。</p>
</li>
<li>
<p>支持对接 oauth 2.0，也可以支持自定义登录协议。</p>
</li>
<li>
<p>可以对接自己的组织架构。</p>
</li>
</ol>
</div>
</li>
<li>
<p>支持 OpenAPI 对系统进行操作。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>爱速搭目前的客户有知名的银行及互联网公司，比如「 <a href="https://mp.weixin.qq.com/s/pi5PUUc9RXiCqdMHe4Cohw">知乎</a> 」，商业咨询请联系邮箱
<code>aisuda@baidu.com</code>。</p>
</div>
<div class="paragraph">
<p>本文档的完整 pdf
可以从 <a href="https://gitee.com/baidu/aisuda-docs/raw/gh-pages/aisuda.pdf">这里</a>下载。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_技术白皮书">技术白皮书</h2>
<div class="sectionbody">
<div class="paragraph">
<p>这里将介绍爱速搭设计理念及核心技术点，它在技术上和其它低代码平台有什么不同。</p>
</div>
<div class="sect2">
<h3 id="_设计理念">设计理念</h3>
<div class="paragraph">
<p>爱速搭最初用户是百度内部开发者，因此它最重要的设计理念是「开发者优先」。</p>
</div>
<div class="paragraph">
<p>我们认为面向非开发者的零代码平台使用场景有限，只能做简单的办公应用，大部分时候还不如在线
Excel
简单方便，因此爱速搭不是零代码平台，它面向的是有一定开发经验的用户。</p>
</div>
<div class="paragraph">
<p>爱速搭低代码平台的目标不是取代开发者，而是辅助开发者更高效地完成工作。</p>
</div>
<div class="paragraph">
<p>因为重视开发者，爱速搭比起其它低代码平台有三个显著特点：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>灵活性高</strong>，我们重视灵活性和功能可扩展，让开发人员可以最大程度发挥，而不是为了易用性处处设限，这点在后续的前端和后端设计中都有体现。</p>
</li>
<li>
<p><strong>开放和透明</strong>，低代码平台最大的风险是技术锁定和黑盒，作为开发者我们自己也不喜欢封闭的低代码平台，因此爱速搭重视开放性，前端方面渲染器开源了，后端方面也选择了开发人员最熟悉的传统数据库技术，没有中间层，对开发者是透明的，并且爱速搭后端不依赖任何云厂商，可以部署到任意环境。</p>
</li>
<li>
<p><strong>架构上松耦合</strong>，比起大而全的集成系统，我们选择了松耦合的架构，这样能让开发者有更多选择，可以选择只用前端、只用可视化编辑器、只用后端，可以很好和现有开发结合。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>接下来将介绍爱速搭中前后端及编辑器的核心设计。</p>
</div>
</div>
<div class="sect2">
<h3 id="_核心功能">核心功能</h3>
<div class="sect3">
<h4 id="_前端">前端</h4>
<div class="paragraph">
<p>爱速搭前端使用了自主开发的开源项目 amis，它的 star 数量有
7.1k，并且一直在持续更新，目前大量互联网及金融公司使用，包括但不限于：腾讯云、滴滴、阅文集团、https://mp.weixin.qq.com/s/_TGPjWaY5OJNllPQhi5pzg[贝壳]、光大银行等知名企业。</p>
</div>
<div class="paragraph">
<p>amis 渲染器的核心是将 JSON
配置渲染成可交互的页面，比如下面一段简单的配置：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/saveForm"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>使用 amis 渲染之后就成了一个表单：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/amis-form.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>可以看到 amis 配置非常简洁，没有多余的内容，即便从来没学过也能看懂。</p>
</div>
<div class="paragraph">
<p>amis 可以支持多种场景使用，你可以用它来制作：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>带导航的多页面应用。</p>
</li>
<li>
<p>单个页面。</p>
</li>
<li>
<p>已有页面（任意前端框架）的某个小区域，比如只用 amis 做表单。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>amis 的核心技术点有：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>支持无限层级嵌套，可以做出复杂的前端界面。</p>
</li>
<li>
<p>除了界面，还包括数据获取、表单验证、数据联动、显隐切换、交互的低代码配置。</p>
</li>
<li>
<p>大量内置组件（120+），开箱即用。</p>
</li>
<li>
<p>扩展容易，使用标准 React 组件扩展，同时爱速搭还支持使用 vue 和 jquery
扩展。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>amis 低代码开发比起传统开发的主要优势：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>节省前端人力，百度内部百家号分析过，一个季度内 94%
的中台页面无需前端。</p>
</li>
<li>
<p>统一前端技术栈，并且未来无需重构</p>
<div class="ulist">
<ul>
<li>
<p>百度内部 5 年前的页面配置现在依然能渲染，完全不需要修改，体验还随着
amis 的升级更好了，我们将会一直坚持向下兼容，即便再过 5 年也没问题。</p>
</li>
<li>
<p>而传统方式每过两年就不得不重构，angular/vue/react
最新版本都不向下兼容的，不重构意味着得不到最新的功能，文档也不好找，重构意味着需要花费大量研发时间，而重构本身并不创造产品价值。</p>
</li>
</ul>
</div>
</li>
<li>
<p>质量有保证，因为是配置，所以不管是谁写出来的都一样，哪怕完全交给外包开发，也不担心交付的代码质量，百度内部实际上已经大规模转成外包开发，让宝贵的研发资源花在面向用户的产品上。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>amis 已经经历了 5 年的发展，至今依然在快速迭代，是有专人维护的持续项目。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/amis-ci.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_可视化编辑器">可视化编辑器</h4>
<div class="paragraph">
<p>很多低代码平台的编辑器都只支持一个层级编辑，下图是某个开源表单设计器的截图：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/other-editor.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>可以看到它所有字段都是平铺的，只有通过栅格来进行简单的左右布局，无法支持复杂嵌套场景，比如表格列中嵌套表单、复杂的二维布局等。</p>
</div>
<div class="paragraph">
<p>而爱速搭的编辑器支持树形编辑，可以用它制作复杂页面。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/amis-editor.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>编辑器的核心技术点有：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>支持 amis 的无限层级编辑。</p>
</li>
<li>
<p>支持拖拽编辑、右键菜单。</p>
</li>
<li>
<p>支持代码模式和可视化双向编辑，满足初学者和熟练者的不同需求。</p>
</li>
<li>
<p>树形导航，代码可以聚焦到细粒度组件，只编辑选中组件的配置。</p>
</li>
<li>
<p>支持移动端编辑和预览。</p>
</li>
<li>
<p>灵活简单的扩展机制，扩展自定义组件的编辑面板，编辑面板是 amis
表单，因此只需要会 amis 就能制作编辑器插件。</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_后端数据模型">后端数据模型</h4>
<div class="paragraph">
<p>爱速搭后端的数据模型是基于传统数据库，这和业界低代码平台的常见做法不一样，业界常见有两种做法：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>基于非关系型数据库，最常用的是 mongo，大量零代码平台都是基于它开发的。</p>
</li>
<li>
<p>基于已创建好的宽表，比如预先创建 500 列，然后分配这些列给不同字段。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>但这两种做法都有明显缺点：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数据是孤岛，因为数据类型特殊，因此只能存储在平台中，难以打通现有应用数据，只能通过
api
的方式交换数据，这也意味着这些低代码平台都只适合做全新应用，无法用于现有核心系统的开发，无法直连现有系统的数据库。</p>
</li>
<li>
<p>开发人员不熟悉，mongo 在国内依然小众，无 schema 既是优点也是缺点，没有
schema
容易导致新老数据结构不一致而引起问题，目前未听说有大公司在核心系统中使用
mongo，并且它的查询语法也远不如 SQL 普及。</p>
</li>
<li>
<p>有大量限制，基于已创建的宽表使得无法使用所有 SQL
语句，通常只支持查询，无法用 <code>select *</code>、无法创建 view
视图等，数据库各种高级功能几乎都没法用。</p>
</li>
<li>
<p>性能难以预估，而且因为要经过中间层转换，性能将有损，对开发者来说是个黑盒，出现性能问题将不好排查。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>爱速搭的数据模型采用了更传统的做法，它的原理是动态数据库 ORM
映射，可以理解为动态创建了 Entity 类，然后通过这些类去操作数据库。</p>
</div>
<div class="paragraph">
<p>这意味着在爱速搭中：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数据模型就是数据库表，其中的字段就是表中的字段，对字段的修改是自动生成数据库的表结构变更操作，这和传统开发是一样的，开发人员都熟悉。</p>
</li>
<li>
<p>可以直连已有数据库，数据不再是孤岛，爱速搭可以和传统开发混搭，可以用在现有成熟系统中，而不是只能做新应用。</p>
</li>
<li>
<p>即可以像操作对象那样便捷操作数据，也能使用任意 SQL
语句来实现复杂功能，实现和普通开发一样的灵活度。</p>
</li>
<li>
<p>性能和稳定性可预期，因为没有中间层转换，性能上限取决于数据库本身。
多环境独立 爱速搭应用后端支持多环境，每个环境完全独立：</p>
</li>
<li>
<p>所有页面信息、导航、API
中心等在发布后就变成只读了，每个环境都是独立的。</p>
</li>
<li>
<p>数据模型将使用不同的库，数据不会相互影响。</p>
</li>
<li>
<p>发布之后所有前端静态文件都会保存当时的历史版本，即便平台做了不兼容升级也不会导致应用页面出问题。</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_业务编排">业务编排</h4>
<div class="paragraph">
<p>业务编排是一种可视化后端逻辑的能力，不少低代码产品使用的方式是基于图及连线的方式来编辑，比如下面是某个开源编排的截图：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/n8n-editor.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>使用图连接的方式虽然看起来漂亮，但实际使用体验不好，尤其是业务复杂的时候，连线会很乱，比如下面是一个复杂点的例子，可以发现这时已经很难看出执行逻辑了：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/bp-hell.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>因此爱速搭选择了开发人员更为熟悉的树形结构来进行业务编排：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/产品描述/auto-flow.png" alt="image">
</div>
<div class="title">Figure 1. 爱速搭的业务编排</div>
</div>
<div class="paragraph">
<p>使用这种方式有如下优点：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>开发人员容易理解和看懂，它和写代码的思路是一样的，从上往下执行。</p>
</li>
<li>
<p>同时爱速搭支持生成伪代码的能力，方便开发者检查。</p>
</li>
<li>
<p>可以构建深层结构，并且能将它折叠起来方便一层层阅读，比起连线更简洁易懂。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_爱速搭在百度">爱速搭在百度</h3>
<div class="paragraph">
<p>爱速搭在百度主要用户中后台前端开发，在百度所有核心部门都有使用，包括搜索、手机百度、社区、AI、自动驾驶、系统部、百度云等，更是用在了许多重点项目中，比如两年前百度春晚红包，对红包分配的实时调度控制界面就是基于爱速搭开发的。</p>
</div>
<div class="paragraph">
<p>爱速搭在百度的大规模普及并不是因为强制使用，而是百度产品线自主选择的，体现出了爱速是大量开发人员都认可的平台。</p>
</div>
<div class="paragraph">
<p>百度内部比较大的产品线基于爱速搭制作了上千个页面，最复杂的页面有超过 1
万行配置。</p>
</div>
<div class="paragraph">
<p>因为百度自己内部大规模使用，爱速搭的可靠性和长期维护都有保障。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_级别概念">级别概念</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>组织</strong></p>
<div class="paragraph">
<p>组织是爱速搭的主要入口，组织可以理解为一家公司，它可以有自己的组织架构，爱速搭中的每个用户都属于一个或多个组织。</p>
</div>
<div class="paragraph">
<p>在爱速搭 SaaS
版本中有多个组织，相互之间的用户是隔离的，而在私有部署版本中只有一个组织。</p>
</div>
</li>
<li>
<p><strong>应用</strong></p>
<div class="paragraph">
<p>在一个组织中能创建多个应用，每个应用就是一个独立的系统，比如一个 CRM
应用，其中包括页面及应用内角色。</p>
</div>
</li>
<li>
<p><strong>页面</strong></p>
<div class="paragraph">
<p>应用中可以创建多个页面，应用在实际使用时就是访问这些页面，爱速搭支持支持
6 种页面类型：
<strong> 普通页面（amis）
</strong> 模型页面
<strong> 富文本页面
</strong> Markdown 页面
<strong> 外部链接
</strong> 嵌入外部页面</p>
</div>
<div class="paragraph">
<p>+
页面会在左侧导航中显示，有树形层级关系。</p>
</div>
</li>
<li>
<p><strong>数据源</strong></p>
<div class="paragraph">
<p>数据源就是指数据库，可以是爱速搭内置的数据库，也可以是外部数据库，比如自己搭建的
MySQL 数据库。</p>
</div>
</li>
<li>
<p><strong>数据模型</strong></p>
<div class="paragraph">
<p>数据模型就是数据库中的表，爱速搭可以在线设计数据库表结构，自动对数据库表结构进行变更，可以建立多个表的关联关系。</p>
</div>
</li>
<li>
<p><strong>流程</strong></p>
<div class="paragraph">
<p>流程是指业务审批流程，可以控制每个节点的操作权限。</p>
</div>
</li>
<li>
<p><strong>API 中心</strong></p>
<div class="paragraph">
<p>API 中心是用于管理后端 http 接口。</p>
</div>
</li>
<li>
<p><strong>多接口聚合</strong></p>
<div class="paragraph">
<p>多接口聚合功能在 API
中心里，它可以对多个后端接口进行组装，前端只需要调用一个接口。</p>
</div>
</li>
<li>
<p><strong>amis 组件</strong></p>
<div class="paragraph">
<p>爱速搭所有前端界面都是通过 amis 组件来渲染的，amis
是一种低代码渲染引擎，它支持 120+
组件，可以基于它完成大部分中台页面的开发。</p>
</div>
</li>
<li>
<p><strong>页面模板</strong></p>
<div class="paragraph">
<p>页面模板是事先创建好的页面，可以基于它来快速创建常见页面，可以自定义自己的专属模板。</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_应用场景">应用场景</h2>
<div class="sectionbody">
<div class="paragraph">
<p>爱速搭平台适用于多种不同类型企业的多样化场景企业应用开发、系统项目实施与数字化建设。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">信息采集、标注与审核</dt>
<dd>
<p>爱速搭可快速构建各类表单类型应用，实现对用户、业务数据的采集、加工处理和汇总分析。可应用于用户反馈、市场调研、信息征集、线索收集、信息登记、数据标注等场景。</p>
</dd>
<dt class="hdlist1">产品管理后台配套建设</dt>
<dd>
<p>灵活的数据对接特性，可小时级构建复杂产品服务管理中心，满足产品服务运营管理与快速交付。可用于开发业务管理后台、运营平台、审核平台、CMS
等。</p>
</dd>
<dt class="hdlist1">办公应用搭建与完善</dt>
<dd>
<p>可基于
BPM、数据模型等能力，根据实际企业办公场景诉求，搭建各类适合自身需求的办公应用，并支持与已有系统打通，可开发行政审批系统、客户管理、项目管理、HR
管理系统等应用。</p>
</dd>
<dt class="hdlist1">企业 ERP 系统建设、迁移与扩展</dt>
<dd>
<p>可按需快速构建库管、生产、调度、客服等各业务系统，并接驳打通已有系统，形成架构统一、灵活升级的一体化
ERP
平台，支持库存管理、生产管理、销售管理、财务管理、客服管理等系统开发。</p>
</dd>
<dt class="hdlist1">IT 智能化改造</dt>
<dd>
<p>爱速搭融合有更多的 AI
集成特性，可帮助企业快速搭建或改造具备智能化能力的工业应用，实现业务升级，满足工业质检、智慧巡检、生产管理、产能分析等场景的需求。</p>
</dd>
<dt class="hdlist1">客户项目定制实施</dt>
<dd>
<p>爱速搭可根据业务需求快速实现定制化开发，需求变更成本低，更可免除运维烦恼，实现高效交付，完成行业综合解决方案
(如政务、教育、物联网、工业、能源等)快速实施交付。</p>
</dd>
<dt class="hdlist1">SaaS 软件研发</dt>
<dd>
<p>爱速搭基于 AI、数据集成、可视化和云服务能力，可快速研发输出具备 AI
特性的企业 SaaS 应用，实现智能化开发企业 SaaS 应用生产与交付中台。</p>
</dd>
<dt class="hdlist1">数字化中台建设</dt>
<dd>
<p>爱速搭可与智能云数据中台、AI
中台和微服务产品深度融合，联合构建企业数字化中台，帮助企业轻松实现应用开发/管理中台、信息化管理中心。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_产品定价">产品定价</h2>
<div class="sectionbody">
<div class="paragraph">
<p>爱速搭应用智能低代码搭建平台公测阶段面向所有申请用户免费使用，但请勿用作商业开发平台或应用于任何商业用途。如有商业需求，请联系爱速搭团队进行商业应用洽谈。</p>
</div>
<div class="paragraph">
<p><strong>商业用途计费规则</strong></p>
</div>
<div class="paragraph">
<p>商业用途收费标准为按套餐收费，支持公有云服务和私有化服务，不同套餐类型价格不同，详细信息请联系爱速搭团队进一步沟通。</p>
</div>
<div class="paragraph">
<p>商业合作咨询请联系邮箱 <code>aisuda@baidu.com</code>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_安装及使用">安装及使用</h2>
<div class="sectionbody">
<div class="paragraph">
<p>爱速搭提供了两个版本：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SaaS 在线版本，在线使用地址是
<a href="https://aisuda.bce.baidu.com">爱速搭官网</a>，需完成试用申请和百度智能云账号 <a href="#实名认证">[实名认证]</a>。试用申请表单提交后，审核人员对申请信息进行审核并开通权限（提交后请耐心等待电话联系或邮件通知）。开通成功后即可进入平台进行试用。</p>
</li>
<li>
<p>私有部署版本，需要先进行私有部署版本的安装，可以部署在内网隔离环境中使用。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这两个版本在功能上一致，私有部署版本一般 1-2 周发布新版本，而在线版本更新频率会更高。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_私有部署安装">私有部署安装</h2>
<div class="sectionbody">
<div class="paragraph">
<p>爱速搭支持私有部署，您可以部署在自己的内网，私有部署版本具备 SaaS 版本的所有功能，但只有一个组织。</p>
</div>
<div class="sect2">
<h3 id="_环境需求">环境需求</h3>
<div class="paragraph">
<p>需要您的机器安装 <code>Docker</code>，推荐版本为`18.09`及以上，爱速搭可以运行在单机 Docker 环境上，如果需要集群化、高可用，可以使用 Docker 自带的 swarm 或者 k8s。</p>
</div>
<div class="paragraph">
<p>Docker 的安装建议参考官方文档，可以安装在 <a href="https://docs.docker.com/install/linux/docker-ce/centos/">Centos</a>、https://docs.docker.com/install/linux/docker-ce/ubuntu/[Ubuntu]、https://docs.docker.com/docker-for-windows/install/[Windows]、https://docs.docker.com/docker-for-mac/install/[Mac]等系统上。</p>
</div>
<div class="paragraph">
<p>生产环境推荐使用 Linux 操作系统，最小机器配置建议是 4 核 4G 内存。</p>
</div>
<div class="sect3">
<h4 id="_安装_docker">安装 Docker</h4>
<div class="paragraph">
<p>以 Mac 上安装 Docker 为例，打开 <a href="https://docs.docker.com/docker-for-mac/install/">这里</a>。</p>
</div>
<div class="sect4">
<h5 id="_下载安装包">下载安装包</h5>
<div class="imageblock">
<div class="content">
<img src="img/私有部署/docker/123589768-4730da80-d81c-11eb-99ea-49eed7e05c93.png" alt="123589768 4730da80 d81c 11eb 99ea 49eed7e05c93">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/私有部署/docker/123589785-4e57e880-d81c-11eb-90e6-b30dcf170bf0.png" alt="123589785 4e57e880 d81c 11eb 90e6 b30dcf170bf0">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_安装启动">安装&amp;启动</h5>
<div class="imageblock">
<div class="content">
<img src="img/私有部署/docker/123610551-48b9cd00-d833-11eb-8119-fc63c6ea525d.png" alt="123610551 48b9cd00 d833 11eb 8119 fc63c6ea525d">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/私有部署/docker/123610572-4c4d5400-d833-11eb-8c1c-79afd9874ad1.png" alt="123610572 4c4d5400 d833 11eb 8c1c 79afd9874ad1">
</div>
</div>
<div class="paragraph">
<p>通过 Docker 桌面可以看到全部为启动状态：
image::私有部署/docker/123610680-638c4180-d833-11eb-82e5-9cdf6eb627a3.png[]</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_单机版本">单机版本</h3>
<div class="paragraph">
<p>单机版本依赖 <code>docker-compose</code>，在 Mac 和 Windows 下的 Docker
程序会自带，如果是 Linux 则需要执行以下命令来安装：</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo curl -L "https://github.com/docker/compose/releases/download/1.26.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose</pre>
</div>
</div>
<div class="paragraph">
<p>首先选择一个目录作为爱速搭的安装目录，在这个目录下创建两个空目录
<code>mysql-data</code> 和 <code>redis-data</code>，然后创建 <code>docker-compose.yml</code> 文件，
<code>docker-compose.yml</code> 文件内容如下：</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>版本变更请查看 <a href="#_更新记录">更新记录</a></p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">registry.baidubce.com/aisuda/aisuda:1.1.17</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">8090:8085'</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="c1"># 数据库用户名</span>
      <span class="na">ISUDA_DB_USER</span><span class="pi">:</span> <span class="s">root</span>
      <span class="c1"># 数据库密码，这个密码需要和下面 mysql 镜像里的一致</span>
      <span class="na">ISUDA_DB_PASSWORD</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Q39sTi0i^9'</span>
      <span class="na">ISUDA_DB_NAME</span><span class="pi">:</span> <span class="s">aisuda</span>
      <span class="na">ISUDA_DB_HOST</span><span class="pi">:</span> <span class="s">db</span>
      <span class="na">ISUDA_DB_PORT</span><span class="pi">:</span> <span class="m">3306</span>

      <span class="c1"># id 加密密钥，建议修改</span>
      <span class="na">ISUDA_HASHID_SALT</span><span class="pi">:</span> <span class="s1">'</span><span class="s">aisuda'</span>

      <span class="c1"># 数据库加密密钥，建议修改</span>
      <span class="na">ISUDA_ENCRYPT_KEY</span><span class="pi">:</span> <span class="s1">'</span><span class="s">B224AD82C6206D4DD0D49B3A17BD894D8EA2DC671372BA6B270D3B3AD599A45C'</span>

      <span class="c1"># redis 地址和端口</span>
      <span class="na">ISUDA_REDIS_HOST</span><span class="pi">:</span> <span class="s">redis</span>
      <span class="na">ISUDA_REDIS_PORT</span><span class="pi">:</span> <span class="m">6379</span>
      <span class="c1"># ISUDA_REDIS_PASSWORD redis 密码，</span>
      <span class="c1"># ISUDA_REDIS_ENABLE_READY_CHECK 是否开启 ready check 默认不开</span>

      <span class="c1"># 邮件 smtp 地址，用于发验证码</span>
      <span class="na">ISUDA_EMAIL_HOST</span><span class="pi">:</span>
      <span class="c1"># 邮件 smtp 端口，比如 25</span>
      <span class="na">ISUDA_EMAIL_PORT</span><span class="pi">:</span>
      <span class="c1"># 邮件用户名和密码</span>
      <span class="na">ISUDA_EMAIL_USER</span><span class="pi">:</span>
      <span class="na">ISUDA_EMAIL_PASS</span><span class="pi">:</span>
      <span class="c1"># 如果是 465 之类的 ssl 端口，请取消下面的注释</span>
      <span class="c1"># ISUDA_EMAIL_SECURE: 1</span>
      <span class="c1"># 邮件显示的发件人地址</span>
      <span class="na">ISUDA_EMAIL_FROM</span><span class="pi">:</span> <span class="s1">'</span><span class="s">xxx@xxx.com'</span>

      <span class="c1"># 邮件 API，如果配置就优先使用，用于没有 smtp 的场景，细节请参考这篇文档后面的介绍</span>
      <span class="c1"># ISUDA_EMAIL_API: http://xxx.com/emailapi</span>
      <span class="c1"># 邮件 API 的签名密钥</span>
      <span class="c1"># ISUDA_EMAIL_API_PASSWORD:</span>

      <span class="c1"># license（可选，如果不填则需要在安装时提供）</span>
      <span class="na">ISUDA_LICENSE</span><span class="pi">:</span>

      <span class="c1"># 百度统计（可选）</span>
      <span class="na">BAIDU_TONGJI_CODE</span><span class="pi">:</span>

      <span class="c1"># Google Analytics（可选）</span>
      <span class="na">GA_MEASUREMENT_ID</span><span class="pi">:</span>

      <span class="c1"># 文件存储配置（可选）</span>
      <span class="c1"># DRIVER 支持 bos 或 s3</span>
      <span class="na">ISUDA_FILE_STORAGE_DRIVER</span><span class="pi">:</span>
      <span class="na">ISUDA_FILE_STORAGE_REGION</span><span class="pi">:</span>
      <span class="na">ISUDA_FILE_STORAGE_BUCKET</span><span class="pi">:</span>
      <span class="na">ISUDA_FILE_STORAGE_AK</span><span class="pi">:</span>
      <span class="na">ISUDA_FILE_STORAGE_SK</span><span class="pi">:</span>

      <span class="c1"># ES 操作日志 和 api 转发日志相关</span>
      <span class="c1"># es 服务地址</span>
      <span class="na">ISUDA_ES_URL</span><span class="pi">:</span>
      <span class="c1"># es 服务帐号密码</span>
      <span class="na">ISUDA_ES_USERNAME</span><span class="pi">:</span>
      <span class="na">ISUDA_ES_PASSWORD</span><span class="pi">:</span>

      <span class="c1"># 索引文件名（可选）</span>
      <span class="c1"># ISUDA_SITE_LOG_INDEX: suda-log-{{date:YYYY-MM}}</span>

      <span class="c1"># 是否开启站点日志记录</span>
      <span class="na">ISUDA_SITE_LOG_ENABLED</span><span class="pi">:</span>

      <span class="c1"># 默认 api 转发日志不存储 发送体内容，如果开启了，将会存储 json 和 普通表单数据 内容体</span>
      <span class="na">ISUDA_SITE_LOG_SAVE_REQUSET_PAYLOAD</span><span class="pi">:</span>

      <span class="c1"># 平台级别超级管理员邮箱（可选）</span>
      <span class="c1"># ISUDA_PLATFORM_ADMINISTRATORS: aa@aa.com,bb@bb.com</span>

      <span class="c1"># 登录相关</span>
      <span class="c1"># 默认的登录方式，加入配置成 oauth 表示只启用 oauth 登录方式，多个登录方式请用逗号隔开如：email,weixin,oauth</span>
      <span class="na">AUTH_ENABLED_LIST</span><span class="pi">:</span> <span class="s">email</span>

      <span class="c1"># oauth 登录相关</span>

      <span class="c1"># oauth 授权接口地址</span>
      <span class="na">ISUDA_OAUTH_AUTHORIZE_URL</span><span class="pi">:</span>

      <span class="c1"># oauth token 获取接口地址</span>
      <span class="na">ISUDA_OAUTH_TOKEN_URL</span><span class="pi">:</span>

      <span class="c1"># oauth clientId</span>
      <span class="na">ISUDA_OAUTH_CLIENT_ID</span><span class="pi">:</span>

      <span class="c1"># oauth clientSecret</span>
      <span class="na">ISUDA_OAUTH_CLIENT_SECRET</span><span class="pi">:</span>

      <span class="c1"># oauth scope 默认为 email</span>
      <span class="na">ISUDA_OAUTH_SCOPE</span><span class="pi">:</span>

      <span class="c1"># oauth 获取 用户 profile 的接口地址</span>
      <span class="na">ISUDA_OAUTH_INFO_URL</span><span class="pi">:</span>

      <span class="c1"># 默认为 id, 假如你的 oauth 返回的 profile 中，id 为 user_id 请填写 user_id</span>
      <span class="na">ISUDA_OAUTH_ID_FIELD</span><span class="pi">:</span>

      <span class="c1"># 默认为 name, 假如你的 oauth 返回的 profile 中，用户名为 user_name 请填写 user_name</span>
      <span class="na">ISUDA_OAUTH_NAME_FIELD</span><span class="pi">:</span>

      <span class="c1"># 邮箱地址字段，如果你的 oauth 中返回了邮箱地址，请配置，如果没有可以不配置</span>
      <span class="na">ISUDA_OAUTH_EMAIL_FIELD</span><span class="pi">:</span>

      <span class="c1"># 邮箱后缀，当你的 oauth 没有返回邮箱地址，同时又不想有绑定邮箱这个动作，可以配置这个比如：baidu.com，这样会自动根据用户名拼接个假邮箱地址。</span>
      <span class="na">ISUDA_OAUTH_EMAIL_SUFFIX</span><span class="pi">:</span>

      <span class="c1"># 默认退出是 爱速搭的退出页，如果配置了，会跳转到对应 oauth 的退出页面。</span>
      <span class="na">ISUDA_OAUTH_LOGOUT_URL</span><span class="pi">:</span>

      <span class="c1"># 默认不开启，开启后，应用导出将剔除敏感信息，但是意味着导入的时候你还需要额外去补填这些信息</span>
      <span class="na">ISUDA_DISABLE_EXPORT_SENSITIVE_INFO</span><span class="pi">:</span>

      <span class="c1"># 默认不开启，开启后，应用发布的时候，用开发环境权限覆盖运行态资源权限</span>
      <span class="na">ISUDA_OVERWRITE_RUNTIME_ACL</span><span class="pi">:</span>

      <span class="c1"># 默认不开启，开启后，发布环境的权限通过接口配置的接口返回的权限点进行控制</span>
      <span class="na">ISUDA_TAKEOVER_RUNTIME_ACL</span><span class="pi">:</span>

      <span class="c1"># 是否是 https，爱速搭的访问地址是 https 需要增加这个配置项</span>
      <span class="c1"># ISUDA_IS_HTTPS: true</span>

      <span class="c1"># 下面是自定义组件所需的 npm 本地镜像</span>
      <span class="c1"># NPM_REGISTRY: https://registry.npm.taobao.org</span>
      <span class="c1"># NPM_SEARCH: https://www.npmjs.com/search/suggestions</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">registry.baidubce.com/aisuda/mysql:8</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">command</span><span class="pi">:</span>
      <span class="pi">[</span>
        <span class="s1">'</span><span class="s">mysqld'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--character-set-server=utf8mb4'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--collation-server=utf8mb4_unicode_ci'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--skip-character-set-client-handshake'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--default-authentication-plugin=mysql_native_password'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--max-allowed-packet=1073741824'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--sort-buffer-size=512K'</span><span class="pi">,</span>
        <span class="s1">'</span><span class="s">--max-connections=4096'</span>
      <span class="pi">]</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./mysql-data:/var/lib/mysql</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">MYSQL_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Q39sTi0i^9'</span>

  <span class="na">redis</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">registry.baidubce.com/aisuda/redis:5</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">redis-server'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">--appendonly'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">yes'</span><span class="pi">]</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./redis-data:/data</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>建议修改其中的 <code>MYSQL_ROOT_PASSWORD</code>、<code>ISUDA_ENCRYPT_KEY</code>。</p>
</div>
<div class="paragraph">
<p>创建完文件后使用 <code>docker-compose up</code> 命令来启动，如下：
image::私有部署/docker/123591119-29fd0b80-d81e-11eb-9bed-3685201795ed.png[]</p>
</div>
<div class="paragraph">
<p>然后通过 <code>docker ps</code> 查看 mysql 所在的容器 id，使用
<code>docker exec -it xxx</code> 进入 MySQL 容器。
image::私有部署/docker/123592056-56fdee00-d81f-11eb-899e-d40adf455512.png[]</p>
</div>
<div class="paragraph">
<p>进入 MySQL 容器后使用 <code>mysql -uroot -p&#8217;Q39sTi0i^9'</code> 命令访问
MySQL，注意密码改成对应的。
image::私有部署/docker/123610963-af3eeb00-d833-11eb-98a5-96886f39b6c6.png[]</p>
</div>
<div class="paragraph">
<p>然后使用
<code>CREATE DATABASE aisuda CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</code>
命令来创建数据库。
image::私有部署/docker/123592788-4732d980-d820-11eb-9165-3789fef4e0b6.png[]</p>
</div>
<div class="paragraph">
<p>通过`show databases`可以查看当前的数据库。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/私有部署/docker/123593818-8ca3d680-d821-11eb-923c-389c64055882.png" alt="123593818 8ca3d680 d821 11eb 923c 389c64055882">
</div>
</div>
<div class="paragraph">
<p>接着访问 <a href="http://localhost:8090/" class="bare">http://localhost:8090/</a> 就可以看到安装界面，按照引导执行。
image::私有部署/docker/123610212-f9739c80-d832-11eb-9172-8e34bc04e095.png[]
image::私有部署/docker/123610273-055f5e80-d833-11eb-84c5-1ffdc344f24b.png[]
image::私有部署/docker/123610285-08f2e580-d833-11eb-9572-015c5efb4028.png[]
image::私有部署/docker/123610342-14dea780-d833-11eb-833b-7ef6b40451f1.png[]</p>
</div>
<div class="paragraph">
<p>如果确认没问题，可以用 ctrl+c 关闭，然后使用 <code>docker-compose up -d</code>
来后台持续运行。
image::私有部署/docker/123611230-f88f3a80-d833-11eb-9e81-8df13c8be687.png[]</p>
</div>
</div>
<div class="sect2">
<h3 id="_试用_license">试用 license</h3>
<div class="paragraph">
<p>可以试用到 10 月 9 日的 license。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>N59dBig9FdhNrfVjbLem9yCW2VwJ1ls27NFMu0YX/ziZjd+kXYld9lmS+iQp6CCQitqNsN1Rbd7+nKLU0fCIq5w28cRzbUQERMOY1TZ/9kr4w05DCZHHcSxJT38rDvsYMx6FPqsPBi8L64PJ8Giz9D0z+wegWNtC4wqX7dssD3rCs8Hsj4nD+eUhnU9smiJoxZnGi8N+RceBiRRjG9ya5Kj1avyp8q9lu+bdPVa0AyaAOPki/idp18C3c5oTN6Ht</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_如何在无网环境安装">如何在无网环境安装？</h3>
<div class="paragraph">
<p>首先是 Docker，Windows 和 Mac 可以通过上面的安装包离线安装，而 Linux
需要https://docs.docker.com/engine/install/binaries/#install-daemon-and-client-binaries-on-linux[参考这里]下载二进制文件来安装。</p>
</div>
<div class="paragraph">
<p>其次是
Docker-Compose，参考https://docs.docker.com/compose/install/[文档]，主要是在有网环境下，在https://github.com/docker/compose/releases[这里]下载对应环境的二进制文件。</p>
</div>
<div class="paragraph">
<p>接下来需要将镜像也保存为文件，方法是找一台能联网且有 Docker
的机器，运行如下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker pull registry.baidubce.com/aisuda/aisuda:1.1.17
docker save <span class="nt">-o</span> suda.tar registry.baidubce.com/aisuda/aisuda:1.1.17
docker save <span class="nt">-o</span> mysql.tar registry.baidubce.com/aisuda/mysql:8
docker save <span class="nt">-o</span> redis.tar registry.baidubce.com/aisuda/redis:5</code></pre>
</div>
</div>
<div class="paragraph">
<p>将这三个文件上传到需要安装的服务器上，执行如下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker load <span class="nt">-i</span> suda.tar
docker load <span class="nt">-i</span> mysql.tar
docker load <span class="nt">-i</span> redis.tar</code></pre>
</div>
</div>
<div class="paragraph">
<p>同样通过类似的 docker load -i amis.tar 命令来加载。</p>
</div>
<div class="paragraph">
<p>amis 镜像内部端口是 8888。</p>
</div>
</div>
<div class="sect2">
<h3 id="_分布式版本">分布式版本</h3>
<div class="paragraph">
<p>爱速搭支持多实例部署，目前不限制实例数量，需要先装好 mysql 和
redis，然后通过环境变量连到远程的 mysql/redis 节点。</p>
</div>
</div>
<div class="sect2">
<h3 id="_无_docker_环境下的安装">无 Docker 环境下的安装</h3>
<div class="paragraph">
<p>参考<a href="私有部署安装-非Docker.md">这里</a>。</p>
</div>
<div class="sect3">
<h4 id="_后续版本升级">后续版本升级</h4>
<div class="paragraph">
<p>如果有版本升级，需要先停服务，运行
<code>./node_modules/.bin/pm2 kill</code>，然后清空目录，复制新的爱速搭版本。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_快速入门">快速入门</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_使用流程">使用流程</h3>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/快速入门流程/image_4a2a2dc.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>整体流程分为 5 步：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>创建应用。</p>
</li>
<li>
<p>设计数据模型，配置模型字段及关联关系，也可以连接到外部已有数据库。</p>
</li>
<li>
<p>可视化搭建页面。</p>
</li>
<li>
<p>对角色成员进行管理，并设置页面的访问权限。</p>
</li>
<li>
<p>发布应用，支持多种环境，具有版本控制能力。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_创建应用">创建应用</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在导航栏中点击<strong>应用</strong>进入应用管理页面，点击其中的<strong>新增应用</strong>按钮。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建应用/create-app.png" alt="image">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>填写应用基本信息后，点击<strong>确认</strong>。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建应用/create-app-name.png" alt="image">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>创建应用完成后，点击<strong>开发</strong>，进入应用开发环境。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建应用/app-dev.png" alt="image">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_连接数据源">连接数据源</h3>
<div class="paragraph">
<p>点击左侧的「数据源」可以对数据源进行编辑。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/连接数据源/datasource.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>这里数据源就是指数据库，可以连接外部数据库，或者使用爱速搭内置的数据库。</p>
</div>
<div class="paragraph">
<p>点击「新增数据源」来连接新的数据源。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/连接数据源/ds-type.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>首先要选择同步模式，爱速搭支持三种同步模式，它们之间的区别是对表结构的变更操作：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>自动同步</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在爱速搭中对表结构进行变更时，爱速搭自动执行变更 SQL
语句，因此需要对应的帐号有 DDL 权限。</p>
</li>
</ol>
</div>
</li>
<li>
<p>手动同步</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在爱速搭中对表结构进行变更时，爱速搭生成对应的 SQL
语句，需要手动执行这个 SQL 变更，适用于没有 DDL 权限的帐号。</p>
</li>
</ol>
</div>
</li>
<li>
<p>不同步</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在爱速搭中不对表结构变更，需要在外部对表结构进行变更。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>接下来数据源的帐号设置，具体取决于前面所选的同步模式类型，下图是手动同步模式的设置。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/连接数据源/ds-config.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>因为爱速搭支持多环境，如果要实现多个环境间的数据隔离，最好每个环境一个单独的数据库，这样相互操作不会影响。</p>
</div>
<div class="paragraph">
<p>如果是不同步模式，则需要进行模型映射，将数据库中的表映射为爱速搭的模型。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/连接数据源/ds-mapping.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_创建数据模型">创建数据模型</h3>
<div class="paragraph">
<p>数据模型指的是数据库中的「表」，因此在创建数据模型前需要先<a href="连接数据源.md">连接数据源</a>。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>进入应用后，点击左侧<strong>【数据模型】</strong>，进入<strong>【列表模式】</strong>，点击页面右侧<strong>【新建模型】</strong>。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建数据模型/create-model.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>创建之后在页面列表中就能看到新建的数据模型。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建数据模型/create-model-list.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>点击模型名称或右侧的「模型设计」进入模型设计</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建数据模型/model-design.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>点击「字段集合」进入字段编辑页面，这里的字段就对应着表中的字段。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/创建数据模型/add-field.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_首页设计">首页设计</h3>
<div class="paragraph">
<p>进入应用后，默认进入应用首页，应用首页是一个富文本页面类型，您可以对首页进行自定义设计。首页不在页面管理的页面列表中展示，可点击右上角编辑图标快速进入页面编辑环境。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/页面设计/app-home.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>点击左侧导航中的<strong>页面管理</strong>，进入页面管理页面。点击<strong>新建页面</strong>快速新建页面。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/页面设计/page-create.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>根据您的需求，在<strong>创建页面</strong>弹框中完善页面创建信息，然后点击<strong>确认</strong>，完成页面创建。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/页面设计/page-type.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>填写项</p>
</div>
<div class="paragraph">
<p>说明</p>
</div>
<div class="paragraph">
<p>页面类型</p>
</div>
<div class="paragraph">
<p>需要创建的页面类型： • 组件搭建页面：使用amis 灵活搭建各种类型的页面。 •
模型页面：基于数据模型快速搭建页面。 • Markdown页面：展示 Markdown
的页面。 • 富文本页面：展示富文本的页面。 •
文件夹页面：文件夹页面不支持页面编辑，在页面层级中起占位作用，不存在实际的页面，但是在页面结构中会显示。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>外部链接：点击跳转到外部地址。</p>
</li>
<li>
<p>嵌入外部页面：通过嵌入的方式集成其它页面。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>数据源</p>
</div>
<div class="paragraph">
<p>当选择模型页面时出现，选中模型的数据源，默认选择系统数据源，如果已接入外部数据源，可选择相应的数据源。</p>
</div>
<div class="paragraph">
<p>关联模型</p>
</div>
<div class="paragraph">
<p>当选择模型页面时出现，选中具体需要绑定的模型。</p>
</div>
<div class="paragraph">
<p>页面模板</p>
</div>
<div class="paragraph">
<p>当选择模型页面时出现，需要创建的页面模板。</p>
</div>
<div class="paragraph">
<p>标题</p>
</div>
<div class="paragraph">
<p>页面标题。</p>
</div>
<div class="paragraph">
<p>描述</p>
</div>
<div class="paragraph">
<p>页面的描述。</p>
</div>
<div class="paragraph">
<p>菜单名称</p>
</div>
<div class="paragraph">
<p>显示在左侧导航栏中的名称。</p>
</div>
<div class="paragraph">
<p>菜单图标</p>
</div>
<div class="paragraph">
<p>显示在左侧导航栏中的图标。</p>
</div>
<div class="paragraph">
<p>访问地址</p>
</div>
<div class="paragraph">
<p>页面访问地址，留空自动创建。</p>
</div>
<div class="paragraph">
<p>导航中显示</p>
</div>
<div class="paragraph">
<p>默认是否显示在左侧导航栏中。</p>
</div>
<div class="paragraph">
<p>父级页面</p>
</div>
<div class="paragraph">
<p>页面可嵌套布局，指定父级页面。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>新建的页面会在页面管理中展示，也会展示在页面导航区域。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/页面设计/page-created.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>点击页面标题旁边的图标来进入页面可视化设计。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/页面设计/page-edit.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_发布应用">发布应用</h3>
<div class="paragraph">
<p>完成页面设计和应用权限配置后，可以在<strong>发布管理</strong>中进行应用发布和版本管理。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>编辑完成的应用可以通过<strong>发布应用</strong>进行发布。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/发布应用/create-release.png" alt="image">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>应用发布时可以配置环境、权限等，支持线上版本、沙盒版本及测试版本，并可以轻松实现版本控制。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/发布应用/release.png" alt="image">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>平台支持版本回滚，只需选择要回滚的版本和发布环境重新发布。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/发布应用/74d563fe95f0935ae13f143d904b0c60.png" alt="image">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>版本详情中可以查看本次版本的基本信息和变更日志。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/发布应用/64094bad7b40d184e27a1e7a249433a2.png" alt="image">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>应用发布后如需分享给用户访问，可使用系统自动生成的访问地址。</p>
<div class="ulist">
<ul>
<li>
<p>在访问状态下点击右上角分享图标获得生成分享链接。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/发布应用/image_0cd40e4.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>也可以通过点击版本操作栏<strong>访问</strong>获得在浏览器里的地址，将地址分享给用户。</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/发布应用/image_3b19f2a.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_权限管理">权限管理</h3>
<div class="paragraph">
<p>完成页面设计后，可在<strong>权限管理</strong>中配置更细粒度的权限。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>进入<strong>权限管理</strong>，设置应用权限。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/权限管理/image_cf2096b.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>进如<strong>资源默认权限</strong>设置应用内页面和数据模型等资源的默认权限，默认权限指的是新创建一个资源时的权限，比如新创建了一个页面普通用户是否可以查看。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/权限管理/image_3e99cc4.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><strong>资源权限</strong>可以对每个细粒度资源进行权限控制。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/快速入门/权限管理/image_45b9aa3.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>完成各项配置后，点击页面下方<strong>保存</strong>，保存修改的配置。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_组织管理">组织管理</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_应用管理">应用管理</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>点击导航中的【应用】，进入应用管理页面。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/应用管理/image_514c3df.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>应用管理页面支持通过新创建的方式新建应用。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/应用管理/image_df361a3.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>或通过导入应用包完成新建，原应用包内的模型、页面等资源都会保留。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/应用管理/image_749e1c8.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>每个应用都可以直接进入编辑环境或进入应用设置，也可以便捷进行删除操作。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/应用管理/image_a431df0.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_角色管理">角色管理</h3>
<div class="paragraph">
<p>在组织的「角色」页面可以对组织中的所有角色进行管理，也可以创建全局角色。</p>
</div>
<div class="sect3">
<h4 id="_管理角色">管理角色</h4>
<div class="paragraph">
<p>默认有「所有用户」、「组织管理员」和「开发人员」三种全局角色，其中「所有用户」是一种特殊角色，所有组织内的用户都会属于这个角色。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/角色管理/image_1c9f195.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_新增角色">新增角色</h4>
<div class="paragraph">
<p>全局角色会在所有应用中可见，可以根据需要添加新的全局角色。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/角色管理/image_bd48b71.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_成员管理">成员管理</h4>
<div class="paragraph">
<p>可以为角色新增成员、部门或关联其他角色，但新增和关联的对象只能是系统已有的人员、部门和角色。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/角色管理/image_b5dbf55.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>关联成员</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/角色管理/image_36f0b3f.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>关联部门</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/角色管理/image_ed3a8a9.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>关联角色</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/角色管理/image_6fd7b73.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>角色本身不具备权限，作为标签，关联成员。在权限管理过程中，可以通过将权限和角色相关联来快速实现对成员的权限管理。</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_基本信息管理">基本信息管理</h3>
<div class="paragraph">
<p><strong>设置</strong>可以对组织基本信息和默认设置进行修改和维护，包括基本配置、部门设置、应用权限设置、部门权限设置、角色权限设置。</p>
</div>
<div class="sect3">
<h4 id="_基本信息">基本信息</h4>
<div class="paragraph">
<p>组织设置默认展示在创建组织时填写的信息，设置中可以添加组织标语并修改已有设置。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/基本信息管理/0544a43821fc71d34677bcc294883b11.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_部门设置">部门设置</h4>
<div class="paragraph">
<p>部门设置可设置组织最高层级数，默认为
10，也可设置经理创建子部门的权限，默认为开。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/基本信息管理/42a8bda0cabc71ec82938821de7ada0d.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_应用权限设置">应用权限设置</h4>
<div class="paragraph">
<p>配置应用操作权限和访问权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/基本信息管理/image_73fbea8.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_部门权限设置">部门权限设置</h4>
<div class="paragraph">
<p>配置部门操作权限，默认为超级管理员具有操作权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/基本信息管理/60ad976a57f8c3f1e16b6e9faaefaf2a.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_角色权限设置">角色权限设置</h4>
<div class="paragraph">
<p>配置角色操作权限，默认为超级管理员具有操作权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/基本信息管理/3aec3a2a1c1dbe0b6ed6e3e28c1fe6f2.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_流程权限">流程权限</h4>
<div class="paragraph">
<p>配置流程操作的权限，如查看系统内所有的流程、修改系统的任意流程的状态等。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/基本信息管理/0bec1efa26dfb825234f99371ab07ab8.png" alt="image">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_组织架构及成员管理">组织架构及成员管理</h3>
<div class="paragraph">
<p>组织架构可以管理组织内的人员和部门信息，协助整体的项目管理工作</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/组织架构及成员管理/image_4a9181e.png" alt="image.png">
</div>
</div>
<div class="sect3">
<h4 id="_部门管理">部门管理</h4>
<div class="paragraph">
<p>系统默认生成一个以组织名命名的部门，支持名称修改和下级部门增加。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/组织架构及成员管理/image_aae81d2.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>所需支持的架构层级可以在组织设置中配置，默认最多支持 10 级。</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_调整部门">调整部门</h4>
<div class="paragraph">
<p>组织创建人默认为所有部门的『经理』，『经理』是部门的负责人，具有修改部门员工信息的权限。如果员工的部门信息需要变更，可以通过【调整部门】修改其部门信息。层级编辑后需要刷新页面，员工的所属部门信息才会更新。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/组织架构及成员管理/image_bbdcc09.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_新增成员">新增成员</h4>
<div class="paragraph">
<p>可以通过邮箱快速添加多个新成员（支持批量增加，一行填写一个邮箱），并为成员指定部门。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/组织管理/组织架构及成员管理/cb399efe526a7a7a63950c2cfeda5019.png" alt="image">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_数据模型">数据模型</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_数据信息设置">数据信息设置</h3>
<div class="paragraph">
<p>模型编辑主要由 6
个模块构成：基本设置、字段集合、流程设计、验证器设置、索引设置、权限设置。本节主要对基本设置部分进行介绍，其他部分在后续都有详细的介绍。</p>
</div>
<div class="paragraph">
<p>下面是模型相关的一些基本设置。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/1_acc10b9.png" alt="1.png">
</div>
</div>
<div class="sect3">
<h4 id="_模型名称">模型名称</h4>
<div class="paragraph">
<p>为创建时设置的模型名称，不可修改。</p>
</div>
</div>
<div class="sect3">
<h4 id="_描述">描述</h4>
<div class="paragraph">
<p>模型的描述信息。</p>
</div>
</div>
<div class="sect3">
<h4 id="_标题字段">标题字段</h4>
<div class="paragraph">
<p>当模型添加关系后，编辑界面中需要勾选互相有关系的模型时，会显示设置的该字段，否则默认就显示
id。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/2_38da3ac.png" alt="2.png">
</div>
</div>
<div class="paragraph">
<p>例如下图中，我们给【歌手】添加了一对多关系，目标模型为【专辑】</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/3_f957a72.png" alt="3.png">
</div>
</div>
<div class="paragraph">
<p>然后我们给添加两个歌手数据：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/4_6a4309a.png" alt="4.png">
</div>
</div>
<div class="paragraph">
<p>然后我们来到【专辑】数据管理界面，点击新增，我们发现选择歌手显示的数据
id，不方便用户选择</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/5_b291f3e.png" alt="5.png">
</div>
</div>
<div class="paragraph">
<p>来到【歌手】模型编辑界面，调整【歌手】的模型标题字段为`姓名`：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/6_93e772c.png" alt="6.png">
</div>
</div>
<div class="paragraph">
<p>然后再回到【专辑】数据管理界面，点击新增，我们发现选择歌手显示的数据为姓名了：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/image_dc9d310.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_软删除">软删除</h4>
<div class="paragraph">
<p>当前模型是否开启软删除功能。</p>
</div>
<div class="paragraph">
<p>开启软删除后，会自动给当前模型添加`删除时间`字段，删除数据时并不会真正删除掉，而是会记录当前时间到`删除时间`字段，查询数据时，隐藏有`删除时间`的数据。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/8_fe43e65.png" alt="8.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="ulist">
<ul>
<li>
<p>建议开启，方便数据恢复。**</p>
</li>
</ul>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_树形结构">树形结构</h4>
<div class="paragraph">
<p>近期即将支持，敬请期待。</p>
</div>
</div>
<div class="sect3">
<h4 id="_记录时间">记录时间</h4>
<div class="paragraph">
<p>当前模型是否开启记录时间功能。</p>
</div>
<div class="paragraph">
<p>开启记录时间后，会自动给当前模型添加`创建时间`和`更新时间`字段。新增和修改数据时会记录当前时间到`创建时间`和`更新时间`字段。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/10_3253929.png" alt="10.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_记录操作人">记录操作人</h4>
<div class="paragraph">
<p>当前模型是否开启记录操作人功能。</p>
</div>
<div class="paragraph">
<p>开启记录操作人后，会自动给当前模型添加`创建人`、<code>更新人`和`删除人`字段。新增、修改和删除时，会记录当前操作人到`创建人</code>、`更新人`和`删除人`字段。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型基本设置/11_cb72ea7.png" alt="11.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_手动排序">手动排序</h4>
<div class="paragraph">
<p>近期即将支持，敬请期待。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_模型字段">模型字段</h3>
<div class="paragraph">
<p>字段集合可以新增字段和关系。字段和数据库的表的字段类似，具备属性；关系是表与表之间的关联，和
E-R 图中表之间的关系类似。</p>
</div>
<div class="sect3">
<h4 id="_添加字段">添加字段</h4>
<div class="paragraph">
<p>模型字段共分为两大类，基础字段类型和高级字段类型。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_59c35a3.png" alt="image.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_a6894dc.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>基础字段：文本、多行文本、整数、浮点数、日期、日期范围、枚举、布尔（开关）、JSON</p>
</li>
<li>
<p>高级字段：流水号、附件、图片、地址、位置、密码、密文、金额、人员信息、拥有者、所属部门、公式</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在模型图的底部，点击添加即可显示选择字段类型抽屉。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_e8ebdcb.png" alt="image.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_435787f.png" alt="image.png">
</div>
</div>
<div class="sect4">
<h5 id="_公共属性">公共属性</h5>
<div class="ulist">
<ul>
<li>
<p><strong>字段名</strong>：模型的字段名，支持中文与英文；</p>
</li>
<li>
<p><strong>描述</strong>：描述当前字段作用，一般会在对应表单项下展示；</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/1_a80bc88.png" alt="1.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/2_3cf562d.png" alt="2.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>允许多选</strong>：部分字段不支持该属性，配置字段是否支持以多选模式进行选值</p>
</li>
<li>
<p><strong>允许空值</strong>：配置字段是否可以为空</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_文本">文本</h5>
<div class="paragraph">
<p>用来存储小段文本信息，比如：名称、邮箱、网址、身份证号等等。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_dd1cdfc.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>格式</strong>：表单项和静态展示中，该字段的输出格式</p>
</li>
<li>
<p><strong>长度</strong>：该字段可存的最大长度</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_多行文本">多行文本</h5>
<div class="paragraph">
<p>用来存储大片文本信息，长度不限，可以用来存储文章内容。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_68f3dd0.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>文字识别</strong>：该字段输入时是否支持图片识别文字</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_整数">整数</h5>
<div class="paragraph">
<p>用来存储整型数据，比如：年龄、长度、距离等等。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_d52b35d.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>存储类型</strong>：字段存储类型，请根据需求选择</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_浮点数">浮点数</h5>
<div class="paragraph">
<p>用来存储带小数点的数字，比如：经度、纬度等等。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_5a20c94.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>存储类型</strong>：字段存储类型，请根据需求选择</p>
</li>
<li>
<p><strong>精度</strong>：精度是指整个数字里全部位的数目，也就是小数点两边的位数目。显式指定类型精度时的最大允许精度为
<code>1000</code></p>
</li>
<li>
<p><strong>比例</strong>：比例是指小数点后数字的位数</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_日期">日期</h5>
<div class="paragraph">
<p>用来存储日期格式，包含：日期时间、日期、时间和时间戳格式。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_2acfcf9.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>存储类型</strong>：字段存储类型，请根据需求选择</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_日期范围">日期范围</h5>
<div class="paragraph">
<p>用来存储日期范围格式。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_a06a0e5.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>存储类型</strong>：字段存储类型，请根据需求选择</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_枚举">枚举</h5>
<div class="paragraph">
<p>用来存储固定的某几个值，常用来存储状态。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/9_4a48cb1.png" alt="9.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>选项集合</strong>：配置枚举的选项组；</p>
</li>
<li>
<p><strong>选项键值分离</strong>：选项组内单个选项是否是键值对分离的格式</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_布尔开关">布尔（开关）</h5>
<div class="paragraph">
<p>用来存储是与否。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/image_3d39e4a.png" alt="image.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_json">JSON</h5>
<div class="paragraph">
<p>用来存储复杂数据，对象、数组、字符、数字等都能支持。但是不可以用于检索和排序。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/12_606f645.png" alt="12.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_流水号">流水号</h5>
<div class="paragraph">
<p>系统自动生成字段，根据预设规则生成流水号信息。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/13_fc89655.png" alt="13.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>前置字符</strong>：生成流水号中的前置字符；</p>
</li>
<li>
<p><strong>日期格式</strong>：流水号中日期的格式；</p>
</li>
<li>
<p><strong>自增序号位数</strong>：自增序号的数字位数</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_附件">附件</h5>
<div class="paragraph">
<p>用来存储文件，一般用于用户上传。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/14_ab8a251.png" alt="14.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>允许的格式</strong>：填写限制上传的文件格式，为文件后缀名，例如：<code>.mp3</code>。配置多个可以用逗号分隔，例如：<code>.mp3,.mp4</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_图片">图片</h5>
<div class="paragraph">
<p>用来存储图片，一般用于用户图片上传。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/15_44cc760.png" alt="15.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>允许图片类型</strong>：勾选允许的图片类型；</p>
</li>
<li>
<p><strong>限制图片比率</strong>：配置是否限制图片比率</p>
</li>
<li>
<p><strong>图像安全审核</strong>：是否开启图片安全审核功能，由百度 AI
自动完成内容审核，包含：色情识别、暴恐识别、政治敏感人物识别、广告识别、图像垃圾文本识别（反作弊）、恶心图像识别等功能</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_地址">地址</h5>
<div class="paragraph">
<p>用来存储地址，包含省份、城市、地区街道信息。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/16_a1dc314.png" alt="16.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>记录城市</strong>：是否记录城市名</p>
</li>
<li>
<p><strong>记录地区</strong>：是否记录地区名</p>
</li>
<li>
<p><strong>记录街道</strong>：是否记录街道名</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_位置">位置</h5>
<div class="paragraph">
<p>用来存储地理位置，包含经纬度信息。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/17_5f1e65f.png" alt="17.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>记录城市：是否记录城市；</p>
</li>
<li>
<p>采用 geometry：尚未支持，敬请期待；</p>
</li>
<li>
<p>地图类型：选择地图插件类型，目前只支持百度地图</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_密码">密码</h5>
<div class="paragraph">
<p>用来存储密文，只能用于结果比对，不可反解。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/262089c7efb6c3cdd9398f34c19698fc_262089c.png" alt="262089c7efb6c3cdd9398f34c19698fc.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>加盐</strong>：密码加盐。在密码学中，是指通过在密码任意固定位置插入特定的字符串，让散列后的结果和使用原始密码的散列结果不相符，这种过程称之为``加盐''。</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_密文">密文</h5>
<div class="paragraph">
<p>用来存储加密文本，可反解。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/20_3dc7764.png" alt="20.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>密钥</strong>：数据存储使用 aes-256-cbc 加密算法；64
位密钥基于输入的文本，使用 SHA-256 算法生成，用于内容的加密和解码。</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_金额">金额</h5>
<div class="paragraph">
<p>用来存储金额类型字段，单位为`分`</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/21_c01105a.png" alt="21.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>币种</strong>：选择币种</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_人员信息">人员信息</h5>
<div class="paragraph">
<p>可用来存储人员信息，与平台用户信息关联。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/22_9b5acc9.png" alt="22.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>允许输入</strong>：配置是否允许输入，如果不允许则意味着会自动设置当前操作人。</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_拥有者">拥有者</h5>
<div class="paragraph">
<p>用来存储数据所属人员信息，可用于权限设置。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/23_6600627.png" alt="23.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>允许输入</strong>：配置是否允许输入，如果不允许则意味着会自动设置当前操作人。</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_所属部门">所属部门</h5>
<div class="paragraph">
<p>用来存储数据所属部门信息，可用于权限设置。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/24_dd55f75.png" alt="24.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_公式">公式</h5>
<div class="paragraph">
<p>不存储数据，根据公式自动计算结果</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/25_f1fda33.png" alt="25.png">
</div>
</div>
<div class="paragraph">
<p>公式编辑：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/452cb38ef83d2a6d5c8f14bcefc485b6_452cb38.png" alt="452cb38ef83d2a6d5c8f14bcefc485b6.png">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_编辑字段">编辑字段</h4>
<div class="paragraph">
<p>可以在模型图中的字段右侧，鼠标悬浮在字段上，可以点击``铅笔''符号编辑字段属性。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/26_f7f8b1d.png" alt="26.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_删除字段">删除字段</h4>
<div class="paragraph">
<p>可以在模型图中的字段右侧，鼠标悬浮在字段上，可以点击``减号''符号删除字段。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/27_f2c23f3.png" alt="27.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_添加关系">添加关系</h4>
<div class="paragraph">
<p>可以给模型添加关系，从而关联其他模型，更加方便实现数据间的联通。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/28_dfa4a04.png" alt="28.png">
</div>
</div>
<div class="sect4">
<h5 id="_一对一">一对一</h5>
<div class="paragraph">
<p>首先我们准备两个模型，分别为：【歌手】和【歌手信息】</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/29_c74500a.png" alt="29.png">
</div>
</div>
<div class="paragraph">
<p>然后我们为【歌手】添加一对一关系，关联【歌手信息】</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/30_0ea006f.png" alt="30.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/8b8aa62cc4fd2ea433c0e92280ce4287_8b8aa62.png" alt="8b8aa62cc4fd2ea433c0e92280ce4287.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>目标模型</strong>：选择要关联的模型，这里我们选择【歌手信息】</p>
</li>
<li>
<p><strong>关联字段在对方</strong>：配置标记关联关系的字段是否在对方，这里我们暂时不开启</p>
</li>
<li>
<p><strong>允许空值</strong>：该关系字段是否可以为空</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>点击确认添加成功后，我们可以看到关系已经成功关联。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/32_7720646.png" alt="32.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>歌手信息_fk</code> 是 `歌手信息外键`的意思</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>这时候我们来到数据管理，点击新建歌手时，可以看到可以同步添加歌手信息了：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/33_d758ca8.png" alt="33.png">
</div>
</div>
<div class="paragraph">
<p>我们添加一条数据：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/34_6837ea8.png" alt="34.png">
</div>
</div>
<div class="paragraph">
<p>添加成功后，我们去看歌手信息数据管理页面，可以看到也同步添加了一条信息：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/35_af48c06.png" alt="35.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_多对一">多对一</h5>
<div class="paragraph">
<p>首先我们准备两个模型，分别是：【歌手】和【专辑】</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/36_6f7b2f5.png" alt="36.png">
</div>
</div>
<div class="paragraph">
<p>因为一个【歌手】可以对应多个专辑，因此我们在【专辑】上添加多对一关系：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/37_19f5a53.png" alt="37.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/38_e958984.png" alt="38.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>目标模型</strong>：选中需要关联的目标模型，这里我们选择【歌手】</p>
</li>
<li>
<p><strong>可否为空值</strong>：关系字段是否可以为空值；</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>确认后，添加成功</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/39_cfe9a46.png" alt="39.png">
</div>
</div>
<div class="paragraph">
<p>来到专辑的数据管理中，我们点击新增专辑，可以看到出现了勾选歌手的表单项：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/40_5f9b148.png" alt="40.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/41_77d81e6.png" alt="41.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_一对多">一对多</h5>
<div class="paragraph">
<p>同样因为一个歌手对应多个专辑，我们也可以给歌手模型上添加一对多关系：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/42_5b94dd3.png" alt="42.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/43_26749b4.png" alt="43.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>目标模型</strong>：选中需要关联的目标模型，这里我们选择【专辑】</p>
</li>
<li>
<p><strong>可否为空值</strong>：关系字段是否可以为空值；</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>确认后，添加成功</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/44_5b1d862.png" alt="44.png">
</div>
</div>
<div class="paragraph">
<p>这时我们来到【歌手】的数据管理页面，点击新增歌手，可以看到出现了可以新增【专辑】的表单项</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/45_5449e2d.png" alt="45.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_多对多">多对多</h5>
<div class="paragraph">
<p>因为一首【歌曲】有可能有多个【歌手】合作，而一名【歌手】也会有很多首【歌曲】作品，因此我们来添加一个多对多关系。</p>
</div>
<div class="paragraph">
<p>首先准备【歌手】和【歌曲】模型：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/46_5110ab4.png" alt="46.png">
</div>
</div>
<div class="paragraph">
<p>我们先选择在歌手上添加多对多关系</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/47_cccab0d.png" alt="47.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/48_8a425c0.png" alt="48.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>目标模型</strong>：选中需要关联的目标模型，这里我们选择【歌曲】</p>
</li>
<li>
<p><strong>可自定义属性</strong>：除了单纯的关系信息外，如果你想额外的保存一些其他信息比如，关系建立时间、是否为特殊关系等等，请勾选此选项,
平台将自动创建关系模型，在创建的关系模型中添加字段即可。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>确认后，添加成功</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/49_f034242.png" alt="49.png">
</div>
</div>
<div class="paragraph">
<p>然后我们来到歌手的数据管理界面，点击新增歌手，可以看到出现了勾选歌曲的表单项（需提前添加歌曲数据）：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/50_47cc826.png" alt="50.png">
</div>
</div>
<div class="paragraph">
<p>添加数据后，也可以查看关系数据：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/51_16758ba.png" alt="51.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/52_7b2d9c7.png" alt="52.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>自己来试一试为【歌曲】添加多对多关系吧</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_编辑关系">编辑关系</h4>
<div class="paragraph">
<p>可以在模型图中的关系右侧，鼠标悬浮在关系上，可以点击``铅笔''符号编辑关系属性。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/53_f7f8b1d.png" alt="53.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_删除关系">删除关系</h4>
<div class="paragraph">
<p>可以在模型图中的关系右侧，鼠标悬浮在关系上，可以点击``减号''符号删除关系。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型字段配置/54_56614e9.png" alt="54.png">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_验证器设置">验证器设置</h3>
<div class="paragraph">
<p>验证器设置支持基于平台已支持的规则类型建立验证规则。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型其他设置/image_c88908f.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_索引设置">索引设置</h3>
<div class="paragraph">
<p>索引设置支持选择模型中的字段建立索引。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型其他设置/image_34ac713.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_权限设置">权限设置</h3>
<div class="paragraph">
<p>权限设置主要实现数据相关的操作权限设置，默认无限制。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型其他设置/image_faa3e81.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>模型详情配置完成后要点击页面下方的【确定】按钮，才能对编辑内容进行保存。</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_数据管理">数据管理</h3>
<div class="paragraph">
<p>由于模型页面是由数据模型一键生成的，因此页面产生的数据也与数据模型直接关联。页面数据管理直接通过模型的数据管理操作完成。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>进入数据模型【列表模式】，点击数据模型操作栏【数据管理】，进入数据管理视图。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型数据管理/image_0878072.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>数据管理视图支持、新增、Excel 导入导出、数据清空操作。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型数据管理/image_5c2e8a0.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>平台上所有字段无法全不展现的列表，都支持表单展示字段的配置。数据列表也支持列展示规则配置。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型数据管理/image_f8c5a0d.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>以及操作栏的快捷操作入口。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/模型页面设计/模型数据管理/image_577d599.png" alt="image.png">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_页面管理">页面管理</h2>
<div class="sectionbody">
<div class="paragraph">
<p>爱速搭支持丰富的页面管理功能，支持页面便捷预览和编辑。平台支持 7
中页面类型：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>普通页面：支持自定义，拖拽组件完成配置，适合所有页面场景，同时支持https://cloud.baidu.com/doc/ISUDA/s/Ykj14w529[自定义组件]能力满足个性化需求</p>
</li>
<li>
<p>模型页面：数据模型一键生成，支持列表视图、新增视图、编辑石头、详情视图，每个页面可以单独配置，适合数据收集、数据展示等页面场景</p>
</li>
<li>
<p>富文本页面：内置富文本编辑，可快速编辑内容，适合内容展示页面</p>
</li>
<li>
<p>Markdown 页面：内置 Markdown 编辑器，可快速编辑内容，适合内容展示页面</p>
</li>
<li>
<p>文件夹页面：没有实际的页面内容，在页面结构树中起占位作用。</p>
</li>
<li>
<p>外部链接：通过外链的方式放在导航中，点击导航时会跳转到外部页面。</p>
</li>
<li>
<p>嵌入外部页面：通过 iframe
的方式将外部页面集成到平台中，点击导航时会直接显示这个外部页面，用于将之前页面集成进来。</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/页面管理/image_1a02c62.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>如果页面需要删除，不仅支持单个页面删除，也支持批量删除。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/页面管理/image_4254ebb.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>如果需要调整页面结构，可以直拖拽完成。首先鼠标悬浮在要移动的页面上，找到并长按位置拖拽
icon。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/页面管理/image_dce5bdd.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>然后进行操作确认，完成拖拽操作。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/页面管理/image_6b0bade.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>如果对包含子页面的页面进行结构调整，子页面也会一起被调整。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/页面管理/image_28497bd.png" alt="image.png">
</div>
</div>
<div class="sect2">
<h3 id="_页面类型说明">页面类型说明</h3>
<div class="paragraph">
<p>爱速搭平台支持五种页面类型，其中四种支持内容编辑。</p>
</div>
<div class="sect3">
<h4 id="_普通页面">普通页面</h4>
<div class="paragraph">
<p>普通页面为组件拖拽式搭建页面，通过拖拽所需的组件完成页面设计。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_df9645e.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>平台支持上百种组件类型，包括样式组件和模型组件。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_2858aa6.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>同时平台支持页面代码编辑，方便快速通过 json 配置实现页面设计。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_f0194de.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_模型页面">模型页面</h4>
<div class="paragraph">
<p>模型页面由模型一键生成。根据类型的不同，可编辑的视图不同，通过右侧的页面配置面板，可以实现各视图的详细配置。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>列表视图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>可配置列表视图的显示字段、字段位置、页面功能包括：查询条件、新增数据功能、修改数据功能、删除数据功能、查看详情功能及操作效果，以及批量操作、数据导入导出功能。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_989e183.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>以新增数据功能为例，支持的配置项有：按钮名称、展现模式、弹窗大小。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_76b7414.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>开启查询条件功能可在列表页新增条件查询模块，点击左侧<strong>条件查询</strong>区域，右侧展开条件配置面板。将字段拖拽到条件<strong>查询模块</strong>即可完成查询条件配置。同时平台支持组合条件查询，可实现两个以上条件组合结果进行查询。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_b40d106.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>详情视图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>因详情视图主要用于查看详情，因此配置项相对较少，页面默认包含数据模型其中的全部字段。首先是字段项的配置，可实现详情页面展示内容中包含哪些字段的配置。在某些场景下，一条数据包含较多的数据，但是查看时只需要关注其中的部分重要信息，就可以通过在详情视图中删除部分字段来实现。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_c1c8694.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>详情视图也支持字段级的信息配置。不同的字段类型支持不同的配置项。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_8ac283d.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>此外，也可以按需设置表单中字段的位置关系。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_da87700.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>视图编辑可进行字段信息配置、可进行字段位置调整是所有视图都有的能力</strong></p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>新增视图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>新增视图的主要功能是信息收集和提交，因此支持配置项也相对较少。<strong><em>列表页面的新增视图和模型页面的新增表单视图类似</em></strong>，只是在实际应用环境中展现效果不一样。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_ed144af.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>编辑视图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>编辑视图和新增视图类似，也是个表单页，也支持字段集合设置和字段信息配置。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_f77c31b.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p><em>需要注意的是，在进行任何页面修改操作后都需要点击右侧信息配置面板的保存图标，修改的配置项才会被暂时保存。</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_1de02a1.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p><em>最后，编辑完成后要离开页面时，请先点击页面右上方的【保存】按钮，才能完成页面配置信息的保存。</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_5c2bd32.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_富文本页面">富文本页面</h3>
<div class="paragraph">
<p>富文本页面类似一个富文本编辑器，可以编辑任意需要的内容，适合页面内容丰富的文本展示型页面。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_1c33b34.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Markdown 页面</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Markdown 页面类似一个 markdown
编辑器，可以编辑任意需要的内容，适合页面内容较多的文本型页面。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_ca3ac82.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_文件夹页面">文件夹页面</h3>
<div class="paragraph">
<p>文件夹页面没有实际页面内容，因此不支持页面内容编辑。</p>
</div>
</div>
<div class="sect2">
<h3 id="_移动端样式">移动端样式</h3>
<div class="paragraph">
<p>目前爱速搭平台搭建的页面自动适配移动端，模型页面自动适配，组件页面同时支持移动端上做样式修改。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>切换方式</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>点击编辑器环境顶栏的【手机】，切换到手机编辑模式。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_c4fba5c.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>预览方式</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>手机编辑模式下，点击顶栏【预览】进行效果预览。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面类型说明/image_ead195f.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_创建页面">创建页面</h3>
<div class="sect3">
<h4 id="_创建入口">创建入口</h4>
<div class="paragraph">
<p>【页面管理】中点击【新建页面】快速创建页面。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面创建说明/abb69c17b3676307b9125254ac8ac5a5.png" alt="image">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>页面类型</strong>：需要创建的页面类型：</p>
<div class="ulist">
<ul>
<li>
<p><code>普通页面</code>：无数据托管功能，以 <a href="https://github.com/baidu/amis">amis</a>
为核心进行组件搭建页面</p>
</li>
<li>
<p><code>模型页面</code>：绑定数据模型，具有托管数据功能的页面</p>
</li>
<li>
<p><code>Markdown页面</code>：展示 markdown 的页面</p>
</li>
<li>
<p><code>富文本页面</code>：展示富文本的页面</p>
</li>
<li>
<p><code>文件夹页面</code>：文件夹页面不支持页面编辑，在页面层级中起占位作用，不存在实际的页面，但是在页面结构中会显示</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_创建页面_2">创建页面</h4>
<div class="ulist">
<ul>
<li>
<p><strong>创建普通页面</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>页面类型选择【普通页面】，完善各项信息完成页面创建，页面各信息项详细说明见下方<a href="#页面信息说明">页面信息说明</a>。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面创建说明/image_b64a39f.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>创建模型页面</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面创建说明/image_9d142f9.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>创建富文本页面</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面创建说明/image_f21db77.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>创建 Markdown 页面</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面创建说明/image_4855d92.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p></p>
<div class="ulist">
<ul>
<li>
<p><strong>创建文件夹页面</strong></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/页面创建说明/image_c3f309d.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_页面信息说明">页面信息说明</h4>
<div class="ulist">
<ul>
<li>
<p><strong>数据源</strong>：当选择`模型页面`时出现，选中模型的数据源，默认选择系统数据源，如果已接入外部数据源，可选择相应的数据源</p>
</li>
<li>
<p><strong>关联模型</strong>：当选择`模型页面`时出现，选中具体需要绑定的模型</p>
</li>
<li>
<p><strong>页面模板</strong>：当选择`模型页面`时出现，需要创建的页面模板</p>
</li>
<li>
<p><strong>标题</strong>：页面标题</p>
</li>
<li>
<p><strong>描述</strong>：页面的描述</p>
</li>
<li>
<p><strong>菜单名称</strong>：显示在左侧导航栏中的名称</p>
</li>
<li>
<p><strong>菜单图标</strong>：显示在左侧导航栏中的图标</p>
</li>
<li>
<p><strong>访问地址</strong>：页面访问地址，留空自动创建</p>
</li>
<li>
<p><strong>导航中显示</strong>：默认是否显示在左侧导航栏中</p>
</li>
<li>
<p><strong>父级页面</strong>：页面可嵌套布局，指定父级页面</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>普通页面使用爱速搭开源的前端渲染器 <a href="https://github.com/baidu/amis">amis</a>
实现，因此具有 amis
所有的能力，相关文档：https://baidu.gitee.io/amis/docs/index</p>
</div>
<div class="paragraph">
<p>组件搭建页面由编辑区、全局工具、组件面板和配置面板和四部分组成。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_a5db94e.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_编辑区">编辑区</h3>
<div class="paragraph">
<p>页面蓝色区域，显示当前状态页面内容，分为边栏、工具栏和内容区。编辑区可以通过鼠标选中、大纲树节点选择或右键功能选择想要选中的区域并进行编辑。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_0ba8f60.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_全局工具">全局工具</h3>
<div class="paragraph">
<p>全局工具支持手机模式切换，支持预览、撤销、保存、推出等基本操作，也可以通过【页面配置】修改页面配置信息。【历史版本】支持查看编辑保存日志，并恢复已保存版本实现页面配置回滚。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_9603a33.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_组件面板">组件面板</h3>
<div class="paragraph">
<p>组件面板分为大纲、组件和代码三个模块。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_8410748.png" alt="image.png">
</div>
</div>
<div class="sect3">
<h4 id="_大纲">大纲</h4>
<div class="paragraph">
<p>可以通过大纲，选中不同层级的组件，从而进行组件属性的设置</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/f36b6196146e35af099bdcf095cd2edf.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_组件">组件</h4>
<div class="paragraph">
<p>展示组件的组件面板，可以从中选择要添加的组件拖拽到指定的区域中。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_1557190.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>通过编辑区的添加图标也可以唤起组件列表，这里会有对组件的简要介绍，并且包含平台的所有组件。部分新增的组件也会优先在这里展示。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_89cac54.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>如果需要的组件在组件面板中未找到，可以尝试在组件列表中进行检索，如仍未找到可以使用自定义组件功能（近期即将推出）或通过文档留言或工单进行反馈。</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_代码">代码</h4>
<div class="paragraph">
<p>也可以通过代码模式，直接对 amis 配置代码进行编辑，具体 amis
配置文档可看：https://baidu.gitee.io/amis/docs/index</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/普通页面说明/image_7424781.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_配置面板">配置面板</h3>
<div class="paragraph">
<p>主要实现组件属性的可视化配置，配置信息会随着组件的不同而变化。</p>
</div>
<div class="paragraph">
<p>以增删该查组件为例，需要配置的项包括：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>增删改查</strong></p>
<div class="ulist">
<ul>
<li>
<p>常规：基础功能配置，如查询条件、批量操作、单条操作、同步地址栏、默认参数、保留条目选择、指定主键等</p>
</li>
<li>
<p>接口：可配置数据拉取接口、快速保存接口、快速保存单条接口、默认消息提示等</p>
</li>
<li>
<p>外观：可配置内容展现方式、顶部工具栏配置、底部工具栏配置、快捷工具配置和
CSS 设置等</p>
</li>
<li>
<p>其他：页面基础设置配置，如数据源、页面信息字段等</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>表格</strong></p>
<div class="ulist">
<ul>
<li>
<p>常规：标题和表格列设置</p>
</li>
<li>
<p>外观：表格展现样式</p>
</li>
<li>
<p>其他：数据显隐配置</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_组件搭建流程">组件搭建流程</h3>
<div class="paragraph">
<p>通过组件搭建完成的页面主要包括两部分：添加组件和配置信息。</p>
</div>
<div class="sect3">
<h4 id="_添加组价">添加组价</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>新建一个普通页面，进入页面编辑环境。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_930b7bf.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>2、点击左侧【组件】打开组件面板。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_b7be220.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>选择一个增删改查组件，并拖拽到页面内容区域。在弹出的页面中配置数据信息：ID、渲染引擎、浏览器、平台、版本、级别。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_ddb468b.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>如果初始状态下未完成字段配置，可以通过点击大纲树中的组件【增删改查】然后右键打开快捷操作。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_c136624.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>说明：右键快捷操作在编辑器环境下都可以使用，选中的层级和组件不同，支持的操作项也有不同。</p>
</div>
</blockquote>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>配置字段后可以看到如下效果。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_8b796c4.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>然后为页面增加一些基础功能。打开查询条件，添加两个批量操作按钮。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_5f4329f.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>点击左侧编辑区的按钮，在右侧的配置面板中进行操作配置。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_6b22255.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>然后配置按钮的动作为``发送请求''，并且填入目标
API，并完善确认文案。类似的方法完成批量修改按钮的配置，平台支持 13
种动作类型，能满足主要按钮场景的需求。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_71975cb.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>下一步配置查询条件，选中查询表单组件，打开右侧配置面板。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_7971efc.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>完成字段配置和字段名绑定，配置筛选条件为：渲染引擎，字段名为 engine。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_d64e65c.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>在文本框配置中，打开 addOn，按钮类型改为【提交】。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_20bf270.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>删除 label 就可实现文本框名称显示。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_66a830d.png" alt="image.png">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p>然后保存，这个页面的配置过程就完成了。退出后可看到效果。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件搭建流程/image_f1d8d22.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>说明：上述示例中配置的接口是没有数据的，因此表中无数据信息。</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_编辑器说明">编辑器说明</h3>
<div class="ulist">
<ul>
<li>
<p><strong>多端编辑模式</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>页面编辑器默认打开 PC
页面编辑环境，如需配置手机端页面需要先切换到手机页面模式。点击顶部全局工具的【手机】即可进行切换，再次点击为返回
PC 模式。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/编辑器说明/image_369f994.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>编辑器支持的组件配置规则同 PC
页面编辑模式，配置完成后点击预览可以查看效果。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/编辑器说明/image_6dbb82d.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>页面回滚</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>点击全局工具中的【页面历史】可以查看页面历史保存记录，并支持状态回滚。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/编辑器说明/image_0c5de0d.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>页面配置</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>页面配置支持对页面创建时填写的配置信息进行修改。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/编辑器说明/image_d89ec90.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_组件说明">组件说明</h3>
<div class="paragraph">
<p>组件是爱速搭平台的核心能力之一，平台支持上百种组件，并实现了根据选中组件的不同进行分组展示，让组件选择和拖拽更加方便。详情请查看https://cloud.baidu.com/doc/ISUDA/s/akj8ot97t[组件文档]。</p>
</div>
<div class="paragraph">
<p>页面设计器默认展示的可选组件主要分为：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>模型组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>模型组件是组件化的数据模型，往页面中添加数据模型即完成了数据模型表单在页面中的嵌入，功能上保留了数据模型的主要特性如数据收集、提交、管理等。便捷完成组件的数据管理配置。</p>
</div>
<div class="paragraph">
<p>目前平台支持了模型列表组件和模型表单组件，分别对应数据模型的列表展示类型和表单提交类型。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件说明/image_07bf8ae.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>功能组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>功能组件主要用于实现一定的页面逻辑功能。如向导组件则可以配置 tab
切换样式的局部布局。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件说明/image_3441a46.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>容器组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>容器组件主要是在页面中添加一个容器，以进行局部页面更多的配置和设计。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件说明/image_e4293b3.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>按钮组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>顾名思义是按钮类的组件，可以配置一些按钮类型的事件和交互。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件说明/image_d17fd5f.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>其他组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>其他组件是指没有明确分类的组件，如提示组件，表格组件、分隔符组件等。以提示组件为例，可以配置特定触发条件下的提示效果。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件说明/image_a16efe7.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>展示组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>顾名思义是主要实现展示效果的组件，如日期展示、图片集、图表、JSON
展示等。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/页面设计/普通页面设计/组件说明/image_07beb9c.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="ulist">
<ul>
<li>
<p>部分组件未在上述图片中展示，更多组件样式请在组件列表中获取。如图表组件、轮播图等。</p>
</li>
<li>
<p>如需在某个组件内添加组件，可在编辑区选中目标组件，左侧组件面板会列出所有可选组件。</p>
</li>
</ul>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>除了使用爱速搭内置的组件以外，还可以通过创建自定义组价，扩充可使用的组件</p>
</div>
</div>
<div class="sect2">
<h3 id="_前提条件">前提条件</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>需要对 amis 整体概念有一定的了解，可以查看
<a href="https://baidu.gitee.io/amis/docs/concepts/schema">这里</a></p>
</li>
<li>
<p>需要有一定的 JavaScript 基础</p>
</li>
<li>
<p>至少能够熟练使用
<a href="https://reactjs.org/">React</a>、https://cn.vuejs.org/[Vue]、https://jquery.com/[jQuery]
中任意一门框架</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_基本流程">基本流程</h3>
<div class="paragraph">
<p>现在说明一下如何创建和使用一个自定义组件</p>
</div>
<div class="sect3">
<h4 id="_组件创建">组件创建</h4>
<div class="paragraph">
<p>进入自定义组件模块，点击左上角「新增组件」按钮，填写如下组件配置：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_884905e.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>组件名称：设置该自定义组件的名称</p>
</li>
<li>
<p>组件类型：选择新建组件的类型，主要有「展示类」、「普通表单项」、「选择器表单项」、「其他」4
类，后面文档会详细介绍</p>
</li>
<li>
<p>组件 key：在 amis schema 配置中的 type 值</p>
</li>
<li>
<p>框架：可选 React、Vue 和 jQuery 作为开发框架</p>
</li>
<li>
<p>是否启用：可以选择组件是否启用</p>
</li>
<li>
<p>说明：组件的说明，描述组件</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如上图填写完组件配置后，点击确认，进入组件编辑界面</p>
</div>
</div>
<div class="sect3">
<h4 id="_组件代码编辑">组件代码编辑</h4>
<div class="paragraph">
<p>自定义组件代码核心是用 <code>export default</code> 来导出编写好的自定义组件，如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">这是一个</span> <span class="nx">React</span> <span class="nx">自定义组件</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_调试">调试</h4>
<div class="paragraph">
<p>组件保存后会自动进入构建状态，调试按钮将禁用，当构建成功后，即可点击调试按钮，进行组件调试操作：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_5071c4e.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>调试面板左侧为组件渲染后效果，右侧为 amis schema，可以调整右侧
schema，动态调试组件效果。</p>
</div>
<div class="paragraph">
<p>例如我们修改代码如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_c83cbe2.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>我们获取 props 中的 tip 属性，然后我们在调试面板右侧，修改 amis
schema，添加 tip 属性，可以发现组件渲染出该文本</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>修改完代码后，需要保存并构建完成后，才可以看到最新的组件效果</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_组件使用">组件使用</h4>
<div class="paragraph">
<p>在 amis schema 中，可以通过 type
来使用自定义组件，例如上例中我们新建的组件 key 为
<code>custom-hello-wolrd</code>，且是普通展示类，则可以通过
<code>"type": "custom-hello-wolrd"</code> 使用该自定义组件</p>
</div>
<div class="paragraph">
<p>我们新建一个测试页面，并编辑页面 schema 如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"page"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-hello-world"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"是不是很棒！"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_996b3ed.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>可以看到上图中自定义组件已经可以正常使用了。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_添加_npm_依赖">添加 npm 依赖</h3>
<div class="paragraph">
<p>平台支持引入在线第三方 npm 库进行辅助开发</p>
</div>
<div class="paragraph">
<p>首先点击右上角依赖管理，搜索并添加最新版本的
day.js，该插件已内置安装，因此可以直接使用：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_e2070c7.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>我们使用展示类，并选中 React 作为开发框架，下面我们引用 day.js
并打印一下当前时间，代码如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">dayjs</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">dayjs</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">现在时间是</span><span class="err">：</span><span class="p">{</span><span class="nx">dayjs</span><span class="p">().</span><span class="nx">format</span><span class="p">(</span><span class="dl">'</span><span class="s1">YYYY-DD-MM HH:mm:ss</span><span class="dl">'</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_02959ca.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>内置已安装的插件，都可以直接使用</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_开发框架">开发框架</h3>
<div class="paragraph">
<p>平台支持 React、Vue、jQuery 作为组件的开发框架</p>
</div>
<div class="sect3">
<h4 id="_react推荐">React（推荐）</h4>
<div class="paragraph">
<p>平台以及 amis 本身是基于 React 开发的，因此使用 React
可以更好地整合开发组件</p>
</div>
<div class="sect4">
<h5 id="_导出组件类">导出组件类</h5>
<div class="paragraph">
<p>核心方式是通过 <code>export default</code> 来导出组件类，从而使组件生效</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">这是一个</span> <span class="nx">React</span> <span class="nx">自定义组件</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_使用_ui_组件库">使用 UI 组件库</h5>
<div class="paragraph">
<p>可以使用 npm UI 组件库，例如 <a href="https://ant.design/index-cn">Ant Design</a>。</p>
</div>
<div class="paragraph">
<p>首先依赖管理中添加 antd 组件库，然后选择展示类，和 React
作为开发框架，然后编写代码如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">Button</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">antd</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// 引用 antd 样式</span>
<span class="k">import</span> <span class="dl">'</span><span class="s1">antd/dist/antd.css</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Primary</span> <span class="nx">Button</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Button</span><span class="o">&gt;</span><span class="nx">Default</span> <span class="nx">Button</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">dashed</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Dashed</span> <span class="nx">Button</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Text</span> <span class="nx">Button</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">link</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Link</span> <span class="nx">Button</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_39bb2db.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>上例中我们展示了 antd 的 Button 组件</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vue">Vue</h4>
<div class="paragraph">
<p>我们下面开发一个简单的自定义组价，打印一行文本：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;div&gt;这是一个 {{name}} 自定义组件&lt;/div&gt;</span><span class="dl">'</span><span class="p">,</span>

  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vue</span><span class="dl">'</span>
  <span class="p">},</span>

  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_使用第三方_ui_组件库">使用第三方 UI 组件库</h5>
<div class="paragraph">
<p>可以使用第三方组件库，例如 <a href="https://element.eleme.io/#/zh-CN">Element-UI</a></p>
</div>
<div class="paragraph">
<p>首先依赖管理里添加 element-ui 组件库，然后新建组件，选择展示类组件，勾选
Vue 作为开发框架，代码如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="p">{</span><span class="nx">Button</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">element-ui</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// 引入 element-ui的样式</span>
<span class="k">import</span> <span class="dl">'</span><span class="s1">element-ui/lib/theme-chalk/index.css</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="p">{</span>
  <span class="nx">template</span> <span class="o">=</span> <span class="s2">`
        &lt;div&gt;
            &lt;el-button&gt;默认按钮&lt;/el-button&gt;
            &lt;el-button type="primary"&gt;主要按钮&lt;/el-button&gt;
            &lt;el-button type="success"&gt;成功按钮&lt;/el-button&gt;
            &lt;el-button type="info"&gt;信息按钮&lt;/el-button&gt;
            &lt;el-button type="warning"&gt;警告按钮&lt;/el-button&gt;
            &lt;el-button type="danger"&gt;危险按钮&lt;/el-button&gt;
        &lt;/div&gt;
    `</span><span class="p">;</span>

  <span class="nx">components</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">el-button</span><span class="dl">'</span><span class="p">:</span> <span class="nx">Button</span>
  <span class="p">};</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_831db4a.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jquery">jQuery</h4>
<div class="paragraph">
<p>平台内部支持用 jQuery
进行开发，且进行了一层简单的封装，方便用户更好的操作。下面我们创建一个简单的自定义组件，打印一行文本：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">$</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`这是个`</span><span class="p">,</span>

  <span class="cm">/**
   * 组件挂载的时候调用
   */</span>
  <span class="nx">onMount</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="cm">/**
   * amis props 更新的时候调用
   */</span>
  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">prevProps</span><span class="p">)</span> <span class="p">{},</span>

  <span class="cm">/**
   * 组件销货的时候调用
   */</span>
  <span class="nx">onUnmout</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{},</span>

  <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this.$root 获取当前顶级dom</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$root</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="dl">'</span><span class="s1"> jQuery 自定义组件</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_eeafa3c.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_获取_schema_配置的属性">获取 schema 配置的属性</h3>
<div class="paragraph">
<p>可以在 schema 中配置属性，然后在组件中获取，例如：</p>
</div>
<div class="sect3">
<h4 id="_react_中">React 中：</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">tip</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">tip</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">提示文本</span><span class="p">:</span> <span class="p">{</span><span class="nx">tip</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>使用组件时可以配置 schema 如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">组件的</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">值</span><span class="w">
  </span><span class="nl">"tip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"这是一段提示"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vue_中">Vue 中：</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;div&gt;提示文本：{{tip}}&lt;/div&gt;</span><span class="dl">'</span><span class="p">,</span>

  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">tip</span><span class="p">:</span> <span class="dl">''</span> <span class="c1">// 需要声明一个空的值，否则可能会报错</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>由于该
<a href="https://cn.vuejs.org/v2/guide/reactivity.html#%E5%A3%B0%E6%98%8E%E5%93%8D%E5%BA%94%E5%BC%8F-property">Vue
特性</a>，需要在使用前声明一个空的默认值</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_79ff88d.png" alt="image.png">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jquery_中">jQuery 中</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">$</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`提示文本：&lt;span id="tip"&gt;&lt;/span&gt;`</span><span class="p">,</span>

  <span class="nx">onMount</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#tip</span><span class="dl">'</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">tip</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#tip</span><span class="dl">'</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">tip</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_7f43ceb.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_暴露的变量和方法">暴露的变量和方法</h3>
<div class="sect3">
<h4 id="_render">render</h4>
<div class="paragraph">
<p>渲染器方法，可以在自定义组件中渲染已有的 amis 组件</p>
</div>
<div class="sect4">
<h5 id="_适用条件">适用条件</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：<code>React</code></p>
</li>
<li>
<p>组件类型：<code>展示类</code>、<code>表单项</code>、<code>选择器表单项</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_函数签名">函数签名</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">(</span><span class="nx">region</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">subProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">JSX</span><span class="p">.</span><span class="nx">Element</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>region</code>：给当前组件设置一个 key</p>
</li>
<li>
<p><code>node</code>：amis 组件的配置项</p>
</li>
<li>
<p><code>subProps</code>：可以不填，额外的一些配置项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_使用方法">使用方法</h5>
<div class="paragraph">
<p>React 中:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">render</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="nx">这是一个</span> <span class="nx">React</span> <span class="nx">自定义组件</span><span class="err">，</span>
        <span class="p">{</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">这是amis按钮</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">actionType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dialog</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">dialog</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">弹框</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">这是一个弹框</span><span class="dl">'</span>
          <span class="p">}</span>
        <span class="p">})}</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_f53edc9.png" alt="image.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_d525ba0.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_onaction">onAction</h4>
<div class="paragraph">
<p>调用 amis 内置的行为，可参考
<a href="https://baidu.gitee.io/amis/docs/components/action">行为</a></p>
</div>
<div class="sect4">
<h5 id="_适用条件_2">适用条件</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：展示类、表单项、选择器表单项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_函数签名_2">函数签名</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>event</code>：可忽略，传入 <code>null</code> 即可；</p>
</li>
<li>
<p><code>action</code>：传入需要执行的行为对象配置，参考
<a href="https://baidu.gitee.io/amis/docs/components/action">行为</a>；</p>
</li>
<li>
<p><code>ctx</code>：给当前行为内传入一些数据。如果没有则传入空对象`{}`，否则会报错</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_使用方法_2">使用方法</h5>
<div class="paragraph">
<p>我们来通过该方法实现：点击按钮，然后调起一个 amis 弹框。</p>
</div>
<div class="sect5">
<h6 id="_react_中_2">React 中</h6>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleClick</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">onAction</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onAction</span><span class="p">;</span>

    <span class="nx">onAction</span><span class="p">(</span>
      <span class="kc">null</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">actionType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dialog</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">dialog</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">弹框</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">这是一个amis弹框</span><span class="dl">'</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">调起</span> <span class="nx">amis</span> <span class="nx">弹框</span><span class="o">&lt;</span><span class="sr">/button&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_vue_中_2">Vue 中</h6>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;button v-on:click="handleClick"&gt;调起 amis 弹框&lt;/button&gt;</span><span class="dl">'</span><span class="p">,</span>

  <span class="na">data</span><span class="p">:</span> <span class="p">{},</span>

  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">handleClick</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">onAction</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="na">actionType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dialog</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">dialog</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">弹框</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">这是一个amis弹框</span><span class="dl">'</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{}</span>
      <span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_jquery_中_2">jQuery 中</h6>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">$</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;button id="btn"&gt;调起 amis 弹框&lt;/button&gt;`</span><span class="p">,</span>

  <span class="nx">onMount</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#btn</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">onAction</span><span class="p">(</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="na">actionType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dialog</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">dialog</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">弹框</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">这是一个amis弹框</span><span class="dl">'</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{}</span>
      <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_value_和_onchange">value 和 onChange</h4>
<div class="paragraph">
<p>当编写表单项类型的自定义组件时，最重要的是与 Form
数据域的通信，而实现该通信的核心就是 value 属性和 onChange 方法</p>
</div>
<div class="sect4">
<h5 id="_适用条件_3">适用条件</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：普通表单项、选择器表单项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_使用方法_3">使用方法</h5>
<div class="paragraph">
<p>核心思路是：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>拿到 props 中的 value 属性，并赋值给自定义组件内输入框</p>
</li>
<li>
<p>监听自定义组件内输入框 change 事件或 value 值变化，如果有变化，通过
onChange 事件，将新的 value 值同步给 amis 层</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>下面来演示不同框架下的使用示例：</p>
</div>
<div class="sect5">
<h6 id="_react_中_3">React 中</h6>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 监听 input 的 change 事件，并同步value值</span>
  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">onChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onChange</span><span class="p">;</span>
    <span class="c1">// 调用amis onChange方法，同步最新的value值</span>
    <span class="nx">onChange</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 获取 props 中的 value 属性，并赋值给input</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_36dda63.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>更改 input 值，可以观察表单数据域的变化。</p>
</div>
</div>
<div class="sect5">
<h6 id="_vue_中_3">Vue 中</h6>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="c1">// 获取 value 属性并绑定给 input 输入框</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;input type="text" v-model="value" /&gt;`</span><span class="p">,</span>

  <span class="na">watch</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">value</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 通过 $emit 调用 amis 的 onChange 事件，同步 value 值</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">onChange</span><span class="dl">'</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>vue 中可以利用 watch 监听器来实现 value 同步逻辑。</p>
</div>
<div class="paragraph">
<p>效果如下；</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_7423dd3.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>更改 input 值，可以观察表单数据域的变化。</p>
</div>
</div>
<div class="sect5">
<h6 id="_jquery_中_3">jQuery 中</h6>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">$</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;input type="text" id="input" /&gt;`</span><span class="p">,</span>

  <span class="nx">onMount</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 获取 props 中 value 属性</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#input</span><span class="dl">'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>

    <span class="c1">// 给输入框绑定 input 监听事件，同步 value 值</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#input</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 调用amis的 onChange 方法</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">onChange</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_c986339.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>更改 input 值，可以观察表单数据域的变化。</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_onbulkchange">onBulkChange</h4>
<div class="paragraph">
<p>该方法类似于 onChange，不同点在于，它可以批量修改表单项的值。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">name</span><span class="p">,</span> <span class="nx">other</span><span class="p">,</span> <span class="nx">onBulkChange</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="c1">// 调用amis onChange方法，变更表单项值</span>
    <span class="nx">onBulkChange</span><span class="p">({</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]:</span> <span class="nx">value</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">other</span><span class="p">]:</span> <span class="nx">value</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 获取表单项 value 属性</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>例如上例中，我们实现一个：修改当前输入框，会同步修改另外一个数据框的值，具体
schema 如下</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"controls"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"other"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>当 <code>text1</code> 变化时，获取 <code>other</code>
属性，该属性配置的是要同步修改的另外一个数据框的 <code>name</code> 值，即
<code>text2</code>，然后调用 <code>onBulkChange</code>，批量修改数据域值</p>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_9e55c14.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>vue 和 jquery 使用逻辑相同，具体使用语法方法见 onChange</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_options">options</h4>
<div class="paragraph">
<p>选择器表单项特有的属性，一个选择器组件总有一组选项，可以提供给用户勾选一项或多项，默认该属性为空数组</p>
</div>
<div class="sect4">
<h5 id="_适用范围">适用范围</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：选择器表单项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_手动配置">手动配置</h5>
<div class="paragraph">
<p>你可以手动在 schema 中配置 options 吗，然后在组件内获取并使用，例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 调用amis onToggle 方法，变更选择器表单项值</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">onToggle</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="nx">onToggle</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 获取表单项 value 和 options 属性</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">option</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>编辑 schema 如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"controls"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option A"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option B"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option C"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>这种方式和普通获取 schema 属性无区别。</p>
</div>
</div>
<div class="sect4">
<h5 id="_动态加载">动态加载</h5>
<div class="paragraph">
<p>选择器表单项可以通过配置 source
属性，来动态拉取远程选项，然后在组件更新钩子函数中，获取拉取到的新的
options</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setoptions">setOptions</h4>
<div class="paragraph">
<p>可以手动调用该方法动态设置 options</p>
</div>
<div class="sect4">
<h5 id="_适用范围_2">适用范围</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：选择器表单项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_函数签名_3">函数签名</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>options</code>：一个对象数组，里面有若干选项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_使用方法_4">使用方法</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 组件挂载时，调用 setOptions，设置 options</span>
  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">setOptions</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="nx">setOptions</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Option A</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Option B</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Option C</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span>
      <span class="p">}</span>
    <span class="p">]);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 调用amis onToggle 方法，变更选择器表单项值</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">onToggle</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="nx">onToggle</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 获取表单项 value 和 options 属性</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">option</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_selectedoptions">selectedOptions</h4>
<div class="paragraph">
<p>由于
<a href="https://baidu.gitee.io/amis/docs/components/form/options#%E6%8B%BC%E6%8E%A5%E7%AC%A6-delimiter">拼接符-delimiter</a>、https://baidu.gitee.io/amis/docs/components/form/options#%E6%8B%BC%E6%8E%A5%E5%80%BC-joinvalues[拼接值-joinvalues]、https://baidu.gitee.io/amis/docs/components/form/options#%E6%8F%90%E5%8F%96%E5%A4%9A%E9%80%89%E5%80%BC-extractvalue[提取多选值-extractvalue]
的存在，value 值格式可以是多种格式。</p>
</div>
<div class="paragraph">
<p><code>selectedOptions</code> 则永远为当前选中的值的数组形式，方便逻辑操作。</p>
</div>
<div class="sect4">
<h5 id="_适用范围_3">适用范围</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：选择器表单项</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ontoggle">onToggle</h4>
<div class="paragraph">
<p>选择器表单项专用属性，类似于
onChange，不同的是，该方法需要传入一个完整的选项对象，可以设置选项切换勾选。</p>
</div>
<div class="sect4">
<h5 id="_适用范围_4">适用范围</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：选择器表单项</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_函数签名_4">函数签名</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>option</code>：一个选项对象</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_使用方法_5">使用方法</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 调用amis onToggle 方法，变更选择器表单项值</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">onToggle</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="nx">onToggle</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 获取表单项 value 和 options 属性</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">option</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_与_onchange_有什么不同">与 onChange 有什么不同</h5>
<div class="paragraph">
<p>例如有如下 options：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option A"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option B"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Option B"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>例如使用 <code>onChange</code>，当第一次勾选了 <code>Option A</code> 后，调用
<code>onChange</code>，同步表单项 value 值为`"a"`，当用户再次点击
<code>Option A</code>，该表单项的值仍然是 <code>"a"</code>，因为又一次重复设置了 value；</p>
</li>
<li>
<p>而使用 <code>onToggle</code>，当第一次勾选了 <code>Option A</code> 后，用户再次点击
<code>Option A`后，将会取消勾选 Option A 选项，value 值将为空字符串`""</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>在配置 <code>multiple:true</code>，选择器支持多选时：</strong></p>
</div>
<div class="paragraph">
<p>第一次选中 <code>Option A</code>, <code>value</code> 值为 <code>"a"</code>，点击 <code>Option C</code> 时，value
会变成 <code>"a,c"</code>，再次点击 <code>Option C</code> ，则 <code>value</code> 会变为`"a"`</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ontoggleall">onToggleAll</h4>
<div class="paragraph">
<p>切换全选和全不选</p>
</div>
<div class="sect4">
<h5 id="_适用范围_5">适用范围</h5>
<div class="ulist">
<ul>
<li>
<p>开发框架：React、Vue、jQuery</p>
</li>
<li>
<p>组件类型：选择器表单项</p>
</li>
<li>
<p>表达项 schema 需配置 <code>multiple: true</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_使用方法_6">使用方法</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Test</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PureComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleSelectAll</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleSelectAll</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 调用amis onToggle 方法，变更选择器表单项值</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">onToggle</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="nx">onToggle</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleSelectAll</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">onToggleAll</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="nx">onToggleAll</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 获取表单项 value 和 options 属性</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;&gt;</span>
        <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">option</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="p">{</span><span class="nx">option</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
            <span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>          <span class="p">))}</span>
        <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSelectAll</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">全选</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>效果如下：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义组件/image_5ba83ae.png" alt="image.png">
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api基础">API基础</h3>
<div class="paragraph">
<p>普通页面支持 API 的方式对接外部接口，实现灵活扩展，API 详情请参考
<a href="https://baidu.gitee.io/amis/zh-CN/docs/types/api">amis 文档</a>。</p>
</div>
<div class="paragraph">
<p>在爱速搭中有两个特殊功能：</p>
</div>
</div>
<div class="sect2">
<h3 id="_代理">代理</h3>
<div class="paragraph">
<p>爱速搭所有请求都会经过代理，并且附上爱速搭特有的 header，如下所示</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x-isuda-token</code>，在「应用设置」中的 token</p>
</li>
<li>
<p><code>x-isuda-appkey</code>，应用短路径</p>
</li>
<li>
<p><code>x-isuda-env</code>，应用环境，开发环境是 <code>dev</code>，也可能是
<code>qa</code>、<code>sandbox`或者`latest</code></p>
</li>
<li>
<p><code>x-isuda-userid</code>，用户在爱速搭中的 id</p>
</li>
<li>
<p><code>x-isuda-username</code>，用户名</p>
</li>
<li>
<p><code>x-isuda-oauth-id</code>，oauth id，如果启用了 oauth 登录的话</p>
</li>
<li>
<p><code>x-isuda-oauth-access-token</code>，oauth 的 access token 如果启用了 oauth
登录的话</p>
</li>
<li>
<p><code>x-isuda-roles</code>，用户所属的角色名列表</p>
</li>
<li>
<p><code>x-isuda-profile-access-token</code> 获取用户信息的 access
token，具体请看下方说明</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果不放心直接根据 header 下发的 <code>x-isuda-username</code>
完成用户认证。请配置环境变量。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ISUDA_DISABLE_PROXY_USER_ID: true</pre>
</div>
</div>
<div class="paragraph">
<p>这样就只会下发以下 header 了。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x-isuda-token</code></p>
</li>
<li>
<p><code>x-isuda-appkey</code></p>
</li>
<li>
<p><code>x-isuda-env</code></p>
</li>
<li>
<p><code>x-isuda-profile-access-token</code></p>
</li>
<li>
<p><code>x-isuda-oauth-id</code>，oauth id，如果开启了 oauth 登录认证的话</p>
</li>
<li>
<p><code>x-isuda-oauth-access-token</code>，oauth 的 access token，如果开启了 oauth
登录认证的话</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>然后通过请求
<code>/openapi/profile?token={{这里用 x-isuda-profile-access-token 返回的 token 值}}</code>
就会获取以下信息。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxx"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"xxxx"</span><span class="p">,</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"userid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxx"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_如果不想经过内置代理">如果不想经过内置代理</h3>
<div class="paragraph">
<p>可以在 url 前加上 <code>raw:</code>，就不会走代理。</p>
</div>
<div class="paragraph">
<p>需要解决跨域问题，比如返回跨域 header：示例如下</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Access-Control-Allow-Origin: <a href="https://suda.bce.baidu.com" class="bare">https://suda.bce.baidu.com</a></code>，或者爱速搭部署的域名</p>
</li>
<li>
<p><code>Access-Control-Allow-Credentials: true</code></p>
</li>
<li>
<p><code>Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept</code></p>
</li>
<li>
<p><code>Access-Control-Allow-Methods: POST, GET, OPTIONS</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>示例代码（express）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="c1">// 放在所有路由前面</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Origin</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">https://suda.bce.baidu.com</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Credentials</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">true</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">Access-Control-Allow-Headers</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Origin, X-Requested-With, Content-Type, Accept</span><span class="dl">'</span>
  <span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Methods</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">POST, GET, OPTIONS</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果接口需要登录，可以在未登录的时候返回 401，内容是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://跳转登录的页面地址"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>需要注意在新浏览器下默认会限制 cookie 跨域，所以登录后保存状态的 cookie
必须加上 <code>SameSite=None; Secure</code>，类似如下</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Set-Cookie: session=123; SameSite=None; Secure</pre>
</div>
</div>
<div class="paragraph">
<p>如果想本地开发接口请查看<a href="./本地开发调试.md">这里</a>。</p>
</div>
</div>
<div class="sect2">
<h3 id="_在各种语言下获取参数的方法">在各种语言下获取参数的方法</h3>
<div class="sect3">
<h4 id="_node">Node</h4>
<div class="paragraph">
<p>以 Express 为例</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">body-parser</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>  <span class="c1">// 参数 json</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(...);</span>
<span class="p">})</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java">Java</h4>
<div class="paragraph">
<p>以 Spring 为例</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/api"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="no">POST</span><span class="o">,</span> <span class="n">consumes</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">ALL_VALUE</span><span class="o">,</span> <span class="n">produces</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_UTF8_VALUE</span><span class="o">)</span>
<span class="nd">@ResponseBody</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">api</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">String</span> <span class="n">body</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// body 就是字符串形式的 json，需要使用 Jackson 等库解析为对象来使用</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_php">PHP</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="php"><span class="o">&lt;?</span><span class="no">PHP</span>
<span class="nv">$json</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'php://input'</span><span class="p">);</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$json</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_net">.NET</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">MvcMovie.Controllers</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">HelloWorldController</span> <span class="p">:</span> <span class="n">Controller</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">JsonResult</span> <span class="nf">Index</span><span class="p">()</span>
        <span class="p">{</span>

            <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">HttpContext</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Body</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="kt">dynamic</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">DeserializeObject</span><span class="p">(</span><span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">());</span>
                <span class="kt">var</span> <span class="n">conditions</span> <span class="p">=</span> <span class="n">json</span><span class="p">.</span><span class="n">conditions</span><span class="p">;</span>
                <span class="kt">var</span> <span class="n">data</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span> <span class="n">status</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">msg</span> <span class="p">=</span> <span class="s">""</span> <span class="p">};</span>
                <span class="k">return</span> <span class="nf">Json</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_go">go</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="go"><span class="k">func</span> <span class="n">api</span><span class="p">(</span><span class="n">w</span> <span class="n">http</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">,</span> <span class="n">r</span> <span class="o">*</span><span class="n">http</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">var</span> <span class="n">result</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}</span>  <span class="c">// 这里简化了，最好参考对应的参数说明文档创建 struct</span>
    <span class="n">json</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_python">Python</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="nn">json</span>
<span class="c1"># falcon 框架
</span><span class="k">class</span> <span class="nc">SugarAPI</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">bounded_stream</span><span class="p">)</span>

<span class="c1"># flask 框架
</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>
<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/api'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">sugar_api</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">data</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ruby">Ruby</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ruby"><span class="nb">require</span> <span class="s1">'sinatra'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">post</span> <span class="s1">'/api/'</span> <span class="k">do</span>
  <span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">rewind</span>
  <span class="n">request_payload</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">read</span>
<span class="k">end</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api中心">API中心</h2>
<div class="sectionbody">
<div class="paragraph">
<p>API 中心用于集中管理页面内的 API，比起直接填入 API 的方式，它增加了如下功能：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>方便对 API 进行调试</p>
</li>
<li>
<p>每个 API 可以使用不同的签名方式</p>
</li>
<li>
<p>支持对提交参数进行转换</p>
</li>
<li>
<p>支持对返回结果进行转换</p>
</li>
<li>
<p>自定义证书</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_使用方法_7">使用方法</h3>
<div class="paragraph">
<p>在开发版中左侧进入</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API中心/api.png" alt="api">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_签名方式">签名方式</h3>
<div class="paragraph">
<p>目前支持三种签名方式：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP 帐号密码。</p>
</li>
<li>
<p>JWT，将会对所有 query 及 header 及进行签名，写入 header 的
Authorization 字段中。</p>
</li>
<li>
<p>百度云，将会对提交数据及 header 都做签名，写入 header 的 Authorization
字段中</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>对于私有部署版本，还支持自定义签名方式，请参考「<a href="#自定义后端插件">[自定义后端插件]</a>」。</p>
</div>
</div>
<div class="sect2">
<h3 id="_url_地址替换">URL 地址替换</h3>
<div class="paragraph">
<p>「请求地址」支持变量替换，比如这个例子
<code><a href="http://1.1.1.1/blog/{id}" class="bare">http://1.1.1.1/blog/{id}</a></code>，其中的 id
是动态的，而在实际前端调用的时候，请求地址是类似
<code>/api/center/nicaVyNdbGmHicn5b3EKkU</code>，如何将它映射到目标地址的路径中？</p>
</div>
<div class="paragraph">
<p>方法是首先在前端请求的时候映射 query，比如
<code>post:api://nicaVyNdbGmHicn5b3EKkU?id=${id}</code>，然后在 api 中的 url
地址填写 <code><a href="http://1.1.1.1/blog/{{query.id}}" class="bare">http://1.1.1.1/blog/{{query.id}}</a></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API中心/url-var.png" alt="url-var">
</div>
</div>
<div class="paragraph">
<p>除了 <code>query</code> 来获取 query，还有以下其它变量：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>env</code>，环境变量</p>
</li>
<li>
<p><code>input</code>，提交参数</p>
</li>
<li>
<p><code>headers</code>，header</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_提交参数映射">提交参数映射</h3>
<div class="paragraph">
<p>API 中心里的提交参数、Query（URL 参数）、Header
都可以进行修改，转成对应接口所需的格式。</p>
</div>
<div class="paragraph">
<p>目前参数映射有以下几种方式：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>固定值，这个用于固定参数，比如接口需要 <code>type=1</code> 这个
query，使用如下方式：
image:::API/API中心/mapping-static.png[mapping-static]</p>
</li>
<li>
<p>字段名，用于取另一个字段的值，比如将环境变量中的 TYPE 值当作 query 中
type 的值，使用如下方式：
image:::API/API中心/mapping-name.png[mapping-name]</p>
</li>
<li>
<p>模板引擎转换，使用 <a href="https://handlebarsjs.com/">Handlebars</a>
模板的结果作为值，比如提交参数中有个 type，值为
1，但对应的接口需要的值是 <code>1s</code>，需要加上个
<code>s</code>，这时就可以使用模板转换的方式，如下所示：
image:::API/API中心/mapping-tpl.png[mapping-tpl]</p>
</li>
<li>
<p>公式计算，使用爱速搭中的公式能力进行计算，将结果作为值，比如常见的四则运算。
image:::API/API中心/mapping-formula.png[mapping-formula.png]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>注意这个功能和页面中接口的「数据映射」功能类似，大部分情况下更推荐使用页面中的「数据映射」，因为它能够，但不同的是可以对
header 进行映射，并且这是后端实现的。</p>
</div>
</div>
<div class="sect2">
<h3 id="_返回结果转换">返回结果转换</h3>
<div class="paragraph">
<p>爱速搭接口所需的返回格式是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...其他字段</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>status</strong>: 状态码，返回 <code>0</code> 表示当前接口正确返回，否则按错误请求处理</p>
</li>
<li>
<p><strong>msg</strong>: 返回接口处理信息，主要用于表单提交或请求失败时的 <code>toast</code> 显示</p>
</li>
<li>
<p><strong>data</strong>: 返回的具体数据</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>同时也兼容以下几种放回格式</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>errorCode 作为 status、errorMessage 作为 msg</p>
</li>
<li>
<p>errno 作为 status、errmsg/errstr 作为 msg</p>
</li>
<li>
<p>error 作为 status、errmsg 作为 msg</p>
</li>
<li>
<p>error.code 作为 status、error.message 作为 msg</p>
</li>
<li>
<p>message 作为 msg</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>如果返回的内容不是这些格式，或者返回内容不是
JSON，则需要对返回结果进行转换。</p>
</div>
<div class="paragraph">
<p>转换方法有以下几种：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>复制到，用于将所有数据复制到某个字段下</p>
</li>
<li>
<p>取字段，用于将数据复制到返回结果的某个字段下</p>
</li>
<li>
<p>删除字段</p>
</li>
<li>
<p>JSON 路径查询</p>
</li>
<li>
<p>模板，使用 Handlebars 模板对结果进行转换</p>
</li>
<li>
<p>字符串拆分数组，比如返回结果是 <code>"1,2,3"</code>，可以将其转成 <code>[1,2,3]</code></p>
</li>
<li>
<p>正则，抽取第一个组，通常用于 xml 中直接获取某个数据</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>这里介绍最常见的「取字段」方法，假设接口返回格式是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error_msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>我们希望转成如下格式</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>就需要通过「取字段」的方式提取这 3 个值到不同位置，如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API中心/output-transform.png" alt="output-transform">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_文件上传">文件上传</h3>
<div class="paragraph">
<p>如果是文件上传，请在「请求格式」里设置为「文件上传」。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API中心/upload.png" alt="upload">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_文件下载">文件下载</h3>
<div class="paragraph">
<p>如果是文件下载接口，请开启左下角的「是文件下载」</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API中心/download.png" alt="download">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api编排">API编排</h2>
<div class="sectionbody">
<div class="paragraph">
<p>API 编排功能可以通过组合的方式整合处理多个 API /
业务节点的数据，输出业务终端需要的数据结果</p>
</div>
<div class="sect2">
<h3 id="_基础">基础</h3>
<div class="paragraph">
<p>API
编排本质上是一种用可视化的方式来编写后端代码，它可以用于不复杂的接口聚合及增删改查场景。</p>
</div>
<div class="paragraph">
<p>API 编排是树形接口，它的执行顺序是从上至下执行，比如下图：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/flow-tree.png" alt="tree">
</div>
</div>
<div class="paragraph">
<p>这个 API
编排首先运行「并行执行」节点，这里面的子节点会并行运行，接着是循环节点，可以对前面的输出结果进行循环处理，然后在这个循环里面有个分支判断，如果成功就运行「设置变量」的节点，最后再运行「发送邮件」节点，如果熟悉写代码，上面这个树等价于下面的代码：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="c1">// 这个是为了处理并行执行</span>
<span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
  <span class="nx">httpResult</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">sendHTTPAction</span><span class="p">(...),</span>
  <span class="nx">sqlResult</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">runSQL</span><span class="p">(...)</span>
<span class="p">]);</span>
<span class="c1">// 对 http 返回结果进行二次处理</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">httpResult</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 分支</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 设置变量</span>
    <span class="nx">item</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">成功</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 发送邮件</span>
<span class="nx">sendMail</span><span class="p">(...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>各个节点之间如何协作？方法是通过变量，比如发起一个 HTTP
接口，其中有个配置是「存入变量」</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/var.png" alt="var">
</div>
</div>
<div class="paragraph">
<p>执行完后，下面的节点就能通过这个变量来获取到内容，比如后面接一个「设置变量」的节点，在这个节点中，可以通过
<code>{{}}</code> 来获取到，比如下面这个例子获取到前面 output 变量中的 name
值，然后又将它写入变量 res。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/var-set.png" alt="var-set">
</div>
</div>
<div class="paragraph">
<p>当所有节点执行完后，output 变量的值就作为最终结果返回前端。</p>
</div>
<div class="sect3">
<h4 id="_创建和编辑">创建和编辑</h4>
<div class="paragraph">
<p>在【API 中心】列表中点击【新增
API】，弹出面板选择【多接口聚合模式】，即可新增一个 API 编排</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/new.png" alt="new">
</div>
</div>
<div class="paragraph">
<p>保存后在列表中点击【多接口聚合设计】，即可进行整个 API 编排的设计</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/merge.png" alt="merge">
</div>
</div>
<div class="paragraph">
<p>点击连线上的 + 号，可添加连线所在层级的平级节点，点击节点右侧的<br>
号，可添加该节点的子节点 image:::API/API编排/add.png[add]</p>
</div>
</div>
<div class="sect3">
<h4 id="_一个简单的例子">一个简单的例子</h4>
<div class="paragraph">
<p>本例子将实现一个从服务端获取文章列表并对日期进行格式化后返回到前端的 API
编排</p>
</div>
<div class="paragraph">
<p>添加一个 <code>发送 HTTP 请求'' 类型的节点，在 </code>请求地址'' 输入框中填写以下
url</p>
</div>
<div class="paragraph">
<p><code><a href="https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/apiArrangeDemo/list" class="bare">https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/apiArrangeDemo/list</a></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/http.png" alt="http">
</div>
</div>
<div class="paragraph">
<p>点击工具栏中的 ``调试接口'' 按钮
image:::API/API编排/run.png[run]</p>
</div>
<div class="paragraph">
<p>在弹出框中点击右下角的 ``发送请求''
按钮，等待请求执行完毕后，可以看到请求结果和运行日志</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/send.png" alt="send">
</div>
</div>
<div class="paragraph">
<p>可以看到当前返回的数据是包含 items 和 total 两个字段的 json
格式数据，items 列表单项中的 date 字段是以毫秒时间戳格式返回的日期</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  "items": [
    {
      "id": 1,
      "title": "标题0",
      "subscribe": "摘要0",
      "date": 1622793580560
    },
    ...
  ],
  "total": 200
}</pre>
</div>
</div>
<div class="paragraph">
<p>这里我们希望将 date 字段转换为能够友好展示的日期字符串</p>
</div>
<div class="paragraph">
<p>为 <code>发送 HTTP 请求'' 节点添加一个平级 </code>循环'' 类型的节点，并为
<code>循环'' 节点添加一个 </code>日期格式化'' 子节点</p>
</div>
<div class="paragraph">
<p><code>`循环'' 节点配置如下，接口返回的数据会被统一放在全局的 output
对象中，通过 `output.xxx</code> 可以取到相关字段
image:::API/API编排/loop.png[loop]</p>
</div>
<div class="paragraph">
<p>``日期格式化'' 节点配置如下，循环节点的行为是循环执行自身子节点的逻辑
image:::API/API编排/dateformat.png[dateformat]</p>
</div>
<div class="paragraph">
<p>点击发送请求，可以看到返回数据中的 date 被格式化成了
<code>YYYY-MM-DD HH:mm:ss</code> 格式</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  "items": [
    {
      "id": 1,
      "title": "标题0",
      "subscribe": "摘要0",
      "date": "2021-06-04 17:23:41"
    },
    ...
  ],
  "total": 200
}</pre>
</div>
</div>
<div class="paragraph">
<p>调试完之后需要点右下角的 ``确认''
按钮保存，编辑界面中的内容才会被保存到数据库中 关于如何在页面中使用 API
编排获取数据，请看下一节</p>
</div>
</div>
<div class="sect3">
<h4 id="_在页面中使用_api_编排">在页面中使用 API 编排</h4>
<div class="paragraph">
<p>在页面中使用 API 编排的方式，和使用 API 中心 API
的方式完全相同，下面同样以一个简单的例子来说明</p>
</div>
<div class="paragraph">
<p>新建一个普通页面，在页面中拖入一个增删改查组件</p>
</div>
<div class="paragraph">
<p>勾选增删改查组件的数据拉取接口的 ``来自 API 中心''
选项，在列表中选择之前创建的 API 编排（和单个接口 API 在同一个列表中）</p>
</div>
<div class="paragraph">
<p>配置字段映射，可以看到 API 编排处理返回的数据被正常展示在列表中</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/crud.png" alt="crud">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_调试接口">调试接口</h4>
<div class="paragraph">
<p>点击顶部的「调试接口」按钮进入接口调试功能。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/debug.png" alt="debug">
</div>
</div>
<div class="paragraph">
<p>在接口调试弹窗中，可以输入提交参数，然后点击「发送请求」进行测试，除了查看输出结果，最有用的功能是查看执行过程的记录，如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/debug-result.png" alt="debug-result">
</div>
</div>
<div class="paragraph">
<p>对于初始节点和有数据变更的节点，还能点击旁边的加号来查看当时的数据情况，这样就能知道每一步操作是否正确对数据进行了处理。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/debug-state.png" alt="debug-state">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_查看配置源码">查看配置源码</h4>
<div class="paragraph">
<p>点击顶部的「查看配置源码」可以看到最终生成的树形结构配置，这是 API
编排在实际运行是所使用的格式，这个功能主要是用于结果预期不一致时进行调试，可以将这个配置发给爱速搭的管理员协助分析。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/config-source.png" alt="config-source">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_生成的伪代码示例">生成的伪代码示例</h4>
<div class="paragraph">
<p>点击顶部的「生成的伪代码示例」可以生成伪代码示例。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/API编排/pseudocode.png" alt="pseudocode">
</div>
</div>
<div class="paragraph">
<p>这个功能主要是给习惯看源码的研发，可以方便看出执行流程，不过需要注意的是爱速搭实际执行并不是使用这个生成的代码，因此这里仅供参考，输出的伪代码并不保证能运行。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_节点分类介绍">节点分类介绍</h3>
<div class="paragraph">
<p>接下来详细介绍各个节点的功能</p>
</div>
<div class="sect3">
<h4 id="_数据接口">数据接口</h4>
<div class="sect4">
<h5 id="_发送_http_请求">发送 HTTP 请求</h5>
<div class="paragraph">
<p>最基本的 HTTP 请求发送节点，使用方法同【单个接口API】，具体见 <a href="#_api中心">API中心</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_数据源_sql">数据源 SQL</h5>
<div class="paragraph">
<p>在数据源上执行 SQL 操作。</p>
</div>
<div class="paragraph">
<p> 在 SQL 语句里用 <code>{{}}</code> 包裹的部分可以执行 JS
语句，实现灵活的处理，比如：</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select * from blog where title = {{ input.title }}</pre>
</div>
</div>
<div class="paragraph">
<p>它的实现原理是最终转成 <code>select * from blog where title = ?</code>，然后将
<code>input.title</code> 的值作为后续参数填入，因此默认会进行变量转义，防止 sql
注入。</p>
</div>
<div class="paragraph">
<p>如果要实现有参数时才查询，可以用如下写法</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select * from blog where ( {{ !input.title }} OR title = {{ input.title }} )</pre>
</div>
</div>
<div class="paragraph">
<p>这个语句在输入参数有 <code>title</code> 的时候，会变成</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select * from blog where (FALSE OR title = ?)</pre>
</div>
</div>
<div class="paragraph">
<p>如果输入参数里没有 <code>title</code>，则会变成下面的语句，可以看到前面的条件是
true，所以 or 里的条件不会生效。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select * from blog where (TRUE OR title = ?)</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_执行控制">执行控制</h4>
<div class="sect4">
<h5 id="_分支">分支</h5>
<div class="paragraph">
<p>相当于代码中的 <code>if</code> 语句。</p>
</div>
</div>
<div class="sect4">
<h5 id="_循环">循环</h5>
<div class="paragraph">
<p>循环用于对数组进行遍历，它的每个子节点用于执行每次循环的中的语句。</p>
</div>
</div>
<div class="sect4">
<h5 id="_跳出循环">跳出循环</h5>
<div class="paragraph">
<p>用于跳出循环，不再执行循环的后续所有操作，相当于代码中的 <code>break</code> 语句。</p>
</div>
</div>
<div class="sect4">
<h5 id="_继续循环">继续循环</h5>
<div class="paragraph">
<p>用于跳过当前循环的后续操作，进入下一个循环，相当于代码中的 <code>continue</code>
语句。</p>
</div>
</div>
<div class="sect4">
<h5 id="_退出">退出</h5>
<div class="paragraph">
<p>用于退出整个接口，后续不再执行任何操作</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_并行串行">并行/串行</h4>
<div class="sect4">
<h5 id="_顺序执行">顺序执行</h5>
<div class="paragraph">
<p>按顺序执行子节点</p>
</div>
</div>
<div class="sect4">
<h5 id="_并行执行">并行执行</h5>
<div class="paragraph">
<p>这个节点下的子节点会并行执行，用于独立获取各种数据的场景。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_数据处理">数据处理</h4>
<div class="sect4">
<h5 id="_设置变量">设置变量</h5>
<div class="paragraph">
<p>赋值语句，用于对变量进行赋值。</p>
</div>
</div>
<div class="sect4">
<h5 id="_日期格式化">日期格式化</h5>
<div class="paragraph">
<p>对日期格式进行转换，比如将时间戳转成可读的日期格式。</p>
</div>
</div>
<div class="sect4">
<h5 id="_js_代码">JS 代码</h5>
<div class="paragraph">
<p>通过 js 代码的方式来对数据进行处理，用于处理一些比较复杂的数据转换场景。</p>
</div>
<div class="paragraph">
<p>最简单的示例如下</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">state</span><span class="p">;</span> <span class="sr">/</span><span class="err">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>其中 state 是 api 编排中的全局数据，比如前面如果有个 HTTP
节点将返回结果「存入变量」到 data 下，在 JS 代码中就能通过 <code>state.data</code>
获取到这个值，然后进行二次转换。</p>
</div>
<div class="paragraph">
<p>同时还能写入 <code>state.output</code> 来影响 api 聚合最终的输出结果。</p>
</div>
<div class="paragraph">
<p>这段 JS 函数的返回值会替换全局数据，因此上面的例子中直接返回 <code>state</code>。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_其他">其他</h4>
<div class="sect4">
<h5 id="_发送邮件">发送邮件</h5>
<div class="paragraph">
<p>用于发送邮件，比如进行邮件通知</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_本地开发调试">本地开发调试</h2>
<div class="sectionbody">
<div class="paragraph">
<p>爱速搭中的 api 地址默认会经过代理，如果希望连本机地址，需要这两步操作：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>填入接口地址时需要在前面加上 <code>raw:</code>，比如
<code>raw:http://localhost:8080/api</code></p>
</li>
<li>
<p>这个接口需要返回跨域 header，包括如下这些</p>
<div class="ulist">
<ul>
<li>
<p><code>Access-Control-Allow-Origin: <a href="https://suda.bce.baidu.com" class="bare">https://suda.bce.baidu.com</a></code>，或者爱速搭部署的域名</p>
</li>
<li>
<p><code>Access-Control-Allow-Credentials: true</code></p>
</li>
<li>
<p><code>Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept</code></p>
</li>
<li>
<p><code>Access-Control-Allow-Methods: POST, GET, OPTIONS</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>如果本地接口不方便返回前面提到的跨域
header，可以使用第三方的工具代理来自动添加，下面介绍一个工具的使用方法：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>首先通过 <code>npm install -g local-cors-proxy</code> 命令安装，如果没有 <code>npm</code>
命令需要本机先安装 <a href="https://nodejs.org/">Node</a>。</p>
</li>
<li>
<p>使用
<code>lcp --proxyUrl <a href="http://localhost:8080" class="bare">http://localhost:8080</a> --proxyPartial '' --origin 'https://aisuda.bce.baidu.com' --credentials</code>
命令启动代理。其中 <code>8080</code> 是本地服务的端口，如果是私有部署，请将其中的
<code><a href="https://aisuda.bce.baidu.com" class="bare">https://aisuda.bce.baidu.com</a></code> 改成实际部署地址。</p>
</li>
<li>
<p>lcp 程序默认监听 <code>8010</code>
端口，因此在爱速搭中填入的是这个端口的地址，比如
<code>raw:http://localhost:8010/api</code>，后面的路径就是本地 8080
服务之前所使用的路径。</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_应用发布管理">应用发布管理</h3>
<div class="paragraph">
<p>应用可以通过发布完成上线流程，爱速搭支持强大的版本管理能力，可以轻松实现版本迭代和发布控制。一键发布及完成上线，自带版本发布详情，可快速溯源。如果线上版本可快速回滚。</p>
</div>
<div class="sect3">
<h4 id="_应用发布">应用发布</h4>
<div class="paragraph">
<p>编辑完成的应用可以通过【发布应用】进行发布，已发布版本可以快速访问和查看详情，版本发布后不支持版本信息修改。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/5b29c77a830c884fc8f544a519432b84.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>应用发布时可以配置环境、权限等，支持线上版本、沙盒版本及测试版本，并可以轻松实现版本控制。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/ea91eba47e2c7630e76623738a688ca4.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>平台支持版本回滚，只需选择要回滚的版本和发布环境重新发布。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/74d563fe95f0935ae13f143d904b0c60.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>版本详情中可以查看本次版本的基本信息和变更日志。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/64094bad7b40d184e27a1e7a249433a2.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_环境类型">环境类型</h4>
<div class="paragraph">
<p>爱速搭平台支持了线上环境、沙盒环境和测试环境，方便开发过程中的测试和上线。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/image_7af2dae.png" alt="image.png">
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><em>发版时可选择任意环境下的已发布版本或当前开发版，不同环境类型下的数据独立。</em></p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_版本回滚">版本回滚</h4>
<div class="paragraph">
<p>版本回滚的状态非常简单，选择正确的要回滚的版本，基于选中的版本重新发布一个版本即可。</p>
</div>
</div>
<div class="sect3">
<h4 id="_导出应用">导出应用</h4>
<div class="paragraph">
<p>为了方便应用生成模板和在公司间的复用，平台支持应用导入导出功能。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/489a650c6d27482fb9a5c76f3eca9483.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>应用导出支持选择要操作的版本，需要设置密码以保证应用导出后的安全性，并且支持控制导出的应用支持的二次操作权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/ad8ce4bc4edd50c9f78e11d9399b16f6.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_导入应用">导入应用</h4>
<div class="paragraph">
<p>在组织管理部分有介绍到，应用管理模块也可以实现应用导入。在应用发布模块同样支持应用导入，导入的应用包在当前操作的应用上生效。</p>
</div>
<div class="paragraph">
<p>应用导入需要上传应用文件并输入密码才能实现应用的安装，需要注意的是，目前仅支持在不包含自建资源的应用中执行导入应用的操作。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/发布管理/a0a0753b3fb1be51ad7f2276ad628332.png" alt="image">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_应用权限设置_2">应用权限设置</h3>
<div class="paragraph">
<p>应用权限管理模块可以快速实现应用权限设置和资源权限设置。</p>
</div>
<div class="sect3">
<h4 id="_应用基本权限">应用基本权限</h4>
<div class="paragraph">
<p>应用权限设置可对应用级操作权限的默认值进行修改，修改设置项后点击【保存】即可保存修改内容。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用权限设置/d5c808a62c52948c44cc1932e6e8036f.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_资源默认权限">资源默认权限</h4>
<div class="paragraph">
<p>资源默认权限是指应用内的各种资源的初始权限配置，可以根据业务需求进行修改。目前资源类型有页面资源、数据模型资源和数据源资源。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用权限设置/d032fe90d68df54a488acbe7b04829c3.png" alt="image">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_资源权限">资源权限</h4>
<div class="paragraph">
<p>资源权限是指应用中的角色与资源操作权限的对应关系，可对应用内的所有资源设置操作权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用权限设置/52234ad978b889c376c8beda4e96bd6b.png" alt="image">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_应用设置">应用设置</h3>
<div class="paragraph">
<p>应用的相关设置可以在【应用设置】模块进行完善和修改，包括基本配置、接口相关设置及环境变量配置。接口相关配置可以配置默认发送格式、API
TOKEN 以及适配器等。</p>
</div>
<div class="sect3">
<h4 id="_基本配置">基本配置</h4>
<div class="paragraph">
<p>应用的基本配置支持应用名称、短名字、描述以及 logo 等信息的管理。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/image_c5a081a.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>环境变量是方便管理不同环境下应用的一些资源。</p>
</div>
</div>
<div class="sect3">
<h4 id="_接口相关设置">接口相关设置</h4>
<div class="paragraph">
<p>接口相关设置主要是对应用中针对接口有关的功能设置。</p>
</div>
<div class="sect4">
<h5 id="_默认发送格式">默认发送格式</h5>
<div class="ulist">
<ul>
<li>
<p>JSON: 发送数据体格式为 application/json</p>
</li>
<li>
<p>Form: 发送数据体格式为 application/x-www-form-urlencoded</p>
</li>
<li>
<p>FormData: 发送数据体格式为 multipart/form-data</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>当发送内容中有文件时，会自动使用 multipart/form-data 格式</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_api_token">API TOKEN</h5>
<div class="paragraph">
<p>用来保护开发接口, 设置后爱速搭发出的请求都会带上此 Token 到 Headers 中。</p>
</div>
</div>
<div class="sect4">
<h5 id="_http_签名">HTTP 签名</h5>
<div class="paragraph">
<p>选择要使用的 HTTP 签名，目前支持两种。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/image_3af9c29.png" alt="image.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_全局发送适配器">全局发送适配器</h5>
<div class="paragraph">
<p>发送适配器是指在接口请求前，对请求进行一些自定义处理，例如修改发送数据体、添加请求头、等等，而全局适配器将应用到该群组中所有的接口上。</p>
</div>
<div class="paragraph">
<p>设置后所有的请求都会经过此适配器，接口本身可以单独设置适配器，此适配器会在接口本身发送适配器之前执行。</p>
</div>
<div class="paragraph">
<p>函数签名：(api) &#8658; api， 数据在 api.data 中，修改后返回 api 对象。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// 进行一些操作
let data = api.data;
data.foo = 'bar'; // // 新添加数据
console.log(api);  // 可以打日志，打开浏览器开发者工具查看日志
// 将修改后的 api return 出去
return {
    ...api,
    data: data
}</pre>
</div>
</div>
<div class="paragraph">
<p>上例中，我们获取暴露的 api.data 参数，并且为其添加了一个新的字段
foo，并且一起返回出去就可以了，这样我们的请求数据体中就会加上我们这个新的字段。</p>
</div>
<div class="paragraph">
<p>api 中一般会包含下面几个变量：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>url：当前接口 Api 地址</p>
</li>
<li>
<p>method：当前请求的方式</p>
</li>
<li>
<p>data：请求的数据体</p>
</li>
<li>
<p>headers：请求的头部信息</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>操作符为 es6 扩展操作符，js 相关知识请自行学习</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_全局接收适配器">全局接收适配器</h5>
<div class="paragraph">
<p>如果后端返回跟平台要求的数据格式不一致时,可以通过配置自定义 js function
转换。</p>
</div>
<div class="paragraph">
<p>函数签名：(data, response, api) &#8658; data 修改完后返回 data</p>
</div>
<div class="paragraph">
<p>参数说明：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data: 接口返回的数据体</p>
</li>
<li>
<p>response: 接口返回的对象，包含状态值等。</p>
</li>
<li>
<p>api: 接口信息，包含发送地址、方式、数据体。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>示例：</p>
</div>
<div class="paragraph">
<p>例如：我们接口返回的 data 直接是一个数组，而我们的 crud
组件，需要包装一个 items 字段，才可以正常显示数据，那么可以：</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// 进行一些操作
const items = payload.data;
console.log(items); // 可以打日志，打开浏览器开发者工具查看日志
// 将修改后的 data return 出去
return {
    ...payload,
    data: {
        items: items
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>我们获取 payload.data，并且将该值赋给 items 字段，并且放到要 return
出去的 data 中，payload 其他参数原样返回，这样就可以实现上述效果</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_设置环境变量">设置环境变量</h4>
<div class="paragraph">
<p>通过 <code>key-value</code> 的形式设置环境变量</p>
</div>
<div class="sect4">
<h5 id="_开发环境">开发环境</h5>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/image_f1b836b.png" alt="image.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_其他环境">其他环境</h5>
<div class="paragraph">
<p>发布应用时，可以不同环境设置不同的环境变量值，这样发布之后，就可以针对不同环境，使用不同的资源。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/image_14d87da.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>上例中，我们本地使用`API_HOST`为`111.111.111.111`，我们线上环境使用`API_HOST`时就是`222.222.222.222`</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_使用环境变量">使用环境变量</h4>
<div class="paragraph">
<p>可以在应用中使用环境变量</p>
</div>
<div class="sect4">
<h5 id="_在页面配置中">在页面配置中</h5>
<div class="paragraph">
<p>在组件搭建页面中，可以通过`${xxx}`获取当前环境变量，例如：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/ab0dc63a5b6b6bb2e42ae013ce0e0bce_ab0dc63.png" alt="ab0dc63a5b6b6bb2e42ae013ce0e0bce.png">
</div>
</div>
<div class="paragraph">
<p>上图中我们在页面直接显示一段文字，并使用`${xxx}`获取`ENV`变量。然后我们发布时，更改这个变量</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/9a6e53900245c822ff8a3a0131b4ff67_9a6e539.png" alt="9a6e53900245c822ff8a3a0131b4ff67.png">
</div>
</div>
<div class="paragraph">
<p>上图中我们将正式环境中的`ENV`变量为`正式环境`。发布完打开页面我们可以看到文字已经变为`"当前环境为【正式环境】"`</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/ed59762b91fa17994d2842c06b72c6cd_ed59762.png" alt="ed59762b91fa17994d2842c06b72c6cd.png">
</div>
</div>
<div class="paragraph">
<p>你几乎可以在任何地方使用`${xxx}`来获取，你也可以在配置`api`接口的地方使用环境变量：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/294045271c4969cf4f2d042b9a895c89_2940452.png" alt="294045271c4969cf4f2d042b9a895c89.png">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_创建数据源中">创建数据源中</h5>
<div class="paragraph">
<p>创建外部数据源也支持填写环境变量，实现不同环境使用不同数据库资源地址的能力。</p>
</div>
<div class="paragraph">
<p>我们只以数据库地址为例：</p>
</div>
<div class="paragraph">
<p>首先先添加环境变量`DB_HOST`：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/72ee7167d15a459dac595e2e57d83ff6_72ee716.png" alt="72ee7167d15a459dac595e2e57d83ff6.png">
</div>
</div>
<div class="paragraph">
<p>然后在创建数据源的时候，数据库地址填入`${DB_HOST`</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/应用设计/应用设置/e8986c285060e3276bb901647ce1e3d5_e8986c2.png" alt="e8986c285060e3276bb901647ce1e3d5.png">
</div>
</div>
<div class="paragraph">
<p>这样点击下一步测试联动性的时候会获取`111.111.111.111`作为数据库地址进行联通</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>请保证不同资源地址的外部数据库结构保持一致，否则可能会有问题。</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>该篇文档介绍如何配置一个表单，并将表单数据提交到一个接口上。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_添加_form_组件">添加 Form 组件</h3>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_d70800d.png" alt="image.png">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_b81c61d.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_编辑表单项">编辑表单项</h3>
<div class="paragraph">
<p>选中「Form」，然后点击加号，添加表单项。</p>
</div>
<div class="paragraph">
<p>我们这里添加两个表单项：文本框「姓名」、文本框「邮箱」</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_63106ff.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>选择文本框</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_7916426.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>添加成功后，选中文本框</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_22ef73b.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>编辑文本框字段，修改 「字段名」为 <code>name</code>，修改 Label 为 <code>姓名</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_4559710.png" alt="image.png">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>字段名代表是提交表单后，提交给后端该数据的 key 值为该配置</p>
</li>
<li>
<p>label 表示标识该表单项的文本</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>同上步骤，添加邮箱表单项：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_372998f.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>这样就基本结构就配置成功了：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_2779985.png" alt="image.png">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_绑定提交接口">绑定提交接口</h3>
<div class="paragraph">
<p>准备一个保存接口，用于接收表单提交请求，用来保存数据。</p>
</div>
<div class="paragraph">
<p>表单提交的数据结构为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"爱速搭"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"isuda@xxx.com"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>接口保存后返回的数据结构：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"保存成功"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>将保存接口填入表单接口配置中：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_bf290a6.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>现在我们来提交一次表单：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个表单/image_fafc1a8.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>到此我们构建了一个简单的 Form 提交。</p>
</div>
<div class="paragraph">
<p>该篇文档介绍如何配置通过接口展示一个表格组件。</p>
</div>
</div>
<div class="sect2">
<h3 id="_添加增删改查组件">添加「增删改查」组件</h3>
<div class="paragraph">
<p>进入页面的可视化编辑器界面，点击加号，新增组件：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_aa64910.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>选择「增删改查」组件：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_eee40e3.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>进入快速构建，可以快速编辑要展示的列：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_d82b3b5.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>每列所配置属性作用分别是：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>设置表头显示字段</p>
</li>
<li>
<p>该列绑定行数据中字段的 <code>key</code> 值</p>
</li>
<li>
<p>选择列展示的类型</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>我们这里创建三列，分别是：「ID」列（绑定行数据 <code>id</code>
字段）、「姓名」列（绑定行数据 <code>name</code> 字段）、「邮箱」列（绑定行数据
<code>email</code> 字段）。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_090ca54.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>点击确认后，编辑界面可以看到如下效果：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_6736279.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>基本的组件结构已经准备好了，现在我们需要准备数据</p>
</div>
</div>
<div class="sect2">
<h3 id="_准备数据接口">准备数据接口</h3>
<div class="paragraph">
<p>准备好一个可用的数据接口，该数据接口返回的数据格式要求如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">每一行的数据</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"xxx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxx"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">

    </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">注意！！！这里不是当前请求返回的</span><span class="w"> </span><span class="err">items</span><span class="w"> </span><span class="err">的长度，而是数据库中一共有多少条数据，用于生成分页组件</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>items`或`rows</code>：用于返回数据源数据，格式是数组</p>
</li>
<li>
<p><code>count</code>: 用于返回数据库中一共有多少条数据，用于生成分页</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>例如如上，我们配置的表格，我们需要返回的数据结构是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"张三"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zhangsan@xxx.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"李四"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lisi@xxx.com"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_绑定数据接口">绑定数据接口</h3>
<div class="paragraph">
<p>在编辑器左侧大纲中，选中「增删改查」组件，切换至「接口」标签，将准备好的数据接口，填入到「数据拉取接口」配置中：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_a9de01f.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>点击预览可以看到已经可以顺利渲染出列表页了。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/最佳实践/配置一个列表/image_b8f7351.png" alt="image.png">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openapi">OpenAPI</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_介绍">介绍</h3>
<div class="paragraph">
<p>爱速搭提供了开放 API，可以自动化控制爱速搭中的功能，方便进行系统对接。</p>
</div>
<div class="sect3">
<h4 id="_安全校验">安全校验</h4>
<div class="paragraph">
<p>所有接口调用都需要进行签名校验，目前有两种级别的签名：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>组织级别，可以访问组织下所有应用的 API</p>
</li>
<li>
<p>应用级别，只能访问某个应用的 API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在使用之前，首先需要设置公钥</p>
</div>
</div>
<div class="sect3">
<h4 id="_设置组织级别公钥">设置组织级别公钥</h4>
<div class="paragraph">
<p>访问组织「设置」页面，可以自己生成 RSA256
密钥对，或者使用平台的自动生成功能。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/介绍/image_9420660.png" alt="image.png">
</div>
</div>
<div class="paragraph">
<p>点击自动生成的链接，会生成 <code>xxx-key.zip</code> 文件，请将其中 <code>xxx.pub</code>
的内容复制到这里，然后保存。</p>
</div>
<div class="sect4">
<h5 id="_组织级别签名">组织级别签名</h5>
<div class="paragraph">
<p>签名算法使用 RS256，密钥是刚才下载的密钥，签名内容是
<code>"companyKey": "xxx"</code>，其中 <code>xxx</code>
是组织的短名字，可以在「设置」页面查到：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/介绍/xx_b525a02.png" alt="key.png">
</div>
</div>
<div class="paragraph">
<p>在发送 API 的请求中，需要有个 <code>Authorization</code> 的头，签名生成算法基于
JWT，参考以下示例：</p>
</div>
<div class="paragraph">
<p>JavaScript 示例，使用
<a href="https://github.com/auth0/node-jsonwebtoken">jsonwebtoken</a> 进行签名。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">const</span> <span class="nx">jwt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonwebtoken</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">company-xxx.key</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 刚才下载的密钥，注意这里用的是密钥，不是公钥</span>
<span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span><span class="na">companyKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">xxx</span><span class="dl">'</span><span class="p">},</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="p">{</span><span class="na">algorithm</span><span class="p">:</span> <span class="dl">'</span><span class="s1">RS256</span><span class="dl">'</span><span class="p">});</span> <span class="c1">// 将这里的 xxx 改成签名查到的短名字</span>

<span class="c1">// 接下来是发送 http 请求，在 header 中增加 Authorization，内容是「Bearer 」加上之前的生成的 token，这个 token 应该在每次提交的时候生成，为了避免重放攻击，默认 jwt 中会有 iat 时间戳，爱速搭会拒绝超过 1 分钟的签名</span>
<span class="nx">header</span><span class="p">[</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Bearer </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">token</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>JWT
支持绝大多数语言，具体可以在https://jwt.io/#libraries-io[这里]查找相关语言的库，比如
java 可以用 <a href="https://github.com/auth0/java-jwt">java-jwt</a>，使用其中的
RSA256 算法。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_设置应用级别公钥">设置应用级别公钥</h4>
<div class="paragraph">
<p>应用级别公钥在应用的「应用设置」页面，同样也提供了自动生成功能。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/介绍/image_4d3a04a.png" alt="image.png">
</div>
</div>
<div class="sect4">
<h5 id="_应用级别签名">应用级别签名</h5>
<div class="paragraph">
<p>签名算法使用 RS256，密钥是刚才下载的密钥，签名内容是
<code>"companyKey": "xxx", "appKey": "yyy"</code>，其中 <code>xxx</code>
是组织的短名字，看前面的介绍，而 <code>yyy</code>
是应用短名字，获取方法是在应用设置页：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/API/介绍/image_72d856f.png" alt="Screen Shot.png">
</div>
</div>
<div class="paragraph">
<p>在发送 API 的请求中，需要有个 <code>Authorization</code> 的头，签名生成算法基于
JWT，参考以下示例：</p>
</div>
<div class="paragraph">
<p>JavaScript 示例，使用
<a href="https://github.com/auth0/node-jsonwebtoken">jsonwebtoken</a> 进行签名。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">const</span> <span class="nx">jwt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonwebtoken</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">app-xxx.key</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 这里要用应用级别的密钥</span>
<span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span><span class="na">companyKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">xxx</span><span class="dl">'</span><span class="p">,</span> <span class="na">appKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">yyy</span><span class="dl">'</span><span class="p">},</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">algorithm</span><span class="p">:</span> <span class="dl">'</span><span class="s1">RS256</span><span class="dl">'</span>
<span class="p">});</span> <span class="c1">// 请修改这里的 xxx 和 yyy</span>

<span class="nx">header</span><span class="p">[</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Bearer </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">token</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>JWT
支持绝大多数语言，具体可以在https://jwt.io/#libraries-io[这里]查找相关语言的库，比如
java 可以用 <a href="https://github.com/auth0/java-jwt">java-jwt</a>，使用其中的
RSA256 算法。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_发送提交参数">发送提交参数</h4>
<div class="paragraph">
<p>对于 POST 类型的接口，提交参数需要使用 <strong>JSON</strong> 格式。</p>
</div>
<div class="paragraph">
<p>以 axios 为例</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="nx">axios</span><span class="p">({</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/openapi/xxx</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">hreaders</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer xx</span><span class="dl">'</span> <span class="c1">// 前面生成的签名</span>
  <span class="p">},</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">isuda</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_组织api">组织API</h3>
<div class="paragraph">
<p>组织的接口需要使用组织的密钥才能访问</p>
</div>
<div class="sect3">
<h4 id="_获取应用列表">获取应用列表</h4>
<div class="paragraph">
<p>URL：<code>GET /openapi/company/{组织短名字}/app</code></p>
</div>
<div class="paragraph">
<p>返回内容：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grOwVRwNXG"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用</span><span class="w"> </span><span class="err">id</span><span class="w">
      </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92a54"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">短名字</span><span class="w">
      </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">logo</span><span class="w"> </span><span class="err">图片地址</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"名称"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"描述"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isDraft"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">如果从未发布就是</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_创建应用_2">创建应用</h4>
<div class="paragraph">
<p>URL: <code>POST /openapi/company/{组织短名字}/app</code></p>
</div>
<div class="paragraph">
<p>提交的内容格式</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxx@xx.com"</span><span class="p">,</span><span class="w"> </span><span class="err">//「必填」</span><span class="w"> </span><span class="err">所属用户的邮箱地址</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppName"</span><span class="p">,</span><span class="w"> </span><span class="err">//「必填」</span><span class="w"> </span><span class="err">应用名字</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用短名字，弄个好记的名字，决定应用访问路径</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">描述</span><span class="w">
  </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://xxxx.com/xxx.png"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用</span><span class="w"> </span><span class="err">logo</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_批量导入组织架构">批量导入组织架构</h4>
<div class="paragraph">
<p>URL：<code>POST /openapi/company/{组织短名字}/department/import</code></p>
</div>
<div class="paragraph">
<p>提交内容格式：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"departments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="nl">"部门编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"部门名称"</span><span class="p">:</span><span class="w"> </span><span class="s2">"测试专用组织根部门"</span><span class="p">,</span><span class="w"> </span><span class="nl">"上级部门编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"部门编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="nl">"部门名称"</span><span class="p">:</span><span class="w"> </span><span class="s2">"测试专用组织子部门"</span><span class="p">,</span><span class="w"> </span><span class="nl">"上级部门编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"用户名"</span><span class="p">:</span><span class="w"> </span><span class="s2">"张三"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"邮箱"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zhangsan@xxx.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"手机"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678901"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"昵称"</span><span class="p">:</span><span class="w"> </span><span class="s2">"张三"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"所属部门编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"是否经理"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"第三方登录方式"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"第三方用户ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>提交的字段有两个，一个是部门信息，它是树形结构的，如果上级部门编号是空则代表最顶级部门；另一个是用户列表，其中第三方登录方式主要用于
<code>oauth</code>。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_应用api">应用API</h3>
<div class="sect3">
<h4 id="_整体说明">整体说明</h4>
<div class="paragraph">
<p>应用 API 可以使用组织的密钥或者应用级别密钥。</p>
</div>
<div class="paragraph">
<p>所有接口路径前缀都是
<code>/openapi/company/{组织短名字}/app/{应用短名字}/</code>，需要将路径中的短名字换成实际的值，比如
<code>/openapi/company/50b55/app/6a814/</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_应用整体接口">应用整体接口</h4>
<div class="sect4">
<h5 id="_获取应用下的所有资源">获取应用下的所有资源</h5>
<div class="paragraph">
<p>获取应用下的所有资源，用于外部系统控制爱速搭的权限分配。</p>
</div>
<div class="paragraph">
<p>地址：<code>GET /openapi/company/{组织短名字}/app/{应用短名字}/resources</code></p>
</div>
<div class="paragraph">
<p>返回示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"页面"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k1Jw8ME8Gq"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"页面名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"dataModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据模型"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M9QEWvywp8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据模型名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"dataSource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据源"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k1Jw8ME8Gq"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据源名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"component"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"自定义组件"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LM6wPMEJdb"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"自定义组件名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"APICenter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pezEbloLAB"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"APICenterGroup"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API 分组"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grOwVRwNXG"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"分组名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"角色"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pezEbloLAB"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用管理员"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_角色相关接口">角色相关接口</h4>
<div class="sect4">
<h5 id="_获取应用下的角色列表">获取应用下的角色列表</h5>
<div class="paragraph">
<p>地址：<code>GET /openapi/company/{组织短名字}/app/{应用短名字}/role</code></p>
</div>
<div class="paragraph">
<p>返回示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用管理员"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">角色名称，角色名称在一个应用内不可重名</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pezEbloLAB"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">角色唯一</span><span class="w"> </span><span class="err">id</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"系统自动创建，应用级别角色，只在应用「nw」中可见。"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">描述新</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">这是应用级别</span><span class="w">
        </span><span class="nl">"isBultin"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">是否是默认创建的</span><span class="w">
        </span><span class="nl">"editable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">是否可编辑</span><span class="w">
        </span><span class="nl">"deleteable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">是否可删除</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_创建应用内角色">创建应用内角色</h5>
<div class="paragraph">
<p>地址：<code>Post /openapi/company/{组织短名字}/app/{应用短名字}/role</code></p>
</div>
<div class="paragraph">
<p>提交内容：<code>{"name": "角色名"}</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_删除角色">删除角色</h5>
<div class="paragraph">
<p>地址：<code>Delete /openapi/company/{组织短名字}/app/{应用短名字}/role/{角色 id}</code></p>
</div>
<div class="paragraph">
<p>需要将角色 id 放到 url 中</p>
</div>
</div>
<div class="sect4">
<h5 id="_获取角色中的用户列表">获取角色中的用户列表</h5>
<div class="paragraph">
<p>地址：<code>Get /openapi/company/{组织短名字}/app/{应用短名字}/role/{角色 id}/member</code></p>
</div>
<div class="paragraph">
<p>返回示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">角色下包含的用户类别</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"nickName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">用户昵称</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@yyy.com"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">用户邮箱</span><span class="w">
        </span><span class="nl">"roleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l2pEKAo1Ry"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XdkEyJZMRp"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">用户</span><span class="w"> </span><span class="err">id</span><span class="w">
        </span><span class="nl">"removable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">角色下包含的部门列表</span><span class="w">
    </span><span class="nl">"departments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"roleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l2pEKAo1Ry"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4MDE4xELmX"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="err">id</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"部门名"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">角色下包含的角色列表</span><span class="w">
    </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"roleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l2pEKAo1Ry"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3Y4wzNwQ7P"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"子角色名"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_往角色中添加用户">往角色中添加用户</h5>
<div class="paragraph">
<p>地址：<code>Post /openapi/company/{组织短名字}/app/{应用短名字}/role/{角色 id}/member/user</code></p>
</div>
<div class="paragraph">
<p>提交内容：<code>{"email": "<a href="mailto:xxx@yyy.com">xxx@yyy.com</a>"}</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_往角色中添加角色">往角色中添加角色</h5>
<div class="paragraph">
<p>地址：<code>Post /openapi/company/{组织短名字}/app/{应用短名字}/role/{角色 id}/member/role</code></p>
</div>
<div class="paragraph">
<p>提交内容：<code>{"role": " 角色 ID"}</code></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_权限相关接口">权限相关接口</h4>
<div class="sect4">
<h5 id="_获取应用下有哪些_acl_配置项">获取应用下有哪些 ACL 配置项</h5>
<div class="paragraph">
<p>用于告知第三方爱速搭中有哪些可以配置的权限，比如页面可以配置「可见」、「可写」、「可删」这三项。</p>
</div>
<div class="paragraph">
<p>地址：<code>Get /openapi/company/{组织短名字}/app/{应用短名字}/acl/options</code></p>
</div>
<div class="paragraph">
<p>返回示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"page"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可见"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataModel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可见"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataSource"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可见"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"component"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可见"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"APICenter"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可见"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"调用"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"APICenterGroup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可见"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"role"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可写"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可删"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_设置某个角色所拥有的资源权限">设置某个角色所拥有的资源权限</h5>
<div class="paragraph">
<p>地址：<code>Post /openapi/company/{组织短名字}/app/{应用短名字}/role/{角色 id}/acl/role</code></p>
</div>
<div class="paragraph">
<p>提交内容示例，提交内容是数组，可以同时设置多个资源的权限：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"APICenter"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">修改</span><span class="w"> </span><span class="err">api</span><span class="w"> </span><span class="err">中心的权限</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LM6wPMEJdb"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">对应的</span><span class="w"> </span><span class="err">api</span><span class="w"> </span><span class="err">id</span><span class="w">
    </span><span class="nl">"acl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"call"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"delete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">权限详情，具体某个资源有哪些请参考前面接口返回的内容</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"page"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">修改某个页面的权限</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dl6EgeojP1"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">对应的页面</span><span class="w"> </span><span class="err">id</span><span class="w">
    </span><span class="nl">"acl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">除了前面说到的方式，还可以使用</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">来方便设置这个资源的所有权限</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_获取某个应用可配置的权限点">获取某个应用可配置的权限点</h5>
<div class="paragraph">
<p>地址: <code>Get /openapi/company/{组织短名字}/app/{应用短名字}/acl</code></p>
</div>
<div class="paragraph">
<p>返回参数格式如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"877f21d1cc5a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX应用"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subResources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用访问"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用管理"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"edit"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据管理"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataManage"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"页面"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k1Jw8ME8Gq"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"页面名"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"subResources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可打印"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"print"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"可导出"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"export"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx接口可调用"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api.muEb9u9DdpbaGiFMhWqdjm.call"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="err">//</span><span class="w"> </span><span class="err">页面本身是树形结构的，所以用</span><span class="w"> </span><span class="err">tree</span><span class="w"> </span><span class="err">的格式返回</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"dataModel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据模型"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M9QEWvywp8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据模型名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"dataSource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据源"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k1Jw8ME8Gq"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"数据源名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"component"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"自定义组件"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LM6wPMEJdb"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"自定义组件名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"APICenter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pezEbloLAB"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"APICenterGroup"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API 分组"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grOwVRwNXG"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"分组名"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"角色"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pezEbloLAB"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用管理员"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_获取用户在某个应用中的角色">获取用户在某个应用中的角色</h5>
<div class="paragraph">
<p>地址:
<code>Get /openapi/company/{组织短名字}/app/{应用短名字}/role/member/{用户ID}/roles</code></p>
</div>
<div class="paragraph">
<p>返回参数格式如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"companyId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k1Jw8ME8Gq"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"appId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7dAE5Ko59n"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k1Jw8ME8Gq"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"roleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lKVZOnEBdk"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">角色ID</span><span class="w">
                </span><span class="nl">"roleName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyApp-管理员"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">角色名称</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"roleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dl6EgeojP1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"roleName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyApp-用户"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_私有部署高级功能">私有部署高级功能</h3>
<div class="paragraph">
<p>以下功能是在私有部署版本里才有的</p>
</div>
<div class="sect3">
<h4 id="_自定义登录方式">自定义登录方式</h4>
<div class="paragraph">
<p>目前爱速搭私有版本支持两种方式来对接自己的登录系统。要启用自定义登录方式，需要修改
<code>ISUDA_AUTH_ENABLED_LIST</code> 环境变量。</p>
</div>
<div class="paragraph">
<p>比如：</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ISUDA_AUTH_ENABLED_LIST=email,oauth</pre>
</div>
</div>
<div class="paragraph">
<p>表示同时开启邮箱登录和 oauth 登录，具体登录相关配置请接着往下看。</p>
</div>
<div class="sect4">
<h5 id="_oauth_2_0_登录">oauth 2.0 登录</h5>
<div class="paragraph">
<p>首先请确保 <code>ISUDA_AUTH_ENABLED_LIST</code> 中包含了 oauth。</p>
</div>
<div class="paragraph">
<p>然后配置</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ISUDA_OAUTH_AUTHORIZE_URL</code> 为 oauth 授权地址，通常是 sso
登录地址如：<code><a href="http://xxx.com/login" class="bare">http://xxx.com/login</a></code></p>
</li>
<li>
<p><code>ISUDA_OAUTH_TOKEN_URL</code> 为 oauth 获取 token 的 api 地址。</p>
</li>
<li>
<p><code>ISUDA_OAUTH_CLIENT_ID</code> 为 oauth clientId</p>
</li>
<li>
<p><code>ISUDA_OAUTH_CLIENT_SECRET</code> 为 oauth clientSecret</p>
</li>
<li>
<p><code>ISUDA_OAUTH_SCOPE</code> 默认值为 email</p>
</li>
<li>
<p><code>ISUDA_OAUTH_INFO_URL</code> 获取用户资料的接口地址。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这里 profile 接口返回需要特别说明一下。预期返回结果如下</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oauth Id"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"用户名"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"用户展示名称"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"邮箱地址"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果 profile 不是返回的这个格式，可以通过以下配置来适配。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ISUDA_OAUTH_ID_FIELD</code> 默认为 id 可以修改为如：<code>user.id</code></p>
</li>
<li>
<p><code>ISUDA_OAUTH_NAME_FIELD</code> 默认为 name 同样可以变量路径。</p>
</li>
<li>
<p><code>ISUDA_OAUTH_DISPLAY_FIELD</code> 默认为 displayName 同样可以变量路径。</p>
</li>
<li>
<p><code>ISUDA_OAUTH_EMAIL_FIELD</code> 默认为 email 同样可以变量路径。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果 profile 不能返回 email
则会进入绑定邮箱环节，如果想跳过这个环节，可以配置</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ISUDA_OAUTH_EMAIL_SUFFIX</code> 为 xxx.com 这样，邮箱机会用 name 和
这个值拼接一个。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在申请 oauth 账号的时候如果需要配置回调地址，请填写
<code><a href="http://{{你的域名}}/auth/oauth/callback" class="bare">http://{{你的域名}}/auth/oauth/callback</a></code>。</p>
</div>
<div class="paragraph">
<p>如果退出的时候想同时退出 sso 服务，可以配置:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ISUDA_OAUTH_LOGOUT_URL</code> 为 <a href="http://xxx.com/logout" class="bare">http://xxx.com/logout</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_第三方登录">第三方登录</h5>
<div class="paragraph">
<p>推荐使用 oauth 2.0 方式登录系统，但是如果你们现有的 sso 并不支持 oauth
登录，那么这个简单版登录方式也是可以考虑的。</p>
</div>
<div class="paragraph">
<p>主要有以下配置</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ISUDA_THIRD_AUTH_AUTHORIZE_URL</code>
为第三方登录地址如：http://xxx.com/login?service=\{{callback}}</p>
</li>
<li>
<p><code>ISUDA_THIRD_AUTH_PROFILE_URL</code>
获取用户资料接口如：http://xxx.com/profile?code=\{{code}}</p>
</li>
<li>
<p><code>ISUDA_THIRD_AUTH_CODE_FIELD</code> 默认为 code 可以配置成其他如 ticket</p>
</li>
<li>
<p><code>ISUDA_THIRD_AUTH_LOGOUT_URL</code>
退出地址，如果希望爱速搭退出的时候把第三方登录也退出的话。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>登录流程为：</p>
</div>
<div class="paragraph">
<p>没有登录直接跳配置的第三方登录地址，跳转过去会指定 callback 地址，请通过
<code>{{callback}}</code> 指定，登录成功后，返回 /auth/third?code=xxxxx 然后将 code
作为参数请求配置的 <code>ISUDA_THIRD_AUTH_PROFILE_URL</code>
api，返回用户信息即可完成登录。</p>
</div>
<div class="paragraph">
<p>如果返回 401 code_expired 则自动重新跳转登录</p>
</div>
<div class="paragraph">
<p>如果正常返回</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@xx.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"avatar"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>则会完成登录，完成跳转</p>
</div>
<div class="paragraph">
<p>其他情况则会报错。profile 只有 email 是必须的，其他都可选。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_自定义后端插件">自定义后端插件</h4>
<div class="paragraph">
<p>对于<strong>私有部署</strong>版本，爱速搭支持系统级别后端插件，目前只有扩展签名功能，后续还将不断扩充</p>
</div>
<div class="sect4">
<h5 id="_扩展方法">扩展方法</h5>
<div class="paragraph">
<p>扩展的原理是在 <code>/app/app/amis-saas/addOn</code> 目录下放自己的代码，可以通过
docker 挂载 volumes 的方式来映射本地文件目录，也可以通过将 configs
映射到这个目录下文件的方式。</p>
</div>
<div class="paragraph">
<p>爱速搭在启动的时候，会查找 <code>/app/app/amis-saas/addOn</code> 目录下的所有 <code>.js</code>
文件，然后进行加载，如果还依赖了第三方库，可以在这个目录下 <code>npm i</code>
安装第三方库。</p>
</div>
<div class="paragraph">
<p>如果因为代码原因导致插件加载失败，需要查看 docker 输出的报错信息。</p>
</div>
</div>
<div class="sect4">
<h5 id="_扩展签名算法">扩展签名算法</h5>
<div class="paragraph">
<p>用于「API 中心」的接口新增签名算法，方法是在前面提到的映射目录中新增一个
<code>xx.js</code> 文件，内容如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">const</span> <span class="nx">addon</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../auto-flow/addOn</span><span class="dl">'</span><span class="p">);</span>

<span class="cm">/**
 * 自定义签名算法的实现，它可以在发送前修改任意
 *
 * @parm httpInput 所有请求参数，它有 4 个属性，url、query、header、body，除了 url 之外都是对象的形式，可以对其中的任意值进行修改
 * @parm env 环境变量，在应用设置中设置的环境变量，可以用来获取密钥，这样在开发和发布时就能选择不同的方式了
 * @parm logger 日志，用于调试，在「API 中心」的列表页中点击「调试」
 */</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">mySignature</span><span class="p">(</span><span class="nx">httpInput</span><span class="p">,</span> <span class="nx">env</span><span class="p">,</span> <span class="nx">logger</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">logger</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="nx">env</span><span class="p">);</span> <span class="c1">// 还支持 info/warn/error，这个日志会显示在调试中</span>
  <span class="nx">httpInput</span><span class="p">.</span><span class="nx">header</span><span class="p">[</span><span class="dl">'</span><span class="s1">myHeader</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">my</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 新增一个 header</span>
  <span class="k">delete</span> <span class="nx">httpInput</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="dl">'</span><span class="s1">search</span><span class="dl">'</span><span class="p">];</span> <span class="c1">// 删除某个 query</span>
  <span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">ak</span><span class="p">;</span> <span class="c1">// 获取环境变量中的密钥</span>
  <span class="k">return</span> <span class="nx">httpInput</span><span class="p">;</span> <span class="c1">// 最后返回 httpInput</span>
<span class="p">}</span>

<span class="c1">// 注册自定义签名</span>
<span class="nx">addon</span><span class="p">.</span><span class="nx">registerSignature</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">我的签名</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 前端展现的名称</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mySignature</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 签名的系统标识名（可以不填）</span>
  <span class="na">func</span><span class="p">:</span> <span class="nx">mySignature</span> <span class="c1">// 签名实现函数</span>
<span class="p">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>然后在「API 中心」创建的时候，就可以选择这个签名了，如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/高级功能/自定义后端插件/image_585c248.png" alt="image.png">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_接入统计">接入统计</h4>
<div class="paragraph">
<p>使用部署版本中支持嵌入百度/谷歌统计来统计使用情况。</p>
</div>
<div class="sect4">
<h5 id="_百度统计">百度统计</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>首先去 <code><a href="https://tongji.baidu.com/" class="bare">https://tongji.baidu.com/</a></code>
注册一个帐号，如果不是百度推广客户就选择「百度统计-站长版」</p>
</li>
<li>
<p>然后新增站点
image:::私有部署/tongji_add.png[tongji_add.png]</p>
</li>
<li>
<p>完成后会出现一段代码，复制其中的 token，如下图所示
image:::私有部署/tongji_code.png[tongji_code.png]</p>
</li>
<li>
<p>将环境变量 <code>BAIDU_TONGJI_CODE</code> 的值设置为上面这个 token</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_谷歌统计">谷歌统计</h5>
<div class="paragraph">
<p>谷歌统计，使用环境变量 <code>GA_MEASUREMENT_ID</code>。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_接管发布环境权限">接管发布环境权限</h4>
<div class="sect4">
<h5 id="_配置方法">配置方法</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>配置环境变量 <code>ISUDA_TAKEOVER_RUNTIME_ACL=true</code>
开启可配置发布环境权限接管；</p>
</li>
<li>
<p>在 API 中心，新建一个用于接管权限的接口；</p>
</li>
<li>
<p>来到 <code>应用 &#8594; 应用设置 &#8594; 权限接管接口</code>
选中创建权限托管接口，可配置权限点缓存时间用于调试。</p>
</li>
</ol>
</div>
<div class="sect5">
<h6 id="_组织级别权限接管接口">组织级别权限接管接口</h6>
<div class="paragraph">
<p>该接口主要在工作台，返回用户有权限的应用以及入口。</p>
</div>
<div class="paragraph">
<p>配置方法：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>来到组织界面，设置 &#8594; 基本设置 &#8594; 权限接管 API</p>
</li>
<li>
<p>配置权限接管接口：例如：<code><a href="http://xxxxxxx:8888/api/acl-com" class="bare">http://xxxxxxx:8888/api/acl-com</a></code>，默认为 GET
请求</p>
</li>
<li>
<p>选择自定义签名，需提前注册好自定义签名；</p>
</li>
<li>
<p>添加签名环境变量。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>当用户访问工作台时，爱速搭会 GET
请求该接口，同样经过代理，会附上爱速搭中的
header，详情，这里是组织级别的代理，所以部分应用相关信息会没有，这里主要用到的是下面
header：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x-isuda-oauth-id</code>：oauth id，如果启用了 oauth 登录的话</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>接口返回示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d44c728c77ec"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用的短路径key</span><span class="w">
      </span><span class="nl">"envs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"qa"</span><span class="p">,</span><span class="w"> </span><span class="s2">"latest"</span><span class="p">]</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">当前应用可访问的环境，可选</span><span class="w"> </span><span class="err">dev、qa、sandbox、latest</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d660498b0a1a"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用的短路径key</span><span class="w">
      </span><span class="nl">"envs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"qa"</span><span class="p">]</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">当前应用可访问的环境，可选</span><span class="w"> </span><span class="err">dev、qa、sandbox、latest</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>正确返回后，工作台会显示返回的应用以及对应的环境入口。</p>
</div>
</div>
<div class="sect5">
<h6 id="_应用级别权限接管接口">应用级别权限接管接口</h6>
<div class="paragraph">
<p>访问发布环境应用中，涉及到权限判断时，会请求选中的该 API
中心接口，因为经过了代理，因此请求中会附上爱速搭中的
header，<a href="../%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/%E9%A1%B5%E9%9D%A2%E8%AE%BE%E8%AE%A1/%E6%99%AE%E9%80%9A%E9%A1%B5%E9%9D%A2%E8%AE%BE%E8%AE%A1/API%E5%AF%B9%E6%8E%A5.md#%E4%BB%A3%E7%90%86">详情</a>；这里主要用到以下三个：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x-isuda-appkey</code>，应用短路径</p>
</li>
<li>
<p><code>x-isuda-oauth-id</code>，oauth id，如果启用了 oauth 登录的话</p>
</li>
<li>
<p><code>x-isuda-env</code>，应用环境，开发环境是 <code>dev</code>，也可能是
<code>qa</code>、<code>sandbox`或者`latest</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>接口返回参数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"perms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"app.877f21d1cc5a.read"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用发布环境的访问权限</span><span class="w">
    </span><span class="s2">"app.877f21d1cc5a.edit"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用发布环境的管理权限</span><span class="w">
    </span><span class="s2">"app.877f21d1cc5a.dataManage"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">应用发布环境的数据管理</span><span class="w">

    </span><span class="s2">"page.4Qyw7pEgGd.read"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">页面的可读权限</span><span class="w">
    </span><span class="s2">"page.4Qyw7pEgGd.print"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">比如添加了一个自定义权限标识为「print」</span><span class="w">
    </span><span class="s2">"page.4Qyw7pEgGd.export"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">比如添加了一个自定义权限标识为「export」</span><span class="w">

    </span><span class="err">//</span><span class="w"> </span><span class="err">页面内api的调用权限</span><span class="w">
    </span><span class="s2">"page.4Qyw7pEgGd.api.2iowtJ2eJUyBxj6HTSxSjW.call"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="s2">"2iowtJ2eJUyBxj6HTSxSjW"</span><span class="w"> </span><span class="err">为页面内</span><span class="w"> </span><span class="err">api</span><span class="w"> </span><span class="err">的</span><span class="w"> </span><span class="err">key</span><span class="w">
    </span><span class="s2">"page.4Qyw7pEgGd.api.muEb9u9DdpbaGiFMhWqdjm.    call"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="s2">"muEb9u9DdpbaGiFMhWqdjm"</span><span class="w"> </span><span class="err">为页面内</span><span class="w"> </span><span class="err">api</span><span class="w"> </span><span class="err">的</span><span class="w"> </span><span class="err">key</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>返回参数格式：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>perms</code>：页面权限点数组，权限点格式是：</p>
<div class="ulist">
<ul>
<li>
<p>页面的权限点：<code>「page:pageId:aclValue」</code></p>
<div class="ulist">
<ul>
<li>
<p><code>pageId</code>：页面的 hashId</p>
</li>
<li>
<p><code>aclValue</code>：具体的权限能力点，例如：read、print、api:xxx:call 等</p>
</li>
</ul>
</div>
</li>
<li>
<p>应用的权限点：<code>「app:appKey:aclValue」</code></p>
<div class="ulist">
<ul>
<li>
<p><code>appKey</code>：app 的 key</p>
</li>
<li>
<p><code>aclValue</code>：具体的权限能力点，例如：read、edit、dataManage</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>备注：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>支持以 <code>.</code> 为分隔符</p>
</li>
<li>
<p>支持 <code><strong></code> 通配符的能力 类似 <code>app:877f21d1cc5a:</strong></code>
会递归，甚至可以支持根节点</p>
</li>
<li>
<p>权限点和描述必须要有</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>可以通过 openApi:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>获取页面相关权限信息：<a href="../OpenAPI/%E5%BA%94%E7%94%A8.md">接口</a></p>
</li>
<li>
<p>获取应用下可配置权限点：<a href="../OpenAPI/%E5%BA%94%E7%94%A8.md#%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%AA%E5%BA%94%E7%94%A8%E5%8F%AF%E9%85%8D%E7%BD%AE%E7%9A%84%E6%9D%83%E9%99%90%E7%82%B9">接口</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_平台间应用同步">平台间应用同步</h4>
<div class="paragraph">
<p>通常爱速搭平台只会部署一份，如果因为网络隔离或者什么原因需要部署多套就会存在应用在多个平台间流转的需求。通过以下配置可以达到这样一个效果：从平台
A
的应用发布页面，出现同步按钮，点击后勾选需要同步到的目标平台，一键点击完成同步。在同步之前请确保同名组织已经在目标平台创建，同步过去的新资源会自动关联组织创建者。</p>
</div>
<div class="sect4">
<h5 id="_使用流程_2">使用流程</h5>
<div class="paragraph">
<p>在其中一个平台配置 docker 环境变量。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ISUDA_SYNC_SERVICES=&lt;本地环境&gt;http://xxx.xxx.xxx.xxx:8089/api/import,&lt;沙盒环境&gt;http://xxx.yyy.com:8818/api/import

# 选填
ISUDA_SYNC_PACKAGE_SECRET=xxx</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ISUDA_SYNC_SERVICES</code>:
配置可同步到的目标平台信息。可以是多个。多个环境用逗号隔开。值格式说明：<code>&lt;目标环境平台&gt;接收数据接口</code>。既是关联其他环境的配置，也是功能开关，没这个配置不要开启此功能</p>
</li>
<li>
<p><code>ISUDA_SYNC_PACKAGE_SECRET</code>: zip
秘钥，导出的时候用来加密，导入的时候用来解密。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在目标接受的平台同样需要配置环境变量，不过只需要配置
<code>ISUDA_SYNC_PACKAGE_SECRET</code>，请保持一致，否则导入会失败。</p>
</div>
</div>
<div class="sect4">
<h5 id="_场景说明">场景说明</h5>
<div class="sect5">
<h6 id="_平台后端可连通">平台后端可连通</h6>
<div class="paragraph">
<p>平台 A 中 <code>ISUDA_SYNC_SERVICES</code> 配置的接收接口配置成 平台 B
的导入接口，一般是 <code>HOST/api/import</code>。</p>
</div>
</div>
<div class="sect5">
<h6 id="_平台后端不可联通">平台后端不可联通</h6>
<div class="paragraph">
<p>平台 A 中 <code>ISUDA_SYNC_SERVICES</code>
配置的接收接口配置成业务方自己的接口，后续业务方解决联通问题后再调用平台导入接口。</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_更新记录">更新记录</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_版本记录">版本记录</h3>
<div class="sect3">
<h4 id="_1_1_172020_07_22">1.1.17（2020-07-22）</h4>
<div class="ulist">
<ul>
<li>
<p>优化页面、数据源等实体的查询性能</p>
</li>
<li>
<p>平台支持在子目录下运行，方便嵌入到已有域名下</p>
</li>
<li>
<p>优化模型字段默认值校验</p>
</li>
<li>
<p>工作台也支持按名称搜索</p>
</li>
<li>
<p>api 编排增加用户信息数据方便做权限校验</p>
</li>
<li>
<p>api 编排真假数据映射节点，用于获取部门名称数据</p>
</li>
<li>
<p>增加 api 编排中 script 脚本的内存限制</p>
</li>
<li>
<p>jssdk 自动获取所在域名</p>
</li>
<li>
<p>模型地址支持配置是否显示行政区划分代码</p>
</li>
<li>
<p>应用重命名时自动重命名内置角色名前缀</p>
</li>
<li>
<p>问题修复</p>
<div class="ulist">
<ul>
<li>
<p>修复导入应用的时候应用配置不生效问题</p>
</li>
<li>
<p>修复模型页面在新主题下的展现问题</p>
</li>
<li>
<p>可视化编辑器关闭页面跳转避免无法二次编辑</p>
</li>
<li>
<p>修复获取角色中用户 id 不正确问题</p>
</li>
<li>
<p>复模型组件多行文本展示</p>
</li>
<li>
<p>修复列模型组件中列重命名导致清除数据问题</p>
</li>
<li>
<p>修复导入应用内置模型没有标记为同步的问题</p>
</li>
<li>
<p>修复可视化编辑器权限无法删除问题</p>
</li>
<li>
<p>修复树形组件父节点无法添加问题</p>
</li>
<li>
<p>模型资源禁止匿名访问</p>
</li>
<li>
<p>修复 excel 上传中数据类型识别不正确问题</p>
</li>
<li>
<p>修复 nav 中的 to 属性被代理问题</p>
</li>
<li>
<p>修复视频地址被代理问题</p>
</li>
<li>
<p>jssdk 中的自定义组件问题</p>
</li>
<li>
<p>jssdk 兼容 S3</p>
</li>
<li>
<p>jssdk 导出没有主题</p>
</li>
<li>
<p>修复模型表单及模型组件的 amis 1.2 兼容性问题</p>
</li>
<li>
<p>修复相同 url 地址无法新窗口打开问题</p>
</li>
<li>
<p>自定义组件解析问题</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>此版本有数据库变更，如果帐号没有 DDL 权限，请先运行如下 SQL</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_2eb0a70313ee3200f3d7994002`</span> <span class="k">ON</span> <span class="nv">`data_source`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_1ab3c62692fefd2142db31bf03`</span> <span class="k">ON</span> <span class="nv">`data_model`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_37284c70a0f4b037bded614864`</span> <span class="k">ON</span> <span class="nv">`page`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_32a80fcfa8e05e8b216fbdf837`</span> <span class="k">ON</span> <span class="nv">`application_release`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_93802b23afda0ebfe3cad7a4e8`</span> <span class="k">ON</span> <span class="nv">`flow_record`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_f6843b4dcf1ce21398e42a1204`</span> <span class="k">ON</span> <span class="nv">`component`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_4c0470a156a0a9aec8beb7cf83`</span> <span class="k">ON</span> <span class="nv">`api_center_group`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_b3d2cfd82950a83ec502e3e811`</span> <span class="k">ON</span> <span class="nv">`api_center`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_7696d8bea709f10847431f7106`</span> <span class="k">ON</span> <span class="nv">`object_storage`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_2f8a008da494713ad4a7c30cb6`</span> <span class="k">ON</span> <span class="nv">`application_runtime`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="nv">`IDX_af7abd1d8f106d158a1f304381`</span> <span class="k">ON</span> <span class="nv">`object_storage_upload_history`</span> <span class="p">(</span><span class="nv">`app_id`</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_162021_07_09">1.1.16（2021-07-09）</h4>
<div class="ulist">
<ul>
<li>
<p>支持跨平台同步应用</p>
</li>
<li>
<p>后台日志功能支持查询</p>
</li>
<li>
<p>应用发布支持版本对比</p>
</li>
<li>
<p>API 编排增加编码转换节点、增加调用其他 API 的节点、增加 delete
方法、增加编码转换节点、设置变量支持数据类型</p>
</li>
<li>
<p>支持自定义基础主题，可以切换到仿 antd</p>
</li>
<li>
<p>优化应用发布时的 SQL 查询性能</p>
</li>
<li>
<p>优化页面加载性能</p>
</li>
<li>
<p>支持日志使用 JSON 格式输出</p>
</li>
<li>
<p>openapi 增加获取用户在应用内角色功能</p>
</li>
<li>
<p>表名长度限制从 20 增加到 64</p>
</li>
<li>
<p>amis 升级到
1.2.1，细节参考https://github.com/baidu/amis/releases[这里]</p>
</li>
<li>
<p>问题修复</p>
<div class="ulist">
<ul>
<li>
<p>修复应用初始化接口返回结果可能为空的问题</p>
</li>
<li>
<p>优化加载性能，避免编辑器提前加载</p>
</li>
<li>
<p>修复组织架构导入文件名不支持括号问题</p>
</li>
<li>
<p>避免替换 redirect 地址导致无法调整</p>
</li>
<li>
<p>修复文件上传可能的漏洞</p>
</li>
<li>
<p>JSSDK 相关问题修复</p>
</li>
<li>
<p>修复自定义组件在编辑器中的加载问题</p>
</li>
<li>
<p>修复整形组件范围报错问题</p>
</li>
<li>
<p>可视化编辑器修复表单容器、table 等问题</p>
</li>
<li>
<p>api 编排 sql 节点使用 key 来支持导出</p>
</li>
<li>
<p>修复 api 编排 sql 节点不返回结果时的报错</p>
</li>
<li>
<p>修复页面自定义权限导入失效问题</p>
</li>
<li>
<p>修复微信重定向问题</p>
</li>
<li>
<p>修复切换为 antd 主题时无法编辑自定义组件问题</p>
</li>
<li>
<p>修复页面水印太短问题</p>
</li>
<li>
<p>修复多对一模型导出时无法再导入问题</p>
</li>
<li>
<p>修复登录样式问题</p>
</li>
<li>
<p>用户数据库报错不再自动跳转到数据库更新页面</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_152021_06_21">1.1.15（2021-06-21）</h4>
<div class="ulist">
<ul>
<li>
<p>API 中心支持 mock 功能。</p>
</li>
<li>
<p>开发环境支持模拟角色功能。</p>
</li>
<li>
<p>修复 header 透传设置对 cookie 不生效问题。</p>
</li>
<li>
<p>自动和手动模式下的数据模型开启树形结构支持。</p>
</li>
<li>
<p>修复一个可能修改首页父节点导致所有页面无法显示的问题。</p>
</li>
<li>
<p>默认开启 cluster 模式。</p>
</li>
<li>
<p>页面支持导出 JSSDK 功能。</p>
</li>
<li>
<p>FieldSet 支持 <code>disabled</code> 配置。</p>
</li>
<li>
<p>amis 升级</p>
<div class="ulist">
<ul>
<li>
<p>number 最大最小值的优化</p>
</li>
<li>
<p>修复 File <code>disabled</code> 失效问题</p>
</li>
<li>
<p>修复 select 高亮问题</p>
</li>
<li>
<p>fieldSet 补充 disabled</p>
</li>
<li>
<p>jssdk 支持 hash 路由</p>
</li>
</ul>
</div>
</li>
<li>
<p>编辑器升级</p>
<div class="ulist">
<ul>
<li>
<p>修复 crud 脚手架删除操作不生效问题</p>
</li>
<li>
<p>修复代码编辑器可能无法滚动问题</p>
</li>
</ul>
</div>
</li>
<li>
<p>修复 samesite cookie 问题。</p>
</li>
<li>
<p>修复已发布应用导出时数据源丢失问题。</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>此版本有数据库变更，如果帐号没有 DDL 权限，请先运行如下 SQL</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`api_center`</span> <span class="k">ADD</span> <span class="nv">`mock`</span> <span class="nb">mediumtext</span> <span class="k">NULL</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`jssdk_export_log`</span> <span class="p">(</span><span class="nv">`id`</span> <span class="nb">bigint</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="nv">`created_at`</span> <span class="nb">timestamp</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="nv">`updated_at`</span> <span class="nb">timestamp</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="nv">`deleted_at`</span> <span class="nb">timestamp</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">`created_by`</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">`updated_by`</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="s1">'0'</span><span class="p">,</span> <span class="nv">`deleted_by`</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="s1">'0'</span><span class="p">,</span> <span class="nv">`p_id`</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="s1">'0'</span><span class="p">,</span> <span class="nv">`page_hash_id`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">`version`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">`resource`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">`env`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">`a_id`</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="s1">'0'</span><span class="p">,</span> <span class="nv">`c_id`</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="s1">'0'</span><span class="p">,</span> <span class="nv">`operator`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">))</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_142021_06_10">1.1.14（2021-06-10）</h4>
<div class="ulist">
<ul>
<li>
<p>新增「API 编排」功能，可以将多个接口的结果聚合起来输出。</p>
</li>
<li>
<p>新增输出「JSSDK」功能，可以将爱速搭页面嵌入到其它地方。(如果要支持 API
Center 接口转发请参考 ISUDA_COOKIE_SAMESITE 设置)</p>
</li>
<li>
<p>应用新增初始化接口，接口会在应用初次打开的时候加载，返回的数据可用在应用内所有页面中，通过
<code>app.xxx</code> 来获取（xxx 是接口返回的数据）。</p>
</li>
<li>
<p>超管后台优化，增加「模板」、「应用」、「数据库日志」、「平台文档」及「License
信息」的展示。</p>
</li>
<li>
<p>角色中的部门数据改成异步加载提升性能。</p>
</li>
<li>
<p>修复编辑器手机预览没有 helper css 问题。</p>
</li>
<li>
<p>修复自定义组件旧数据编译失败问题</p>
</li>
<li>
<p>修复 number 输入框 min max 值依然存在超出的问题</p>
</li>
<li>
<p>修复页面历史版本排序问题</p>
</li>
<li>
<p>修复应用发布时，各环境版本默认值未递增的问题</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>「JSSDK」打通 api Center 接口还需要以下几个操作。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>首先必须是 https，并且确保有 header <code>X-Forwarded-Proto: https</code>
透传到实例。</p>
</li>
<li>
<p>配置 docker env ISUDA_COOKIE_SAMESITE 为 none</p>
</li>
<li>
<p>应用设置中将使用 jssdk 的站点 host 信息填入到允许跨域站点列表中如：
<code><a href="http://yousite.com" class="bare">http://yousite.com</a></code></p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>此版本有数据库变更，如果帐号没有 DDL 权限，请先运行如下 SQL</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`component_revision`</span> <span class="k">ADD</span> <span class="nv">`entry`</span> <span class="n">json</span> <span class="k">NULL</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`component_revision`</span> <span class="k">ADD</span> <span class="nv">`files`</span> <span class="n">json</span> <span class="k">NULL</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_132021_06_02">1.1.13（2021-06-02）</h4>
<div class="ulist">
<ul>
<li>
<p>优化部门树加载性能</p>
</li>
<li>
<p>修复编辑首页可能导致所有页面展现丢失问题</p>
</li>
<li>
<p>修复发正式环境不出现 api 中心资源权限配置问题</p>
</li>
<li>
<p>添加电话、手机、邮编、身份证号验证器</p>
</li>
<li>
<p>用户加入角色不自动加入顶级部门</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_122021_06_01">1.1.12（2021-06-01）</h4>
<div class="ulist">
<ul>
<li>
<p>页面添加水印开关</p>
</li>
<li>
<p>分享页面携带当前页面参数</p>
</li>
<li>
<p>对象存储支持 oss</p>
</li>
<li>
<p>自定义组件支持样式文件和编辑器插件扩充功能</p>
</li>
<li>
<p>api 中心调用权限调整为附属页面下面配置</p>
</li>
<li>
<p>api 中心添加查看使用页面列表功能</p>
</li>
<li>
<p>支持配置发布环境权限接管接口</p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>fix: toolbar 设置 align 为 left 不生效问题</p>
</li>
<li>
<p>修复初始状态 autoFill 不同步的问题</p>
</li>
<li>
<p>按钮 tooltip 整理 支持 disabledTip, dropdown 下面的按钮也支持</p>
</li>
<li>
<p>wizard 支持 startStep 配置初始步骤</p>
</li>
<li>
<p>内置 map filter</p>
</li>
<li>
<p>评分组件支持 clear</p>
</li>
<li>
<p>wrapper 组件支持动态样式设置</p>
</li>
<li>
<p>修复超级表头合表格固顶组合使用列宽度对应不上的问题</p>
</li>
<li>
<p>修复倒计时中，仍可以执行 action 问题；</p>
</li>
<li>
<p>升级 monaco-editor</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>此版本有数据库变更，如果帐号没有 DDL 权限，请先运行如下 SQL</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`component`</span> <span class="k">ADD</span> <span class="nv">`entry`</span> <span class="n">json</span> <span class="k">NULL</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`component`</span> <span class="k">ADD</span> <span class="nv">`files`</span> <span class="n">json</span> <span class="k">NULL</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`page`</span> <span class="k">ADD</span> <span class="nv">`config`</span> <span class="n">json</span> <span class="k">NULL</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`template`</span> <span class="k">ADD</span> <span class="nv">`key`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NULL</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`template`</span> <span class="k">ADD</span> <span class="nv">`meta`</span> <span class="nb">longblob</span> <span class="k">NULL</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_112021_05_21">1.1.11（2021-05-21）</h4>
<div class="ulist">
<ul>
<li>
<p>左侧导航支持自定义 icon</p>
</li>
<li>
<p>api 中心支持显示 api 使用情况</p>
</li>
<li>
<p>可视化编辑器支持设置多选框值的格式，可切换到数字和布尔类型</p>
</li>
<li>
<p>修复记录时间和记录操作人无效问题</p>
</li>
<li>
<p>兼容之前的数据模型接口</p>
</li>
<li>
<p>修复数据源管理中动态列导致渲染问题</p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>Checkboxes 分组样式优化</p>
</li>
<li>
<p>tree 组件问题修复</p>
</li>
<li>
<p>日期时间范围下拉增加 popoverClassName
属性，修复父级有缩放比时弹框宽度计算问题</p>
</li>
<li>
<p>数据映射的 key 可以支持 . 或者 [] 来指定路径</p>
</li>
<li>
<p>修复 transfer 的 selectTitle 和 resultTitle 不生效问题</p>
</li>
<li>
<p>修复 uuid 有值时不设置, 没值自动设置</p>
</li>
<li>
<p>修复置灰效果不明显问题</p>
</li>
<li>
<p>tabs 的 activeKey 支持变量</p>
</li>
<li>
<p>去掉 tab line 模式下顶部的 padding</p>
</li>
<li>
<p>each 组件空状态时文字居左，同时将空数组状态也认为是空状态</p>
</li>
<li>
<p>支持 cookie 获取</p>
</li>
<li>
<p>修复表单联合校验问题</p>
</li>
<li>
<p>修复 image overlay tooltip 被遮挡问题</p>
</li>
<li>
<p>修复图片表单项 disabled 影响放大功能的问题</p>
</li>
<li>
<p>修复多行文本最小行数限制、静态展示超出问题</p>
</li>
<li>
<p>远端校验显示报错时，可以再次提交</p>
</li>
<li>
<p>nav 父节点的 unfolded 需要依赖子节点的 active</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_102021_05_13">1.1.10（2021-05-13）</h4>
<div class="ulist">
<ul>
<li>
<p>新增环境变量 <code>ISUDA_PLATFORM_ADMINISTRATORS</code> 可以指定平台级别管理员</p>
</li>
<li>
<p>修复私有部署版本迁移组织架构迁移中的部门迁移问题</p>
</li>
<li>
<p>修复添加字段时可能出现数据源无法找到问题</p>
</li>
<li>
<p>修复页面编辑锁未释放问题</p>
</li>
<li>
<p>修复文件上传不支持数据库问题、支持带空格的文件名上传</p>
</li>
<li>
<p>修复安装时由于缓存导致跳转失败的问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_92021_05_12">1.1.9（2021-05-12）</h4>
<div class="ulist">
<ul>
<li>
<p>API 中心支持自定义标识</p>
</li>
<li>
<p>API 中心的最终展现地址修改，可以实现自己拼接 URL</p>
</li>
<li>
<p>模型编辑中的字段支持设置显示名称</p>
</li>
<li>
<p>编辑器中的图片支持上传图片</p>
</li>
<li>
<p>支持更换 favicon 和站点标题</p>
</li>
<li>
<p>优化在大量部门及用户场景下的性能</p>
</li>
<li>
<p>角色中的用户支持批量删除</p>
</li>
<li>
<p>优化组织设置页面</p>
</li>
<li>
<p>markdown 支持 HTML 片段</p>
</li>
<li>
<p>修复被 iframe 嵌入时 crud 固顶问题</p>
</li>
<li>
<p>修复发布报错</p>
</li>
<li>
<p>修复发送适配器导致文件域内容被清楚的问题</p>
</li>
<li>
<p>新增配置环境变量，控制发布时是否覆盖运行态资源权限：<code>ISUDA_OVERWRITE_RUNTIME_ACL</code></p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>autoFill 支持 multiple 模式</p>
</li>
<li>
<p>Select 组件自定义菜单模式下无法全选问题修复</p>
</li>
<li>
<p>tree-select 也支持懒加载</p>
</li>
<li>
<p>excel 导出支持自定义文件名</p>
</li>
<li>
<p>兼容多种 json 返回格式</p>
</li>
<li>
<p>crud filterable 数字类型不显示重置按钮的问题修复</p>
</li>
<li>
<p>number 最大值最小值支持配置浮点型</p>
</li>
<li>
<p>日期选择快捷键新增上个月底</p>
</li>
<li>
<p>crud 最后一个 toolbar 去掉默认居右的设定</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_82021_05_07">1.1.8（2021-05-07）</h4>
<div class="ulist">
<ul>
<li>
<p>升级 editor 版本修复样式选择器的展现问题</p>
</li>
<li>
<p>API 中心支持不标准的 json 格式（比如最后多了个逗号）</p>
</li>
<li>
<p>API 中心支持自定义脚本来进行结果转换</p>
</li>
<li>
<p>嵌入外部页面支持相对地址</p>
</li>
<li>
<p>修复模型列表排序功能无效问题</p>
</li>
<li>
<p>修复分享页面无法自定义样式功能</p>
</li>
<li>
<p>修复可能导致卡顿的问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_72021_04_29">1.1.7（2021-04-29）</h4>
<div class="ulist">
<ul>
<li>
<p>合入 1.0.66 所有修改</p>
</li>
<li>
<p>全量导入改成批量</p>
</li>
<li>
<p>修复登录跳转失效问题</p>
</li>
<li>
<p>修复导入旧应用可能失败的问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_62021_04_27">1.1.6（2021-04-27）</h4>
<div class="ulist">
<ul>
<li>
<p>合入 1.0.65 所有修改</p>
</li>
<li>
<p>支持多主节点 MySQL Group Replication 部署</p>
</li>
<li>
<p>API 中心支持基于 Swagger 导入</p>
</li>
<li>
<p>修复创建新应用后，第一次进入应用，左侧导航栏缺失问题</p>
</li>
<li>
<p>工作台中，无权限环境不显示对应入口</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_52021_04_25">1.1.5（2021-04-25）</h4>
<div class="ulist">
<ul>
<li>
<p>合入 1.0.64 所有修改</p>
</li>
<li>
<p>支持页面内权限设置</p>
</li>
<li>
<p>新增「对象存储」功能，可配置应用级别的对象存储</p>
</li>
<li>
<p>新增「生成独立前端应用」功能</p>
</li>
<li>
<p>在非开发环境也显示「数据管理」、「应用设置」和「权限配置」，可以独立管理这些环境的配置</p>
</li>
<li>
<p>报错提示更加友好，并严格区分不同报错的状态码</p>
</li>
<li>
<p>修复旧应用重复导入全局角色问题</p>
</li>
<li>
<p>修复无法清空数据问题</p>
</li>
<li>
<p>修复模型预览、分享页和普通页面 scaffold 找不到问题</p>
</li>
<li>
<p>修复自定义组件搜索失效问题</p>
</li>
<li>
<p>修复浮点数和整数类型错误</p>
</li>
<li>
<p>修复修改应用基本设置，左侧导航栏没更新问题</p>
</li>
<li>
<p>修复发布时默认权限问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_42021_04_14">1.1.4（2021-04-14）</h4>
<div class="ulist">
<ul>
<li>
<p>合入 1.0.58</p>
</li>
<li>
<p>修复导入应用时有关系会失败的问题</p>
</li>
<li>
<p>修复发布时环境变量不显示问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_32021_04_13">1.1.3（2021-04-13）</h4>
<div class="ulist">
<ul>
<li>
<p>合入 1.0.57 修改</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_22021_04_12">1.1.2（2021-04-12）</h4>
<div class="ulist">
<ul>
<li>
<p>合入 1.0.56 所有修改</p>
</li>
<li>
<p>新增主题编辑功能</p>
</li>
<li>
<p>支持人员字段检索</p>
</li>
<li>
<p>修复旧应用文件导入报错</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_1_12021_04_07">1.1.1（2021-04-07）</h4>
<div class="paragraph">
<p>MySQL 版本具备 Postgres
版本除了流程以外的所有功能，流程功能将会在重构后开放，它们之间的区别请参考</p>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_672020_05_07">1.0.67（2020-05-07）</h4>
<div class="ulist">
<ul>
<li>
<p>增加存储导出功能，用于 MySQL 版本迁移</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_662021_04_29">1.0.66（2021-04-29）</h4>
<div class="ulist">
<ul>
<li>
<p>修复弹框中的编辑器无法插入链接图片等功能</p>
</li>
<li>
<p>修复导出接口可能报错的问题</p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>修复 list placeholder 问题</p>
</li>
<li>
<p>修复弹框 ajax 行为无效问题</p>
</li>
<li>
<p>调整日期按钮顺序，和 dialog 统一</p>
</li>
<li>
<p>升级 ECharts 到 5.1.1</p>
</li>
<li>
<p>优化 disabled 下按钮组的显示效果</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_652021_04_27">1.0.65（2021-04-27）</h4>
<div class="ulist">
<ul>
<li>
<p>修复 api 中心接口预览报错问题</p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>修复 Excel 导出问题</p>
</li>
<li>
<p>修复链接按钮在表单中的垂直对齐问题</p>
</li>
<li>
<p>修复部分表单组件的 disabled 不生效问题</p>
</li>
<li>
<p>修复 color 组件值为 null 时的报错</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_642021_04_25">1.0.64（2021-04-25）</h4>
<div class="ulist">
<ul>
<li>
<p>增加 api 请求耗时统计方便分析性能问题</p>
</li>
<li>
<p>避免更新 license 的时候清空 redis 数据库</p>
</li>
<li>
<p>修复 API 中心的数据有循环引用导致的问题</p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>修复部分表单项 disabled 不生效问题</p>
</li>
<li>
<p>修复 color 组件值为 null 时报错</p>
</li>
<li>
<p>修复 maxLength 校验内容为数字时不一致问题</p>
</li>
<li>
<p>修复表格展开收起可能曝出偶问题</p>
</li>
<li>
<p>修复 loading 没传总是显示加载的问题</p>
</li>
<li>
<p>修复页面同时有和没有 lazySchema 的 Dialog 场景</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_632021_04_23">1.0.63（2021-04-23）</h4>
<div class="ulist">
<ul>
<li>
<p>修复导航页面文件夹下缩进问题</p>
</li>
<li>
<p>修复压缩代码导致的文件下载保存文件名不正确问题</p>
</li>
<li>
<p>修复页面编辑模式 api 路径拼接出现双斜杠问题</p>
</li>
<li>
<p>组织架构改成懒加载模式</p>
</li>
<li>
<p>修复子角色获取问题</p>
</li>
<li>
<p>升级 amis</p>
<div class="ulist">
<ul>
<li>
<p>修复 formitem 的 source 接口错误不显示 msg 问题</p>
</li>
<li>
<p>excel 支持接口导出</p>
</li>
<li>
<p>Nav 组件支持懒加载</p>
</li>
<li>
<p>Tree 组件支持懒加载，并优化搭配新增节点功能只刷新懒加载节点</p>
</li>
<li>
<p>action 支持发送 Email</p>
</li>
</ul>
</div>
</li>
<li>
<p>升级 amis-editor</p>
<div class="ulist">
<ul>
<li>
<p>修复拖入 tabs 代码压缩后区域没有显示的问题</p>
</li>
<li>
<p>修复拖入增删改查没有呼出脚手架的问题</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_622021_04_20">1.0.62（2021-04-20）</h4>
<div class="ulist">
<ul>
<li>
<p>补充 es 写入日志便于定位问题</p>
</li>
<li>
<p>修复权限配置保存按钮样式问题</p>
</li>
<li>
<p>修复环境变量发布时替换原始环境变量导致的环境变量增多的问题</p>
</li>
<li>
<p>HTTPAction 的 dns 支持缓存</p>
</li>
<li>
<p>隐藏页面即便处于当前页面,也不再导航中显示</p>
</li>
<li>
<p>修复 filter 参数中存在变量过滤失败的问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_602021_04_19">1.0.60（2021-04-19）</h4>
<div class="ulist">
<ul>
<li>
<p>升级 font awesome 到 5，支持更多 icon</p>
</li>
<li>
<p>更新 amis 版本</p>
<div class="ulist">
<ul>
<li>
<p>支持 markdown 渲染</p>
</li>
<li>
<p>更新 ECharts 版本到 5.0.2</p>
</li>
<li>
<p>filter 支持对象转数组</p>
</li>
<li>
<p>修复 perPage 如果是字符串会导致渲染报错问题</p>
</li>
</ul>
</div>
</li>
<li>
<p>代理的用户名进行编码避免报错</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_592021_04_15">1.0.59（2021-04-15）</h4>
<div class="ulist">
<ul>
<li>
<p>支持通过环境变量判断是否是 https</p>
</li>
<li>
<p>支持配置 Google Analytics 环境变量 GA_MEASUREMENT_ID</p>
</li>
<li>
<p>页面编辑按钮放右侧垂直居中避免遮挡功能</p>
</li>
<li>
<p>上传文件保留原始文件名</p>
</li>
<li>
<p>修复连线条件分支日期字段点击没有效果的问题</p>
</li>
<li>
<p>关系字段,流程中也可以编辑,作为摘要</p>
</li>
<li>
<p>更新 amis 版本</p>
<div class="ulist">
<ul>
<li>
<p>修复 Range 值异常问题</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_582021_04_14">1.0.58（2021-04-14）</h4>
<div class="ulist">
<ul>
<li>
<p>API 中心里的接口调试会保存每个接口的输入</p>
</li>
<li>
<p>报错时显示 url 方便排查</p>
</li>
<li>
<p>更新 amis 版本</p>
<div class="ulist">
<ul>
<li>
<p>steps 的 title、subTitle、description 支持变量</p>
</li>
<li>
<p>变量可读取 localStorage 和 sessionStorage 里的数据</p>
</li>
</ul>
</div>
</li>
<li>
<p>修复文件下载乱码问题</p>
</li>
<li>
<p>修复发布页面在没有昵称时不显示发布人问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_572021_04_13">1.0.57（2021-04-13）</h4>
<div class="ulist">
<ul>
<li>
<p>升级 amis 和 editor</p>
<div class="ulist">
<ul>
<li>
<p>新增 Steps 组件</p>
</li>
<li>
<p>修复上传文件无法下载问题</p>
</li>
<li>
<p>CRUD 支持数据接口返回动态列配置</p>
</li>
<li>
<p>condition-builder 支持 fieldClassName 控制输入框样式</p>
</li>
<li>
<p>iframe src 支持使用变量</p>
</li>
<li>
<p>NestedSelect 无结果时显示文本</p>
</li>
<li>
<p>表单支持禁用回车提交</p>
</li>
<li>
<p>修复弹窗时页面抖动问题</p>
</li>
</ul>
</div>
</li>
<li>
<p>api 调试保存之前的输入信息</p>
</li>
<li>
<p>npm 包允许输入</p>
</li>
<li>
<p>oauth 支持 displayName</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_562021_04_12">1.0.56（2021-04-12）</h4>
<div class="ulist">
<ul>
<li>
<p>公告关闭后刷新页面不再打开</p>
</li>
<li>
<p>编辑器上传支持从 api 选择、支持 responseData 编辑</p>
</li>
<li>
<p>升级 amis 到最新 master 版本</p>
</li>
<li>
<p>带流程的模型也可删除</p>
</li>
<li>
<p>优化版本发布性能，避免同步接口导致影响其他请求</p>
</li>
<li>
<p>修复普通页面的富文本编辑器无法上传图片问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_552021_04_08">1.0.55（2021-04-08）</h4>
<div class="ulist">
<ul>
<li>
<p>新增环境变量 ISUDA_DISABLE_EXPORT_SENSITIVE_INFO 设置后导出应用将删除 DB 敏感信息</p>
</li>
<li>
<p>组织管理页面新增公告设置功能</p>
</li>
<li>
<p>condition-builder 支持接口返回 fields 字段配置</p>
</li>
<li>
<p>表格快速编辑功能支持嵌套用法组合使用</p>
</li>
<li>
<p>表格总计行错乱问题修复</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_542021_04_07">1.0.54（2021-04-07）</h4>
<div class="ulist">
<ul>
<li>
<p>amis 和 editor 升级最新版</p>
</li>
<li>
<p>编辑器 crud 脚手架丰富</p>
</li>
<li>
<p>API 支持文件上传</p>
</li>
<li>
<p>HTTP 接口转换支持转 JSON 功能</p>
</li>
<li>
<p>直接显示后端 400 以上状态码的所有报错信息</p>
</li>
<li>
<p>修复查询人员信息组件展现问题</p>
</li>
<li>
<p>修复自定义组件查找路径问题</p>
</li>
<li>
<p>修复编辑器卡死问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_532021_03_30">1.0.53（2021-03-30）</h4>
<div class="ulist">
<ul>
<li>
<p>修复创建全局角色报错问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_522021_03_30">1.0.52（2021-03-30）</h4>
<div class="ulist">
<ul>
<li>
<p>修复外部数据源名称变更后无法使用模型列表功能</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_512021_03_29">1.0.51（2021-03-29）</h4>
<div class="ulist">
<ul>
<li>
<p>增加第三方登录功能</p>
</li>
<li>
<p>API 中心支持文件下载</p>
</li>
<li>
<p>优化平台日志展示和条件过滤</p>
</li>
<li>
<p>页面编辑器可配置不使用代理</p>
</li>
<li>
<p>支持配置邮箱接口 API</p>
</li>
<li>
<p>增加 profile 方式来获取用户信息</p>
</li>
<li>
<p>修复 ES 导致卡顿问题</p>
</li>
<li>
<p>修复角色管理权限问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_502021_03_18">1.0.50（2021-03-18）</h4>
<div class="ulist">
<ul>
<li>
<p>修复部门批量导入权限问题</p>
</li>
<li>
<p>API Center 转发接口不透传 headers</p>
</li>
<li>
<p>优化：API Center 结果转换支持不写 data.data, 支持删除数据</p>
</li>
<li>
<p>修复应用模板导出问题</p>
</li>
<li>
<p>Redis 支持 twemproxy 集群</p>
</li>
<li>
<p>优化数据库连接性能</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_462021_03_16">1.0.46（2021-03-16）</h4>
<div class="ulist">
<ul>
<li>
<p>支持应用级别关闭代理</p>
</li>
<li>
<p>支持在应用内查看操作日志</p>
</li>
<li>
<p>优化：自定义组件调试 schema 自动保存</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_452021_03_15">1.0.45（2021-03-15）</h4>
<div class="ulist">
<ul>
<li>
<p>支持 API 401 报错的时候跳转到对应的地址</p>
</li>
<li>
<p>优化普通页面打开性能</p>
</li>
<li>
<p>首页新增首次访问引导</p>
</li>
<li>
<p>支持导入组织架构</p>
</li>
<li>
<p>新增 API 接口，支持应用角色相关的控制</p>
</li>
<li>
<p>私有部署版本支持平台级别后端自定义签名插件</p>
</li>
<li>
<p>修复：页面资源权限问题</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_1_0_422021_03_05">1.0.42（2021-03-05）</h4>
<div class="ulist">
<ul>
<li>
<p>支持 Redis Cluter 模式</p>
</li>
<li>
<p>支持日志输出到控制台</p>
</li>
<li>
<p>应用内支持创建应用级别角色</p>
</li>
<li>
<p>性能优化</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-07-26 21:53:28 +0800
</div>
</div>
</body>
</html>